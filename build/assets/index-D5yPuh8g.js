const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/leaflet-src-DE8NUKC0.js","assets/_commonjsHelpers-Cpj98o6Y.js"])))=>i.map(i=>d[i]);
(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();var Wa={exports:{}},vs={},Ha={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var md;function Tp(){if(md)return ve;md=1;var s=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),j=Symbol.iterator;function b(v){return v===null||typeof v!="object"?null:(v=j&&v[j]||v["@@iterator"],typeof v=="function"?v:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,O={};function $(v,N,K){this.props=v,this.context=N,this.refs=O,this.updater=K||T}$.prototype.isReactComponent={},$.prototype.setState=function(v,N){if(typeof v!="object"&&typeof v!="function"&&v!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,v,N,"setState")},$.prototype.forceUpdate=function(v){this.updater.enqueueForceUpdate(this,v,"forceUpdate")};function M(){}M.prototype=$.prototype;function q(v,N,K){this.props=v,this.context=N,this.refs=O,this.updater=K||T}var D=q.prototype=new M;D.constructor=q,A(D,$.prototype),D.isPureReactComponent=!0;var U=Array.isArray,re=Object.prototype.hasOwnProperty,J={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function fe(v,N,K){var ee,H={},X=null,Q=null;if(N!=null)for(ee in N.ref!==void 0&&(Q=N.ref),N.key!==void 0&&(X=""+N.key),N)re.call(N,ee)&&!F.hasOwnProperty(ee)&&(H[ee]=N[ee]);var he=arguments.length-2;if(he===1)H.children=K;else if(1<he){for(var ae=Array(he),pe=0;pe<he;pe++)ae[pe]=arguments[pe+2];H.children=ae}if(v&&v.defaultProps)for(ee in he=v.defaultProps,he)H[ee]===void 0&&(H[ee]=he[ee]);return{$$typeof:s,type:v,key:X,ref:Q,props:H,_owner:J.current}}function ye(v,N){return{$$typeof:s,type:v.type,key:N,ref:v.ref,props:v.props,_owner:v._owner}}function Se(v){return typeof v=="object"&&v!==null&&v.$$typeof===s}function Re(v){var N={"=":"=0",":":"=2"};return"$"+v.replace(/[=:]/g,function(K){return N[K]})}var je=/\/+/g;function k(v,N){return typeof v=="object"&&v!==null&&v.key!=null?Re(""+v.key):N.toString(36)}function Y(v,N,K,ee,H){var X=typeof v;(X==="undefined"||X==="boolean")&&(v=null);var Q=!1;if(v===null)Q=!0;else switch(X){case"string":case"number":Q=!0;break;case"object":switch(v.$$typeof){case s:case r:Q=!0}}if(Q)return Q=v,H=H(Q),v=ee===""?"."+k(Q,0):ee,U(H)?(K="",v!=null&&(K=v.replace(je,"$&/")+"/"),Y(H,N,K,"",function(pe){return pe})):H!=null&&(Se(H)&&(H=ye(H,K+(!H.key||Q&&Q.key===H.key?"":(""+H.key).replace(je,"$&/")+"/")+v)),N.push(H)),1;if(Q=0,ee=ee===""?".":ee+":",U(v))for(var he=0;he<v.length;he++){X=v[he];var ae=ee+k(X,he);Q+=Y(X,N,K,ae,H)}else if(ae=b(v),typeof ae=="function")for(v=ae.call(v),he=0;!(X=v.next()).done;)X=X.value,ae=ee+k(X,he++),Q+=Y(X,N,K,ae,H);else if(X==="object")throw N=String(v),Error("Objects are not valid as a React child (found: "+(N==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":N)+"). If you meant to render a collection of children, use an array instead.");return Q}function me(v,N,K){if(v==null)return v;var ee=[],H=0;return Y(v,ee,"","",function(X){return N.call(K,X,H++)}),ee}function Ae(v){if(v._status===-1){var N=v._result;N=N(),N.then(function(K){(v._status===0||v._status===-1)&&(v._status=1,v._result=K)},function(K){(v._status===0||v._status===-1)&&(v._status=2,v._result=K)}),v._status===-1&&(v._status=0,v._result=N)}if(v._status===1)return v._result.default;throw v._result}var xe={current:null},P={transition:null},z={ReactCurrentDispatcher:xe,ReactCurrentBatchConfig:P,ReactCurrentOwner:J};function E(){throw Error("act(...) is not supported in production builds of React.")}return ve.Children={map:me,forEach:function(v,N,K){me(v,function(){N.apply(this,arguments)},K)},count:function(v){var N=0;return me(v,function(){N++}),N},toArray:function(v){return me(v,function(N){return N})||[]},only:function(v){if(!Se(v))throw Error("React.Children.only expected to receive a single React element child.");return v}},ve.Component=$,ve.Fragment=n,ve.Profiler=l,ve.PureComponent=q,ve.StrictMode=o,ve.Suspense=g,ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z,ve.act=E,ve.cloneElement=function(v,N,K){if(v==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+v+".");var ee=A({},v.props),H=v.key,X=v.ref,Q=v._owner;if(N!=null){if(N.ref!==void 0&&(X=N.ref,Q=J.current),N.key!==void 0&&(H=""+N.key),v.type&&v.type.defaultProps)var he=v.type.defaultProps;for(ae in N)re.call(N,ae)&&!F.hasOwnProperty(ae)&&(ee[ae]=N[ae]===void 0&&he!==void 0?he[ae]:N[ae])}var ae=arguments.length-2;if(ae===1)ee.children=K;else if(1<ae){he=Array(ae);for(var pe=0;pe<ae;pe++)he[pe]=arguments[pe+2];ee.children=he}return{$$typeof:s,type:v.type,key:H,ref:X,props:ee,_owner:Q}},ve.createContext=function(v){return v={$$typeof:f,_currentValue:v,_currentValue2:v,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},v.Provider={$$typeof:c,_context:v},v.Consumer=v},ve.createElement=fe,ve.createFactory=function(v){var N=fe.bind(null,v);return N.type=v,N},ve.createRef=function(){return{current:null}},ve.forwardRef=function(v){return{$$typeof:p,render:v}},ve.isValidElement=Se,ve.lazy=function(v){return{$$typeof:x,_payload:{_status:-1,_result:v},_init:Ae}},ve.memo=function(v,N){return{$$typeof:y,type:v,compare:N===void 0?null:N}},ve.startTransition=function(v){var N=P.transition;P.transition={};try{v()}finally{P.transition=N}},ve.unstable_act=E,ve.useCallback=function(v,N){return xe.current.useCallback(v,N)},ve.useContext=function(v){return xe.current.useContext(v)},ve.useDebugValue=function(){},ve.useDeferredValue=function(v){return xe.current.useDeferredValue(v)},ve.useEffect=function(v,N){return xe.current.useEffect(v,N)},ve.useId=function(){return xe.current.useId()},ve.useImperativeHandle=function(v,N,K){return xe.current.useImperativeHandle(v,N,K)},ve.useInsertionEffect=function(v,N){return xe.current.useInsertionEffect(v,N)},ve.useLayoutEffect=function(v,N){return xe.current.useLayoutEffect(v,N)},ve.useMemo=function(v,N){return xe.current.useMemo(v,N)},ve.useReducer=function(v,N,K){return xe.current.useReducer(v,N,K)},ve.useRef=function(v){return xe.current.useRef(v)},ve.useState=function(v){return xe.current.useState(v)},ve.useSyncExternalStore=function(v,N,K){return xe.current.useSyncExternalStore(v,N,K)},ve.useTransition=function(){return xe.current.useTransition()},ve.version="18.3.1",ve}var yd;function vl(){return yd||(yd=1,Ha.exports=Tp()),Ha.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vd;function Cp(){if(vd)return vs;vd=1;var s=vl(),r=Symbol.for("react.element"),n=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,l=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function f(p,g,y){var x,j={},b=null,T=null;y!==void 0&&(b=""+y),g.key!==void 0&&(b=""+g.key),g.ref!==void 0&&(T=g.ref);for(x in g)o.call(g,x)&&!c.hasOwnProperty(x)&&(j[x]=g[x]);if(p&&p.defaultProps)for(x in g=p.defaultProps,g)j[x]===void 0&&(j[x]=g[x]);return{$$typeof:r,type:p,key:b,ref:T,props:j,_owner:l.current}}return vs.Fragment=n,vs.jsx=f,vs.jsxs=f,vs}var wd;function Pp(){return wd||(wd=1,Wa.exports=Cp()),Wa.exports}var d=Pp(),Mi={},Ka={exports:{}},gt={},Ga={exports:{}},Ja={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xd;function Rp(){return xd||(xd=1,(function(s){function r(P,z){var E=P.length;P.push(z);e:for(;0<E;){var v=E-1>>>1,N=P[v];if(0<l(N,z))P[v]=z,P[E]=N,E=v;else break e}}function n(P){return P.length===0?null:P[0]}function o(P){if(P.length===0)return null;var z=P[0],E=P.pop();if(E!==z){P[0]=E;e:for(var v=0,N=P.length,K=N>>>1;v<K;){var ee=2*(v+1)-1,H=P[ee],X=ee+1,Q=P[X];if(0>l(H,E))X<N&&0>l(Q,H)?(P[v]=Q,P[X]=E,v=X):(P[v]=H,P[ee]=E,v=ee);else if(X<N&&0>l(Q,E))P[v]=Q,P[X]=E,v=X;else break e}}return z}function l(P,z){var E=P.sortIndex-z.sortIndex;return E!==0?E:P.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var f=Date,p=f.now();s.unstable_now=function(){return f.now()-p}}var g=[],y=[],x=1,j=null,b=3,T=!1,A=!1,O=!1,$=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(P){for(var z=n(y);z!==null;){if(z.callback===null)o(y);else if(z.startTime<=P)o(y),z.sortIndex=z.expirationTime,r(g,z);else break;z=n(y)}}function U(P){if(O=!1,D(P),!A)if(n(g)!==null)A=!0,Ae(re);else{var z=n(y);z!==null&&xe(U,z.startTime-P)}}function re(P,z){A=!1,O&&(O=!1,M(fe),fe=-1),T=!0;var E=b;try{for(D(z),j=n(g);j!==null&&(!(j.expirationTime>z)||P&&!Re());){var v=j.callback;if(typeof v=="function"){j.callback=null,b=j.priorityLevel;var N=v(j.expirationTime<=z);z=s.unstable_now(),typeof N=="function"?j.callback=N:j===n(g)&&o(g),D(z)}else o(g);j=n(g)}if(j!==null)var K=!0;else{var ee=n(y);ee!==null&&xe(U,ee.startTime-z),K=!1}return K}finally{j=null,b=E,T=!1}}var J=!1,F=null,fe=-1,ye=5,Se=-1;function Re(){return!(s.unstable_now()-Se<ye)}function je(){if(F!==null){var P=s.unstable_now();Se=P;var z=!0;try{z=F(!0,P)}finally{z?k():(J=!1,F=null)}}else J=!1}var k;if(typeof q=="function")k=function(){q(je)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,me=Y.port2;Y.port1.onmessage=je,k=function(){me.postMessage(null)}}else k=function(){$(je,0)};function Ae(P){F=P,J||(J=!0,k())}function xe(P,z){fe=$(function(){P(s.unstable_now())},z)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(P){P.callback=null},s.unstable_continueExecution=function(){A||T||(A=!0,Ae(re))},s.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ye=0<P?Math.floor(1e3/P):5},s.unstable_getCurrentPriorityLevel=function(){return b},s.unstable_getFirstCallbackNode=function(){return n(g)},s.unstable_next=function(P){switch(b){case 1:case 2:case 3:var z=3;break;default:z=b}var E=b;b=z;try{return P()}finally{b=E}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(P,z){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var E=b;b=P;try{return z()}finally{b=E}},s.unstable_scheduleCallback=function(P,z,E){var v=s.unstable_now();switch(typeof E=="object"&&E!==null?(E=E.delay,E=typeof E=="number"&&0<E?v+E:v):E=v,P){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=E+N,P={id:x++,callback:z,priorityLevel:P,startTime:E,expirationTime:N,sortIndex:-1},E>v?(P.sortIndex=E,r(y,P),n(g)===null&&P===n(y)&&(O?(M(fe),fe=-1):O=!0,xe(U,E-v))):(P.sortIndex=N,r(g,P),A||T||(A=!0,Ae(re))),P},s.unstable_shouldYield=Re,s.unstable_wrapCallback=function(P){var z=b;return function(){var E=b;b=z;try{return P.apply(this,arguments)}finally{b=E}}}})(Ja)),Ja}var _d;function Ap(){return _d||(_d=1,Ga.exports=Rp()),Ga.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bd;function Op(){if(bd)return gt;bd=1;var s=vl(),r=Ap();function n(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,l={};function c(e,t){f(e,t),f(e+"Capture",t)}function f(e,t){for(l[e]=t,e=0;e<t.length;e++)o.add(t[e])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},j={};function b(e){return g.call(j,e)?!0:g.call(x,e)?!1:y.test(e)?j[e]=!0:(x[e]=!0,!1)}function T(e,t,i,a){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function A(e,t,i,a){if(t===null||typeof t>"u"||T(e,t,i,a))return!0;if(a)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function O(e,t,i,a,u,h,m){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=u,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=h,this.removeEmptyString=m}var $={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){$[e]=new O(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];$[t]=new O(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){$[e]=new O(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){$[e]=new O(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){$[e]=new O(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){$[e]=new O(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){$[e]=new O(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){$[e]=new O(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){$[e]=new O(e,5,!1,e.toLowerCase(),null,!1,!1)});var M=/[\-:]([a-z])/g;function q(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(M,q);$[t]=new O(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(M,q);$[t]=new O(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(M,q);$[t]=new O(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){$[e]=new O(e,1,!1,e.toLowerCase(),null,!1,!1)}),$.xlinkHref=new O("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){$[e]=new O(e,1,!1,e.toLowerCase(),null,!0,!0)});function D(e,t,i,a){var u=$.hasOwnProperty(t)?$[t]:null;(u!==null?u.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(A(t,i,u,a)&&(i=null),a||u===null?b(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):u.mustUseProperty?e[u.propertyName]=i===null?u.type===3?!1:"":i:(t=u.attributeName,a=u.attributeNamespace,i===null?e.removeAttribute(t):(u=u.type,i=u===3||u===4&&i===!0?"":""+i,a?e.setAttributeNS(a,t,i):e.setAttribute(t,i))))}var U=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,re=Symbol.for("react.element"),J=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),fe=Symbol.for("react.strict_mode"),ye=Symbol.for("react.profiler"),Se=Symbol.for("react.provider"),Re=Symbol.for("react.context"),je=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),me=Symbol.for("react.memo"),Ae=Symbol.for("react.lazy"),xe=Symbol.for("react.offscreen"),P=Symbol.iterator;function z(e){return e===null||typeof e!="object"?null:(e=P&&e[P]||e["@@iterator"],typeof e=="function"?e:null)}var E=Object.assign,v;function N(e){if(v===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);v=t&&t[1]||""}return`
`+v+e}var K=!1;function ee(e,t){if(!e||K)return"";K=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(I){var a=I}Reflect.construct(e,[],t)}else{try{t.call()}catch(I){a=I}e.call(t.prototype)}else{try{throw Error()}catch(I){a=I}e()}}catch(I){if(I&&a&&typeof I.stack=="string"){for(var u=I.stack.split(`
`),h=a.stack.split(`
`),m=u.length-1,w=h.length-1;1<=m&&0<=w&&u[m]!==h[w];)w--;for(;1<=m&&0<=w;m--,w--)if(u[m]!==h[w]){if(m!==1||w!==1)do if(m--,w--,0>w||u[m]!==h[w]){var _=`
`+u[m].replace(" at new "," at ");return e.displayName&&_.includes("<anonymous>")&&(_=_.replace("<anonymous>",e.displayName)),_}while(1<=m&&0<=w);break}}}finally{K=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?N(e):""}function H(e){switch(e.tag){case 5:return N(e.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 2:case 15:return e=ee(e.type,!1),e;case 11:return e=ee(e.type.render,!1),e;case 1:return e=ee(e.type,!0),e;default:return""}}function X(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case F:return"Fragment";case J:return"Portal";case ye:return"Profiler";case fe:return"StrictMode";case k:return"Suspense";case Y:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Re:return(e.displayName||"Context")+".Consumer";case Se:return(e._context.displayName||"Context")+".Provider";case je:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case me:return t=e.displayName||null,t!==null?t:X(e.type)||"Memo";case Ae:t=e._payload,e=e._init;try{return X(e(t))}catch{}}return null}function Q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return X(t);case 8:return t===fe?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function he(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ae(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function pe(e){var t=ae(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var u=i.get,h=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(m){a=""+m,h.call(this,m)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return a},setValue:function(m){a=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ve(e){e._valueTracker||(e._valueTracker=pe(e))}function ut(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),a="";return e&&(a=ae(e)?e.checked?"true":"false":e.value),e=a,e!==i?(t.setValue(e),!0):!1}function Ct(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function $e(e,t){var i=t.checked;return E({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function Rn(e,t){var i=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;i=he(t.value!=null?t.value:i),e._wrapperState={initialChecked:a,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function An(e,t){t=t.checked,t!=null&&D(e,"checked",t,!1)}function Kr(e,t){An(e,t);var i=he(t.value),a=t.type;if(i!=null)a==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?On(e,t.type,i):t.hasOwnProperty("defaultValue")&&On(e,t.type,he(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Gr(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function On(e,t,i){(t!=="number"||Ct(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var nr=Array.isArray;function sr(e,t,i,a){if(e=e.options,t){t={};for(var u=0;u<i.length;u++)t["$"+i[u]]=!0;for(i=0;i<e.length;i++)u=t.hasOwnProperty("$"+e[i].value),e[i].selected!==u&&(e[i].selected=u),u&&a&&(e[i].defaultSelected=!0)}else{for(i=""+he(i),t=null,u=0;u<e.length;u++){if(e[u].value===i){e[u].selected=!0,a&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function ot(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(n(91));return E({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ft(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(n(92));if(nr(i)){if(1<i.length)throw Error(n(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:he(i)}}function Nl(e,t){var i=he(t.value),a=he(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),a!=null&&(e.defaultValue=""+a)}function Tl(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Cl(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function to(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Cl(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Rs,Pl=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,a,u){MSApp.execUnsafeLocalFunction(function(){return e(t,i,a,u)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Rs=Rs||document.createElement("div"),Rs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Rs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function $n(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var In={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Rh=["Webkit","ms","Moz","O"];Object.keys(In).forEach(function(e){Rh.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),In[t]=In[e]})});function Rl(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||In.hasOwnProperty(e)&&In[e]?(""+t).trim():t+"px"}function Al(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var a=i.indexOf("--")===0,u=Rl(i,t[i],a);i==="float"&&(i="cssFloat"),a?e.setProperty(i,u):e[i]=u}}var Ah=E({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ro(e,t){if(t){if(Ah[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(n(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(n(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(n(61))}if(t.style!=null&&typeof t.style!="object")throw Error(n(62))}}function no(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var so=null;function io(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var oo=null,Jr=null,Qr=null;function Ol(e){if(e=ns(e)){if(typeof oo!="function")throw Error(n(280));var t=e.stateNode;t&&(t=ei(t),oo(e.stateNode,e.type,t))}}function $l(e){Jr?Qr?Qr.push(e):Qr=[e]:Jr=e}function Il(){if(Jr){var e=Jr,t=Qr;if(Qr=Jr=null,Ol(e),t)for(e=0;e<t.length;e++)Ol(t[e])}}function Dl(e,t){return e(t)}function Ll(){}var ao=!1;function Ul(e,t,i){if(ao)return e(t,i);ao=!0;try{return Dl(e,t,i)}finally{ao=!1,(Jr!==null||Qr!==null)&&(Ll(),Il())}}function Dn(e,t){var i=e.stateNode;if(i===null)return null;var a=ei(i);if(a===null)return null;i=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(n(231,t,typeof i));return i}var lo=!1;if(p)try{var Ln={};Object.defineProperty(Ln,"passive",{get:function(){lo=!0}}),window.addEventListener("test",Ln,Ln),window.removeEventListener("test",Ln,Ln)}catch{lo=!1}function Oh(e,t,i,a,u,h,m,w,_){var I=Array.prototype.slice.call(arguments,3);try{t.apply(i,I)}catch(V){this.onError(V)}}var Un=!1,As=null,Os=!1,uo=null,$h={onError:function(e){Un=!0,As=e}};function Ih(e,t,i,a,u,h,m,w,_){Un=!1,As=null,Oh.apply($h,arguments)}function Dh(e,t,i,a,u,h,m,w,_){if(Ih.apply(this,arguments),Un){if(Un){var I=As;Un=!1,As=null}else throw Error(n(198));Os||(Os=!0,uo=I)}}function Er(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function Ml(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Fl(e){if(Er(e)!==e)throw Error(n(188))}function Lh(e){var t=e.alternate;if(!t){if(t=Er(e),t===null)throw Error(n(188));return t!==e?null:e}for(var i=e,a=t;;){var u=i.return;if(u===null)break;var h=u.alternate;if(h===null){if(a=u.return,a!==null){i=a;continue}break}if(u.child===h.child){for(h=u.child;h;){if(h===i)return Fl(u),e;if(h===a)return Fl(u),t;h=h.sibling}throw Error(n(188))}if(i.return!==a.return)i=u,a=h;else{for(var m=!1,w=u.child;w;){if(w===i){m=!0,i=u,a=h;break}if(w===a){m=!0,a=u,i=h;break}w=w.sibling}if(!m){for(w=h.child;w;){if(w===i){m=!0,i=h,a=u;break}if(w===a){m=!0,a=h,i=u;break}w=w.sibling}if(!m)throw Error(n(189))}}if(i.alternate!==a)throw Error(n(190))}if(i.tag!==3)throw Error(n(188));return i.stateNode.current===i?e:t}function zl(e){return e=Lh(e),e!==null?Bl(e):null}function Bl(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Bl(e);if(t!==null)return t;e=e.sibling}return null}var Vl=r.unstable_scheduleCallback,ql=r.unstable_cancelCallback,Uh=r.unstable_shouldYield,Mh=r.unstable_requestPaint,ze=r.unstable_now,Fh=r.unstable_getCurrentPriorityLevel,co=r.unstable_ImmediatePriority,Wl=r.unstable_UserBlockingPriority,$s=r.unstable_NormalPriority,zh=r.unstable_LowPriority,Hl=r.unstable_IdlePriority,Is=null,zt=null;function Bh(e){if(zt&&typeof zt.onCommitFiberRoot=="function")try{zt.onCommitFiberRoot(Is,e,void 0,(e.current.flags&128)===128)}catch{}}var Pt=Math.clz32?Math.clz32:Wh,Vh=Math.log,qh=Math.LN2;function Wh(e){return e>>>=0,e===0?32:31-(Vh(e)/qh|0)|0}var Ds=64,Ls=4194304;function Mn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Us(e,t){var i=e.pendingLanes;if(i===0)return 0;var a=0,u=e.suspendedLanes,h=e.pingedLanes,m=i&268435455;if(m!==0){var w=m&~u;w!==0?a=Mn(w):(h&=m,h!==0&&(a=Mn(h)))}else m=i&~u,m!==0?a=Mn(m):h!==0&&(a=Mn(h));if(a===0)return 0;if(t!==0&&t!==a&&(t&u)===0&&(u=a&-a,h=t&-t,u>=h||u===16&&(h&4194240)!==0))return t;if((a&4)!==0&&(a|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)i=31-Pt(t),u=1<<i,a|=e[i],t&=~u;return a}function Hh(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Kh(e,t){for(var i=e.suspendedLanes,a=e.pingedLanes,u=e.expirationTimes,h=e.pendingLanes;0<h;){var m=31-Pt(h),w=1<<m,_=u[m];_===-1?((w&i)===0||(w&a)!==0)&&(u[m]=Hh(w,t)):_<=t&&(e.expiredLanes|=w),h&=~w}}function ho(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Kl(){var e=Ds;return Ds<<=1,(Ds&4194240)===0&&(Ds=64),e}function fo(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Fn(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Pt(t),e[t]=i}function Gh(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<i;){var u=31-Pt(i),h=1<<u;t[u]=0,a[u]=-1,e[u]=-1,i&=~h}}function po(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var a=31-Pt(i),u=1<<a;u&t|e[a]&t&&(e[a]|=t),i&=~u}}var Ee=0;function Gl(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Jl,go,Ql,Yl,Xl,mo=!1,Ms=[],ir=null,or=null,ar=null,zn=new Map,Bn=new Map,lr=[],Jh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zl(e,t){switch(e){case"focusin":case"focusout":ir=null;break;case"dragenter":case"dragleave":or=null;break;case"mouseover":case"mouseout":ar=null;break;case"pointerover":case"pointerout":zn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bn.delete(t.pointerId)}}function Vn(e,t,i,a,u,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:i,eventSystemFlags:a,nativeEvent:h,targetContainers:[u]},t!==null&&(t=ns(t),t!==null&&go(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function Qh(e,t,i,a,u){switch(t){case"focusin":return ir=Vn(ir,e,t,i,a,u),!0;case"dragenter":return or=Vn(or,e,t,i,a,u),!0;case"mouseover":return ar=Vn(ar,e,t,i,a,u),!0;case"pointerover":var h=u.pointerId;return zn.set(h,Vn(zn.get(h)||null,e,t,i,a,u)),!0;case"gotpointercapture":return h=u.pointerId,Bn.set(h,Vn(Bn.get(h)||null,e,t,i,a,u)),!0}return!1}function eu(e){var t=Nr(e.target);if(t!==null){var i=Er(t);if(i!==null){if(t=i.tag,t===13){if(t=Ml(i),t!==null){e.blockedOn=t,Xl(e.priority,function(){Ql(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Fs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=vo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var a=new i.constructor(i.type,i);so=a,i.target.dispatchEvent(a),so=null}else return t=ns(i),t!==null&&go(t),e.blockedOn=i,!1;t.shift()}return!0}function tu(e,t,i){Fs(e)&&i.delete(t)}function Yh(){mo=!1,ir!==null&&Fs(ir)&&(ir=null),or!==null&&Fs(or)&&(or=null),ar!==null&&Fs(ar)&&(ar=null),zn.forEach(tu),Bn.forEach(tu)}function qn(e,t){e.blockedOn===t&&(e.blockedOn=null,mo||(mo=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Yh)))}function Wn(e){function t(u){return qn(u,e)}if(0<Ms.length){qn(Ms[0],e);for(var i=1;i<Ms.length;i++){var a=Ms[i];a.blockedOn===e&&(a.blockedOn=null)}}for(ir!==null&&qn(ir,e),or!==null&&qn(or,e),ar!==null&&qn(ar,e),zn.forEach(t),Bn.forEach(t),i=0;i<lr.length;i++)a=lr[i],a.blockedOn===e&&(a.blockedOn=null);for(;0<lr.length&&(i=lr[0],i.blockedOn===null);)eu(i),i.blockedOn===null&&lr.shift()}var Yr=U.ReactCurrentBatchConfig,zs=!0;function Xh(e,t,i,a){var u=Ee,h=Yr.transition;Yr.transition=null;try{Ee=1,yo(e,t,i,a)}finally{Ee=u,Yr.transition=h}}function Zh(e,t,i,a){var u=Ee,h=Yr.transition;Yr.transition=null;try{Ee=4,yo(e,t,i,a)}finally{Ee=u,Yr.transition=h}}function yo(e,t,i,a){if(zs){var u=vo(e,t,i,a);if(u===null)Io(e,t,a,Bs,i),Zl(e,a);else if(Qh(u,e,t,i,a))a.stopPropagation();else if(Zl(e,a),t&4&&-1<Jh.indexOf(e)){for(;u!==null;){var h=ns(u);if(h!==null&&Jl(h),h=vo(e,t,i,a),h===null&&Io(e,t,a,Bs,i),h===u)break;u=h}u!==null&&a.stopPropagation()}else Io(e,t,a,null,i)}}var Bs=null;function vo(e,t,i,a){if(Bs=null,e=io(a),e=Nr(e),e!==null)if(t=Er(e),t===null)e=null;else if(i=t.tag,i===13){if(e=Ml(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Bs=e,null}function ru(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Fh()){case co:return 1;case Wl:return 4;case $s:case zh:return 16;case Hl:return 536870912;default:return 16}default:return 16}}var ur=null,wo=null,Vs=null;function nu(){if(Vs)return Vs;var e,t=wo,i=t.length,a,u="value"in ur?ur.value:ur.textContent,h=u.length;for(e=0;e<i&&t[e]===u[e];e++);var m=i-e;for(a=1;a<=m&&t[i-a]===u[h-a];a++);return Vs=u.slice(e,1<a?1-a:void 0)}function qs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ws(){return!0}function su(){return!1}function mt(e){function t(i,a,u,h,m){this._reactName=i,this._targetInst=u,this.type=a,this.nativeEvent=h,this.target=m,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(i=e[w],this[w]=i?i(h):h[w]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Ws:su,this.isPropagationStopped=su,this}return E(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Ws)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Ws)},persist:function(){},isPersistent:Ws}),t}var Xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xo=mt(Xr),Hn=E({},Xr,{view:0,detail:0}),ef=mt(Hn),_o,bo,Kn,Hs=E({},Hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ko,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Kn&&(Kn&&e.type==="mousemove"?(_o=e.screenX-Kn.screenX,bo=e.screenY-Kn.screenY):bo=_o=0,Kn=e),_o)},movementY:function(e){return"movementY"in e?e.movementY:bo}}),iu=mt(Hs),tf=E({},Hs,{dataTransfer:0}),rf=mt(tf),nf=E({},Hn,{relatedTarget:0}),So=mt(nf),sf=E({},Xr,{animationName:0,elapsedTime:0,pseudoElement:0}),of=mt(sf),af=E({},Xr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),lf=mt(af),uf=E({},Xr,{data:0}),ou=mt(uf),cf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},df={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ff(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=hf[e])?!!t[e]:!1}function ko(){return ff}var pf=E({},Hn,{key:function(e){if(e.key){var t=cf[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=qs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?df[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ko,charCode:function(e){return e.type==="keypress"?qs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?qs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),gf=mt(pf),mf=E({},Hs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),au=mt(mf),yf=E({},Hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ko}),vf=mt(yf),wf=E({},Xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),xf=mt(wf),_f=E({},Hs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),bf=mt(_f),Sf=[9,13,27,32],jo=p&&"CompositionEvent"in window,Gn=null;p&&"documentMode"in document&&(Gn=document.documentMode);var kf=p&&"TextEvent"in window&&!Gn,lu=p&&(!jo||Gn&&8<Gn&&11>=Gn),uu=" ",cu=!1;function du(e,t){switch(e){case"keyup":return Sf.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Zr=!1;function jf(e,t){switch(e){case"compositionend":return hu(t);case"keypress":return t.which!==32?null:(cu=!0,uu);case"textInput":return e=t.data,e===uu&&cu?null:e;default:return null}}function Ef(e,t){if(Zr)return e==="compositionend"||!jo&&du(e,t)?(e=nu(),Vs=wo=ur=null,Zr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return lu&&t.locale!=="ko"?null:t.data;default:return null}}var Nf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Nf[e.type]:t==="textarea"}function pu(e,t,i,a){$l(a),t=Ys(t,"onChange"),0<t.length&&(i=new xo("onChange","change",null,i,a),e.push({event:i,listeners:t}))}var Jn=null,Qn=null;function Tf(e){Au(e,0)}function Ks(e){var t=sn(e);if(ut(t))return e}function Cf(e,t){if(e==="change")return t}var gu=!1;if(p){var Eo;if(p){var No="oninput"in document;if(!No){var mu=document.createElement("div");mu.setAttribute("oninput","return;"),No=typeof mu.oninput=="function"}Eo=No}else Eo=!1;gu=Eo&&(!document.documentMode||9<document.documentMode)}function yu(){Jn&&(Jn.detachEvent("onpropertychange",vu),Qn=Jn=null)}function vu(e){if(e.propertyName==="value"&&Ks(Qn)){var t=[];pu(t,Qn,e,io(e)),Ul(Tf,t)}}function Pf(e,t,i){e==="focusin"?(yu(),Jn=t,Qn=i,Jn.attachEvent("onpropertychange",vu)):e==="focusout"&&yu()}function Rf(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ks(Qn)}function Af(e,t){if(e==="click")return Ks(t)}function Of(e,t){if(e==="input"||e==="change")return Ks(t)}function $f(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Rt=typeof Object.is=="function"?Object.is:$f;function Yn(e,t){if(Rt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(a=0;a<i.length;a++){var u=i[a];if(!g.call(t,u)||!Rt(e[u],t[u]))return!1}return!0}function wu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function xu(e,t){var i=wu(e);e=0;for(var a;i;){if(i.nodeType===3){if(a=e+i.textContent.length,e<=t&&a>=t)return{node:i,offset:t-e};e=a}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=wu(i)}}function _u(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?_u(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function bu(){for(var e=window,t=Ct();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Ct(e.document)}return t}function To(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function If(e){var t=bu(),i=e.focusedElem,a=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&_u(i.ownerDocument.documentElement,i)){if(a!==null&&To(i)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var u=i.textContent.length,h=Math.min(a.start,u);a=a.end===void 0?h:Math.min(a.end,u),!e.extend&&h>a&&(u=a,a=h,h=u),u=xu(i,h);var m=xu(i,a);u&&m&&(e.rangeCount!==1||e.anchorNode!==u.node||e.anchorOffset!==u.offset||e.focusNode!==m.node||e.focusOffset!==m.offset)&&(t=t.createRange(),t.setStart(u.node,u.offset),e.removeAllRanges(),h>a?(e.addRange(t),e.extend(m.node,m.offset)):(t.setEnd(m.node,m.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Df=p&&"documentMode"in document&&11>=document.documentMode,en=null,Co=null,Xn=null,Po=!1;function Su(e,t,i){var a=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Po||en==null||en!==Ct(a)||(a=en,"selectionStart"in a&&To(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Xn&&Yn(Xn,a)||(Xn=a,a=Ys(Co,"onSelect"),0<a.length&&(t=new xo("onSelect","select",null,t,i),e.push({event:t,listeners:a}),t.target=en)))}function Gs(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var tn={animationend:Gs("Animation","AnimationEnd"),animationiteration:Gs("Animation","AnimationIteration"),animationstart:Gs("Animation","AnimationStart"),transitionend:Gs("Transition","TransitionEnd")},Ro={},ku={};p&&(ku=document.createElement("div").style,"AnimationEvent"in window||(delete tn.animationend.animation,delete tn.animationiteration.animation,delete tn.animationstart.animation),"TransitionEvent"in window||delete tn.transitionend.transition);function Js(e){if(Ro[e])return Ro[e];if(!tn[e])return e;var t=tn[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in ku)return Ro[e]=t[i];return e}var ju=Js("animationend"),Eu=Js("animationiteration"),Nu=Js("animationstart"),Tu=Js("transitionend"),Cu=new Map,Pu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cr(e,t){Cu.set(e,t),c(t,[e])}for(var Ao=0;Ao<Pu.length;Ao++){var Oo=Pu[Ao],Lf=Oo.toLowerCase(),Uf=Oo[0].toUpperCase()+Oo.slice(1);cr(Lf,"on"+Uf)}cr(ju,"onAnimationEnd"),cr(Eu,"onAnimationIteration"),cr(Nu,"onAnimationStart"),cr("dblclick","onDoubleClick"),cr("focusin","onFocus"),cr("focusout","onBlur"),cr(Tu,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zn));function Ru(e,t,i){var a=e.type||"unknown-event";e.currentTarget=i,Dh(a,t,void 0,e),e.currentTarget=null}function Au(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var a=e[i],u=a.event;a=a.listeners;e:{var h=void 0;if(t)for(var m=a.length-1;0<=m;m--){var w=a[m],_=w.instance,I=w.currentTarget;if(w=w.listener,_!==h&&u.isPropagationStopped())break e;Ru(u,w,I),h=_}else for(m=0;m<a.length;m++){if(w=a[m],_=w.instance,I=w.currentTarget,w=w.listener,_!==h&&u.isPropagationStopped())break e;Ru(u,w,I),h=_}}}if(Os)throw e=uo,Os=!1,uo=null,e}function Ce(e,t){var i=t[zo];i===void 0&&(i=t[zo]=new Set);var a=e+"__bubble";i.has(a)||(Ou(t,e,2,!1),i.add(a))}function $o(e,t,i){var a=0;t&&(a|=4),Ou(i,e,a,t)}var Qs="_reactListening"+Math.random().toString(36).slice(2);function es(e){if(!e[Qs]){e[Qs]=!0,o.forEach(function(i){i!=="selectionchange"&&(Mf.has(i)||$o(i,!1,e),$o(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Qs]||(t[Qs]=!0,$o("selectionchange",!1,t))}}function Ou(e,t,i,a){switch(ru(t)){case 1:var u=Xh;break;case 4:u=Zh;break;default:u=yo}i=u.bind(null,t,i,e),u=void 0,!lo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),a?u!==void 0?e.addEventListener(t,i,{capture:!0,passive:u}):e.addEventListener(t,i,!0):u!==void 0?e.addEventListener(t,i,{passive:u}):e.addEventListener(t,i,!1)}function Io(e,t,i,a,u){var h=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var m=a.tag;if(m===3||m===4){var w=a.stateNode.containerInfo;if(w===u||w.nodeType===8&&w.parentNode===u)break;if(m===4)for(m=a.return;m!==null;){var _=m.tag;if((_===3||_===4)&&(_=m.stateNode.containerInfo,_===u||_.nodeType===8&&_.parentNode===u))return;m=m.return}for(;w!==null;){if(m=Nr(w),m===null)return;if(_=m.tag,_===5||_===6){a=h=m;continue e}w=w.parentNode}}a=a.return}Ul(function(){var I=h,V=io(i),W=[];e:{var B=Cu.get(e);if(B!==void 0){var Z=xo,ne=e;switch(e){case"keypress":if(qs(i)===0)break e;case"keydown":case"keyup":Z=gf;break;case"focusin":ne="focus",Z=So;break;case"focusout":ne="blur",Z=So;break;case"beforeblur":case"afterblur":Z=So;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=iu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=rf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=vf;break;case ju:case Eu:case Nu:Z=of;break;case Tu:Z=xf;break;case"scroll":Z=ef;break;case"wheel":Z=bf;break;case"copy":case"cut":case"paste":Z=lf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=au}var se=(t&4)!==0,Be=!se&&e==="scroll",C=se?B!==null?B+"Capture":null:B;se=[];for(var S=I,R;S!==null;){R=S;var G=R.stateNode;if(R.tag===5&&G!==null&&(R=G,C!==null&&(G=Dn(S,C),G!=null&&se.push(ts(S,G,R)))),Be)break;S=S.return}0<se.length&&(B=new Z(B,ne,null,i,V),W.push({event:B,listeners:se}))}}if((t&7)===0){e:{if(B=e==="mouseover"||e==="pointerover",Z=e==="mouseout"||e==="pointerout",B&&i!==so&&(ne=i.relatedTarget||i.fromElement)&&(Nr(ne)||ne[Kt]))break e;if((Z||B)&&(B=V.window===V?V:(B=V.ownerDocument)?B.defaultView||B.parentWindow:window,Z?(ne=i.relatedTarget||i.toElement,Z=I,ne=ne?Nr(ne):null,ne!==null&&(Be=Er(ne),ne!==Be||ne.tag!==5&&ne.tag!==6)&&(ne=null)):(Z=null,ne=I),Z!==ne)){if(se=iu,G="onMouseLeave",C="onMouseEnter",S="mouse",(e==="pointerout"||e==="pointerover")&&(se=au,G="onPointerLeave",C="onPointerEnter",S="pointer"),Be=Z==null?B:sn(Z),R=ne==null?B:sn(ne),B=new se(G,S+"leave",Z,i,V),B.target=Be,B.relatedTarget=R,G=null,Nr(V)===I&&(se=new se(C,S+"enter",ne,i,V),se.target=R,se.relatedTarget=Be,G=se),Be=G,Z&&ne)t:{for(se=Z,C=ne,S=0,R=se;R;R=rn(R))S++;for(R=0,G=C;G;G=rn(G))R++;for(;0<S-R;)se=rn(se),S--;for(;0<R-S;)C=rn(C),R--;for(;S--;){if(se===C||C!==null&&se===C.alternate)break t;se=rn(se),C=rn(C)}se=null}else se=null;Z!==null&&$u(W,B,Z,se,!1),ne!==null&&Be!==null&&$u(W,Be,ne,se,!0)}}e:{if(B=I?sn(I):window,Z=B.nodeName&&B.nodeName.toLowerCase(),Z==="select"||Z==="input"&&B.type==="file")var ie=Cf;else if(fu(B))if(gu)ie=Of;else{ie=Rf;var le=Pf}else(Z=B.nodeName)&&Z.toLowerCase()==="input"&&(B.type==="checkbox"||B.type==="radio")&&(ie=Af);if(ie&&(ie=ie(e,I))){pu(W,ie,i,V);break e}le&&le(e,B,I),e==="focusout"&&(le=B._wrapperState)&&le.controlled&&B.type==="number"&&On(B,"number",B.value)}switch(le=I?sn(I):window,e){case"focusin":(fu(le)||le.contentEditable==="true")&&(en=le,Co=I,Xn=null);break;case"focusout":Xn=Co=en=null;break;case"mousedown":Po=!0;break;case"contextmenu":case"mouseup":case"dragend":Po=!1,Su(W,i,V);break;case"selectionchange":if(Df)break;case"keydown":case"keyup":Su(W,i,V)}var ue;if(jo)e:{switch(e){case"compositionstart":var ge="onCompositionStart";break e;case"compositionend":ge="onCompositionEnd";break e;case"compositionupdate":ge="onCompositionUpdate";break e}ge=void 0}else Zr?du(e,i)&&(ge="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(ge="onCompositionStart");ge&&(lu&&i.locale!=="ko"&&(Zr||ge!=="onCompositionStart"?ge==="onCompositionEnd"&&Zr&&(ue=nu()):(ur=V,wo="value"in ur?ur.value:ur.textContent,Zr=!0)),le=Ys(I,ge),0<le.length&&(ge=new ou(ge,e,null,i,V),W.push({event:ge,listeners:le}),ue?ge.data=ue:(ue=hu(i),ue!==null&&(ge.data=ue)))),(ue=kf?jf(e,i):Ef(e,i))&&(I=Ys(I,"onBeforeInput"),0<I.length&&(V=new ou("onBeforeInput","beforeinput",null,i,V),W.push({event:V,listeners:I}),V.data=ue))}Au(W,t)})}function ts(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Ys(e,t){for(var i=t+"Capture",a=[];e!==null;){var u=e,h=u.stateNode;u.tag===5&&h!==null&&(u=h,h=Dn(e,i),h!=null&&a.unshift(ts(e,h,u)),h=Dn(e,t),h!=null&&a.push(ts(e,h,u))),e=e.return}return a}function rn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function $u(e,t,i,a,u){for(var h=t._reactName,m=[];i!==null&&i!==a;){var w=i,_=w.alternate,I=w.stateNode;if(_!==null&&_===a)break;w.tag===5&&I!==null&&(w=I,u?(_=Dn(i,h),_!=null&&m.unshift(ts(i,_,w))):u||(_=Dn(i,h),_!=null&&m.push(ts(i,_,w)))),i=i.return}m.length!==0&&e.push({event:t,listeners:m})}var Ff=/\r\n?/g,zf=/\u0000|\uFFFD/g;function Iu(e){return(typeof e=="string"?e:""+e).replace(Ff,`
`).replace(zf,"")}function Xs(e,t,i){if(t=Iu(t),Iu(e)!==t&&i)throw Error(n(425))}function Zs(){}var Do=null,Lo=null;function Uo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Mo=typeof setTimeout=="function"?setTimeout:void 0,Bf=typeof clearTimeout=="function"?clearTimeout:void 0,Du=typeof Promise=="function"?Promise:void 0,Vf=typeof queueMicrotask=="function"?queueMicrotask:typeof Du<"u"?function(e){return Du.resolve(null).then(e).catch(qf)}:Mo;function qf(e){setTimeout(function(){throw e})}function Fo(e,t){var i=t,a=0;do{var u=i.nextSibling;if(e.removeChild(i),u&&u.nodeType===8)if(i=u.data,i==="/$"){if(a===0){e.removeChild(u),Wn(t);return}a--}else i!=="$"&&i!=="$?"&&i!=="$!"||a++;i=u}while(i);Wn(t)}function dr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Lu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var nn=Math.random().toString(36).slice(2),Bt="__reactFiber$"+nn,rs="__reactProps$"+nn,Kt="__reactContainer$"+nn,zo="__reactEvents$"+nn,Wf="__reactListeners$"+nn,Hf="__reactHandles$"+nn;function Nr(e){var t=e[Bt];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Kt]||i[Bt]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=Lu(e);e!==null;){if(i=e[Bt])return i;e=Lu(e)}return t}e=i,i=e.parentNode}return null}function ns(e){return e=e[Bt]||e[Kt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function sn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(n(33))}function ei(e){return e[rs]||null}var Bo=[],on=-1;function hr(e){return{current:e}}function Pe(e){0>on||(e.current=Bo[on],Bo[on]=null,on--)}function Ne(e,t){on++,Bo[on]=e.current,e.current=t}var fr={},rt=hr(fr),ct=hr(!1),Tr=fr;function an(e,t){var i=e.type.contextTypes;if(!i)return fr;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var u={},h;for(h in i)u[h]=t[h];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=u),u}function dt(e){return e=e.childContextTypes,e!=null}function ti(){Pe(ct),Pe(rt)}function Uu(e,t,i){if(rt.current!==fr)throw Error(n(168));Ne(rt,t),Ne(ct,i)}function Mu(e,t,i){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return i;a=a.getChildContext();for(var u in a)if(!(u in t))throw Error(n(108,Q(e)||"Unknown",u));return E({},i,a)}function ri(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||fr,Tr=rt.current,Ne(rt,e),Ne(ct,ct.current),!0}function Fu(e,t,i){var a=e.stateNode;if(!a)throw Error(n(169));i?(e=Mu(e,t,Tr),a.__reactInternalMemoizedMergedChildContext=e,Pe(ct),Pe(rt),Ne(rt,e)):Pe(ct),Ne(ct,i)}var Gt=null,ni=!1,Vo=!1;function zu(e){Gt===null?Gt=[e]:Gt.push(e)}function Kf(e){ni=!0,zu(e)}function pr(){if(!Vo&&Gt!==null){Vo=!0;var e=0,t=Ee;try{var i=Gt;for(Ee=1;e<i.length;e++){var a=i[e];do a=a(!0);while(a!==null)}Gt=null,ni=!1}catch(u){throw Gt!==null&&(Gt=Gt.slice(e+1)),Vl(co,pr),u}finally{Ee=t,Vo=!1}}return null}var ln=[],un=0,si=null,ii=0,St=[],kt=0,Cr=null,Jt=1,Qt="";function Pr(e,t){ln[un++]=ii,ln[un++]=si,si=e,ii=t}function Bu(e,t,i){St[kt++]=Jt,St[kt++]=Qt,St[kt++]=Cr,Cr=e;var a=Jt;e=Qt;var u=32-Pt(a)-1;a&=~(1<<u),i+=1;var h=32-Pt(t)+u;if(30<h){var m=u-u%5;h=(a&(1<<m)-1).toString(32),a>>=m,u-=m,Jt=1<<32-Pt(t)+u|i<<u|a,Qt=h+e}else Jt=1<<h|i<<u|a,Qt=e}function qo(e){e.return!==null&&(Pr(e,1),Bu(e,1,0))}function Wo(e){for(;e===si;)si=ln[--un],ln[un]=null,ii=ln[--un],ln[un]=null;for(;e===Cr;)Cr=St[--kt],St[kt]=null,Qt=St[--kt],St[kt]=null,Jt=St[--kt],St[kt]=null}var yt=null,vt=null,Oe=!1,At=null;function Vu(e,t){var i=Tt(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function qu(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,yt=e,vt=dr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,yt=e,vt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=Cr!==null?{id:Jt,overflow:Qt}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=Tt(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,yt=e,vt=null,!0):!1;default:return!1}}function Ho(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ko(e){if(Oe){var t=vt;if(t){var i=t;if(!qu(e,t)){if(Ho(e))throw Error(n(418));t=dr(i.nextSibling);var a=yt;t&&qu(e,t)?Vu(a,i):(e.flags=e.flags&-4097|2,Oe=!1,yt=e)}}else{if(Ho(e))throw Error(n(418));e.flags=e.flags&-4097|2,Oe=!1,yt=e}}}function Wu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;yt=e}function oi(e){if(e!==yt)return!1;if(!Oe)return Wu(e),Oe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Uo(e.type,e.memoizedProps)),t&&(t=vt)){if(Ho(e))throw Hu(),Error(n(418));for(;t;)Vu(e,t),t=dr(t.nextSibling)}if(Wu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(n(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){vt=dr(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}vt=null}}else vt=yt?dr(e.stateNode.nextSibling):null;return!0}function Hu(){for(var e=vt;e;)e=dr(e.nextSibling)}function cn(){vt=yt=null,Oe=!1}function Go(e){At===null?At=[e]:At.push(e)}var Gf=U.ReactCurrentBatchConfig;function ss(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(n(309));var a=i.stateNode}if(!a)throw Error(n(147,e));var u=a,h=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===h?t.ref:(t=function(m){var w=u.refs;m===null?delete w[h]:w[h]=m},t._stringRef=h,t)}if(typeof e!="string")throw Error(n(284));if(!i._owner)throw Error(n(290,e))}return e}function ai(e,t){throw e=Object.prototype.toString.call(t),Error(n(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ku(e){var t=e._init;return t(e._payload)}function Gu(e){function t(C,S){if(e){var R=C.deletions;R===null?(C.deletions=[S],C.flags|=16):R.push(S)}}function i(C,S){if(!e)return null;for(;S!==null;)t(C,S),S=S.sibling;return null}function a(C,S){for(C=new Map;S!==null;)S.key!==null?C.set(S.key,S):C.set(S.index,S),S=S.sibling;return C}function u(C,S){return C=br(C,S),C.index=0,C.sibling=null,C}function h(C,S,R){return C.index=R,e?(R=C.alternate,R!==null?(R=R.index,R<S?(C.flags|=2,S):R):(C.flags|=2,S)):(C.flags|=1048576,S)}function m(C){return e&&C.alternate===null&&(C.flags|=2),C}function w(C,S,R,G){return S===null||S.tag!==6?(S=Ma(R,C.mode,G),S.return=C,S):(S=u(S,R),S.return=C,S)}function _(C,S,R,G){var ie=R.type;return ie===F?V(C,S,R.props.children,G,R.key):S!==null&&(S.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===Ae&&Ku(ie)===S.type)?(G=u(S,R.props),G.ref=ss(C,S,R),G.return=C,G):(G=Ri(R.type,R.key,R.props,null,C.mode,G),G.ref=ss(C,S,R),G.return=C,G)}function I(C,S,R,G){return S===null||S.tag!==4||S.stateNode.containerInfo!==R.containerInfo||S.stateNode.implementation!==R.implementation?(S=Fa(R,C.mode,G),S.return=C,S):(S=u(S,R.children||[]),S.return=C,S)}function V(C,S,R,G,ie){return S===null||S.tag!==7?(S=Ur(R,C.mode,G,ie),S.return=C,S):(S=u(S,R),S.return=C,S)}function W(C,S,R){if(typeof S=="string"&&S!==""||typeof S=="number")return S=Ma(""+S,C.mode,R),S.return=C,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case re:return R=Ri(S.type,S.key,S.props,null,C.mode,R),R.ref=ss(C,null,S),R.return=C,R;case J:return S=Fa(S,C.mode,R),S.return=C,S;case Ae:var G=S._init;return W(C,G(S._payload),R)}if(nr(S)||z(S))return S=Ur(S,C.mode,R,null),S.return=C,S;ai(C,S)}return null}function B(C,S,R,G){var ie=S!==null?S.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return ie!==null?null:w(C,S,""+R,G);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case re:return R.key===ie?_(C,S,R,G):null;case J:return R.key===ie?I(C,S,R,G):null;case Ae:return ie=R._init,B(C,S,ie(R._payload),G)}if(nr(R)||z(R))return ie!==null?null:V(C,S,R,G,null);ai(C,R)}return null}function Z(C,S,R,G,ie){if(typeof G=="string"&&G!==""||typeof G=="number")return C=C.get(R)||null,w(S,C,""+G,ie);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case re:return C=C.get(G.key===null?R:G.key)||null,_(S,C,G,ie);case J:return C=C.get(G.key===null?R:G.key)||null,I(S,C,G,ie);case Ae:var le=G._init;return Z(C,S,R,le(G._payload),ie)}if(nr(G)||z(G))return C=C.get(R)||null,V(S,C,G,ie,null);ai(S,G)}return null}function ne(C,S,R,G){for(var ie=null,le=null,ue=S,ge=S=0,Ye=null;ue!==null&&ge<R.length;ge++){ue.index>ge?(Ye=ue,ue=null):Ye=ue.sibling;var be=B(C,ue,R[ge],G);if(be===null){ue===null&&(ue=Ye);break}e&&ue&&be.alternate===null&&t(C,ue),S=h(be,S,ge),le===null?ie=be:le.sibling=be,le=be,ue=Ye}if(ge===R.length)return i(C,ue),Oe&&Pr(C,ge),ie;if(ue===null){for(;ge<R.length;ge++)ue=W(C,R[ge],G),ue!==null&&(S=h(ue,S,ge),le===null?ie=ue:le.sibling=ue,le=ue);return Oe&&Pr(C,ge),ie}for(ue=a(C,ue);ge<R.length;ge++)Ye=Z(ue,C,ge,R[ge],G),Ye!==null&&(e&&Ye.alternate!==null&&ue.delete(Ye.key===null?ge:Ye.key),S=h(Ye,S,ge),le===null?ie=Ye:le.sibling=Ye,le=Ye);return e&&ue.forEach(function(Sr){return t(C,Sr)}),Oe&&Pr(C,ge),ie}function se(C,S,R,G){var ie=z(R);if(typeof ie!="function")throw Error(n(150));if(R=ie.call(R),R==null)throw Error(n(151));for(var le=ie=null,ue=S,ge=S=0,Ye=null,be=R.next();ue!==null&&!be.done;ge++,be=R.next()){ue.index>ge?(Ye=ue,ue=null):Ye=ue.sibling;var Sr=B(C,ue,be.value,G);if(Sr===null){ue===null&&(ue=Ye);break}e&&ue&&Sr.alternate===null&&t(C,ue),S=h(Sr,S,ge),le===null?ie=Sr:le.sibling=Sr,le=Sr,ue=Ye}if(be.done)return i(C,ue),Oe&&Pr(C,ge),ie;if(ue===null){for(;!be.done;ge++,be=R.next())be=W(C,be.value,G),be!==null&&(S=h(be,S,ge),le===null?ie=be:le.sibling=be,le=be);return Oe&&Pr(C,ge),ie}for(ue=a(C,ue);!be.done;ge++,be=R.next())be=Z(ue,C,ge,be.value,G),be!==null&&(e&&be.alternate!==null&&ue.delete(be.key===null?ge:be.key),S=h(be,S,ge),le===null?ie=be:le.sibling=be,le=be);return e&&ue.forEach(function(Np){return t(C,Np)}),Oe&&Pr(C,ge),ie}function Be(C,S,R,G){if(typeof R=="object"&&R!==null&&R.type===F&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case re:e:{for(var ie=R.key,le=S;le!==null;){if(le.key===ie){if(ie=R.type,ie===F){if(le.tag===7){i(C,le.sibling),S=u(le,R.props.children),S.return=C,C=S;break e}}else if(le.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===Ae&&Ku(ie)===le.type){i(C,le.sibling),S=u(le,R.props),S.ref=ss(C,le,R),S.return=C,C=S;break e}i(C,le);break}else t(C,le);le=le.sibling}R.type===F?(S=Ur(R.props.children,C.mode,G,R.key),S.return=C,C=S):(G=Ri(R.type,R.key,R.props,null,C.mode,G),G.ref=ss(C,S,R),G.return=C,C=G)}return m(C);case J:e:{for(le=R.key;S!==null;){if(S.key===le)if(S.tag===4&&S.stateNode.containerInfo===R.containerInfo&&S.stateNode.implementation===R.implementation){i(C,S.sibling),S=u(S,R.children||[]),S.return=C,C=S;break e}else{i(C,S);break}else t(C,S);S=S.sibling}S=Fa(R,C.mode,G),S.return=C,C=S}return m(C);case Ae:return le=R._init,Be(C,S,le(R._payload),G)}if(nr(R))return ne(C,S,R,G);if(z(R))return se(C,S,R,G);ai(C,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,S!==null&&S.tag===6?(i(C,S.sibling),S=u(S,R),S.return=C,C=S):(i(C,S),S=Ma(R,C.mode,G),S.return=C,C=S),m(C)):i(C,S)}return Be}var dn=Gu(!0),Ju=Gu(!1),li=hr(null),ui=null,hn=null,Jo=null;function Qo(){Jo=hn=ui=null}function Yo(e){var t=li.current;Pe(li),e._currentValue=t}function Xo(e,t,i){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===i)break;e=e.return}}function fn(e,t){ui=e,Jo=hn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(ht=!0),e.firstContext=null)}function jt(e){var t=e._currentValue;if(Jo!==e)if(e={context:e,memoizedValue:t,next:null},hn===null){if(ui===null)throw Error(n(308));hn=e,ui.dependencies={lanes:0,firstContext:e}}else hn=hn.next=e;return t}var Rr=null;function Zo(e){Rr===null?Rr=[e]:Rr.push(e)}function Qu(e,t,i,a){var u=t.interleaved;return u===null?(i.next=i,Zo(t)):(i.next=u.next,u.next=i),t.interleaved=i,Yt(e,a)}function Yt(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var gr=!1;function ea(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Xt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function mr(e,t,i){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(_e&2)!==0){var u=a.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),a.pending=t,Yt(e,i)}return u=a.interleaved,u===null?(t.next=t,Zo(a)):(t.next=u.next,u.next=t),a.interleaved=t,Yt(e,i)}function ci(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,po(e,i)}}function Xu(e,t){var i=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,i===a)){var u=null,h=null;if(i=i.firstBaseUpdate,i!==null){do{var m={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};h===null?u=h=m:h=h.next=m,i=i.next}while(i!==null);h===null?u=h=t:h=h.next=t}else u=h=t;i={baseState:a.baseState,firstBaseUpdate:u,lastBaseUpdate:h,shared:a.shared,effects:a.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function di(e,t,i,a){var u=e.updateQueue;gr=!1;var h=u.firstBaseUpdate,m=u.lastBaseUpdate,w=u.shared.pending;if(w!==null){u.shared.pending=null;var _=w,I=_.next;_.next=null,m===null?h=I:m.next=I,m=_;var V=e.alternate;V!==null&&(V=V.updateQueue,w=V.lastBaseUpdate,w!==m&&(w===null?V.firstBaseUpdate=I:w.next=I,V.lastBaseUpdate=_))}if(h!==null){var W=u.baseState;m=0,V=I=_=null,w=h;do{var B=w.lane,Z=w.eventTime;if((a&B)===B){V!==null&&(V=V.next={eventTime:Z,lane:0,tag:w.tag,payload:w.payload,callback:w.callback,next:null});e:{var ne=e,se=w;switch(B=t,Z=i,se.tag){case 1:if(ne=se.payload,typeof ne=="function"){W=ne.call(Z,W,B);break e}W=ne;break e;case 3:ne.flags=ne.flags&-65537|128;case 0:if(ne=se.payload,B=typeof ne=="function"?ne.call(Z,W,B):ne,B==null)break e;W=E({},W,B);break e;case 2:gr=!0}}w.callback!==null&&w.lane!==0&&(e.flags|=64,B=u.effects,B===null?u.effects=[w]:B.push(w))}else Z={eventTime:Z,lane:B,tag:w.tag,payload:w.payload,callback:w.callback,next:null},V===null?(I=V=Z,_=W):V=V.next=Z,m|=B;if(w=w.next,w===null){if(w=u.shared.pending,w===null)break;B=w,w=B.next,B.next=null,u.lastBaseUpdate=B,u.shared.pending=null}}while(!0);if(V===null&&(_=W),u.baseState=_,u.firstBaseUpdate=I,u.lastBaseUpdate=V,t=u.shared.interleaved,t!==null){u=t;do m|=u.lane,u=u.next;while(u!==t)}else h===null&&(u.shared.lanes=0);$r|=m,e.lanes=m,e.memoizedState=W}}function Zu(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],u=a.callback;if(u!==null){if(a.callback=null,a=i,typeof u!="function")throw Error(n(191,u));u.call(a)}}}var is={},Vt=hr(is),os=hr(is),as=hr(is);function Ar(e){if(e===is)throw Error(n(174));return e}function ta(e,t){switch(Ne(as,t),Ne(os,e),Ne(Vt,is),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:to(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=to(t,e)}Pe(Vt),Ne(Vt,t)}function pn(){Pe(Vt),Pe(os),Pe(as)}function ec(e){Ar(as.current);var t=Ar(Vt.current),i=to(t,e.type);t!==i&&(Ne(os,e),Ne(Vt,i))}function ra(e){os.current===e&&(Pe(Vt),Pe(os))}var Ie=hr(0);function hi(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function sa(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var fi=U.ReactCurrentDispatcher,ia=U.ReactCurrentBatchConfig,Or=0,De=null,He=null,Je=null,pi=!1,ls=!1,us=0,Jf=0;function nt(){throw Error(n(321))}function oa(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Rt(e[i],t[i]))return!1;return!0}function aa(e,t,i,a,u,h){if(Or=h,De=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fi.current=e===null||e.memoizedState===null?Zf:ep,e=i(a,u),ls){h=0;do{if(ls=!1,us=0,25<=h)throw Error(n(301));h+=1,Je=He=null,t.updateQueue=null,fi.current=tp,e=i(a,u)}while(ls)}if(fi.current=yi,t=He!==null&&He.next!==null,Or=0,Je=He=De=null,pi=!1,t)throw Error(n(300));return e}function la(){var e=us!==0;return us=0,e}function qt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?De.memoizedState=Je=e:Je=Je.next=e,Je}function Et(){if(He===null){var e=De.alternate;e=e!==null?e.memoizedState:null}else e=He.next;var t=Je===null?De.memoizedState:Je.next;if(t!==null)Je=t,He=e;else{if(e===null)throw Error(n(310));He=e,e={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Je===null?De.memoizedState=Je=e:Je=Je.next=e}return Je}function cs(e,t){return typeof t=="function"?t(e):t}function ua(e){var t=Et(),i=t.queue;if(i===null)throw Error(n(311));i.lastRenderedReducer=e;var a=He,u=a.baseQueue,h=i.pending;if(h!==null){if(u!==null){var m=u.next;u.next=h.next,h.next=m}a.baseQueue=u=h,i.pending=null}if(u!==null){h=u.next,a=a.baseState;var w=m=null,_=null,I=h;do{var V=I.lane;if((Or&V)===V)_!==null&&(_=_.next={lane:0,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null}),a=I.hasEagerState?I.eagerState:e(a,I.action);else{var W={lane:V,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null};_===null?(w=_=W,m=a):_=_.next=W,De.lanes|=V,$r|=V}I=I.next}while(I!==null&&I!==h);_===null?m=a:_.next=w,Rt(a,t.memoizedState)||(ht=!0),t.memoizedState=a,t.baseState=m,t.baseQueue=_,i.lastRenderedState=a}if(e=i.interleaved,e!==null){u=e;do h=u.lane,De.lanes|=h,$r|=h,u=u.next;while(u!==e)}else u===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function ca(e){var t=Et(),i=t.queue;if(i===null)throw Error(n(311));i.lastRenderedReducer=e;var a=i.dispatch,u=i.pending,h=t.memoizedState;if(u!==null){i.pending=null;var m=u=u.next;do h=e(h,m.action),m=m.next;while(m!==u);Rt(h,t.memoizedState)||(ht=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),i.lastRenderedState=h}return[h,a]}function tc(){}function rc(e,t){var i=De,a=Et(),u=t(),h=!Rt(a.memoizedState,u);if(h&&(a.memoizedState=u,ht=!0),a=a.queue,da(ic.bind(null,i,a,e),[e]),a.getSnapshot!==t||h||Je!==null&&Je.memoizedState.tag&1){if(i.flags|=2048,ds(9,sc.bind(null,i,a,u,t),void 0,null),Qe===null)throw Error(n(349));(Or&30)!==0||nc(i,t,u)}return u}function nc(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=De.updateQueue,t===null?(t={lastEffect:null,stores:null},De.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function sc(e,t,i,a){t.value=i,t.getSnapshot=a,oc(t)&&ac(e)}function ic(e,t,i){return i(function(){oc(t)&&ac(e)})}function oc(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Rt(e,i)}catch{return!0}}function ac(e){var t=Yt(e,1);t!==null&&Dt(t,e,1,-1)}function lc(e){var t=qt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:e},t.queue=e,e=e.dispatch=Xf.bind(null,De,e),[t.memoizedState,e]}function ds(e,t,i,a){return e={tag:e,create:t,destroy:i,deps:a,next:null},t=De.updateQueue,t===null?(t={lastEffect:null,stores:null},De.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(a=i.next,i.next=e,e.next=a,t.lastEffect=e)),e}function uc(){return Et().memoizedState}function gi(e,t,i,a){var u=qt();De.flags|=e,u.memoizedState=ds(1|t,i,void 0,a===void 0?null:a)}function mi(e,t,i,a){var u=Et();a=a===void 0?null:a;var h=void 0;if(He!==null){var m=He.memoizedState;if(h=m.destroy,a!==null&&oa(a,m.deps)){u.memoizedState=ds(t,i,h,a);return}}De.flags|=e,u.memoizedState=ds(1|t,i,h,a)}function cc(e,t){return gi(8390656,8,e,t)}function da(e,t){return mi(2048,8,e,t)}function dc(e,t){return mi(4,2,e,t)}function hc(e,t){return mi(4,4,e,t)}function fc(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function pc(e,t,i){return i=i!=null?i.concat([e]):null,mi(4,4,fc.bind(null,t,e),i)}function ha(){}function gc(e,t){var i=Et();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&oa(t,a[1])?a[0]:(i.memoizedState=[e,t],e)}function mc(e,t){var i=Et();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&oa(t,a[1])?a[0]:(e=e(),i.memoizedState=[e,t],e)}function yc(e,t,i){return(Or&21)===0?(e.baseState&&(e.baseState=!1,ht=!0),e.memoizedState=i):(Rt(i,t)||(i=Kl(),De.lanes|=i,$r|=i,e.baseState=!0),t)}function Qf(e,t){var i=Ee;Ee=i!==0&&4>i?i:4,e(!0);var a=ia.transition;ia.transition={};try{e(!1),t()}finally{Ee=i,ia.transition=a}}function vc(){return Et().memoizedState}function Yf(e,t,i){var a=xr(e);if(i={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null},wc(e))xc(t,i);else if(i=Qu(e,t,i,a),i!==null){var u=lt();Dt(i,e,a,u),_c(i,t,a)}}function Xf(e,t,i){var a=xr(e),u={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null};if(wc(e))xc(t,u);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var m=t.lastRenderedState,w=h(m,i);if(u.hasEagerState=!0,u.eagerState=w,Rt(w,m)){var _=t.interleaved;_===null?(u.next=u,Zo(t)):(u.next=_.next,_.next=u),t.interleaved=u;return}}catch{}finally{}i=Qu(e,t,u,a),i!==null&&(u=lt(),Dt(i,e,a,u),_c(i,t,a))}}function wc(e){var t=e.alternate;return e===De||t!==null&&t===De}function xc(e,t){ls=pi=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function _c(e,t,i){if((i&4194240)!==0){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,po(e,i)}}var yi={readContext:jt,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useInsertionEffect:nt,useLayoutEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useMutableSource:nt,useSyncExternalStore:nt,useId:nt,unstable_isNewReconciler:!1},Zf={readContext:jt,useCallback:function(e,t){return qt().memoizedState=[e,t===void 0?null:t],e},useContext:jt,useEffect:cc,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,gi(4194308,4,fc.bind(null,t,e),i)},useLayoutEffect:function(e,t){return gi(4194308,4,e,t)},useInsertionEffect:function(e,t){return gi(4,2,e,t)},useMemo:function(e,t){var i=qt();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var a=qt();return t=i!==void 0?i(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=Yf.bind(null,De,e),[a.memoizedState,e]},useRef:function(e){var t=qt();return e={current:e},t.memoizedState=e},useState:lc,useDebugValue:ha,useDeferredValue:function(e){return qt().memoizedState=e},useTransition:function(){var e=lc(!1),t=e[0];return e=Qf.bind(null,e[1]),qt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var a=De,u=qt();if(Oe){if(i===void 0)throw Error(n(407));i=i()}else{if(i=t(),Qe===null)throw Error(n(349));(Or&30)!==0||nc(a,t,i)}u.memoizedState=i;var h={value:i,getSnapshot:t};return u.queue=h,cc(ic.bind(null,a,h,e),[e]),a.flags|=2048,ds(9,sc.bind(null,a,h,i,t),void 0,null),i},useId:function(){var e=qt(),t=Qe.identifierPrefix;if(Oe){var i=Qt,a=Jt;i=(a&~(1<<32-Pt(a)-1)).toString(32)+i,t=":"+t+"R"+i,i=us++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=Jf++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ep={readContext:jt,useCallback:gc,useContext:jt,useEffect:da,useImperativeHandle:pc,useInsertionEffect:dc,useLayoutEffect:hc,useMemo:mc,useReducer:ua,useRef:uc,useState:function(){return ua(cs)},useDebugValue:ha,useDeferredValue:function(e){var t=Et();return yc(t,He.memoizedState,e)},useTransition:function(){var e=ua(cs)[0],t=Et().memoizedState;return[e,t]},useMutableSource:tc,useSyncExternalStore:rc,useId:vc,unstable_isNewReconciler:!1},tp={readContext:jt,useCallback:gc,useContext:jt,useEffect:da,useImperativeHandle:pc,useInsertionEffect:dc,useLayoutEffect:hc,useMemo:mc,useReducer:ca,useRef:uc,useState:function(){return ca(cs)},useDebugValue:ha,useDeferredValue:function(e){var t=Et();return He===null?t.memoizedState=e:yc(t,He.memoizedState,e)},useTransition:function(){var e=ca(cs)[0],t=Et().memoizedState;return[e,t]},useMutableSource:tc,useSyncExternalStore:rc,useId:vc,unstable_isNewReconciler:!1};function Ot(e,t){if(e&&e.defaultProps){t=E({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}function fa(e,t,i,a){t=e.memoizedState,i=i(a,t),i=i==null?t:E({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var vi={isMounted:function(e){return(e=e._reactInternals)?Er(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var a=lt(),u=xr(e),h=Xt(a,u);h.payload=t,i!=null&&(h.callback=i),t=mr(e,h,u),t!==null&&(Dt(t,e,u,a),ci(t,e,u))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var a=lt(),u=xr(e),h=Xt(a,u);h.tag=1,h.payload=t,i!=null&&(h.callback=i),t=mr(e,h,u),t!==null&&(Dt(t,e,u,a),ci(t,e,u))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=lt(),a=xr(e),u=Xt(i,a);u.tag=2,t!=null&&(u.callback=t),t=mr(e,u,a),t!==null&&(Dt(t,e,a,i),ci(t,e,a))}};function bc(e,t,i,a,u,h,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,h,m):t.prototype&&t.prototype.isPureReactComponent?!Yn(i,a)||!Yn(u,h):!0}function Sc(e,t,i){var a=!1,u=fr,h=t.contextType;return typeof h=="object"&&h!==null?h=jt(h):(u=dt(t)?Tr:rt.current,a=t.contextTypes,h=(a=a!=null)?an(e,u):fr),t=new t(i,h),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=vi,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=u,e.__reactInternalMemoizedMaskedChildContext=h),t}function kc(e,t,i,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,a),t.state!==e&&vi.enqueueReplaceState(t,t.state,null)}function pa(e,t,i,a){var u=e.stateNode;u.props=i,u.state=e.memoizedState,u.refs={},ea(e);var h=t.contextType;typeof h=="object"&&h!==null?u.context=jt(h):(h=dt(t)?Tr:rt.current,u.context=an(e,h)),u.state=e.memoizedState,h=t.getDerivedStateFromProps,typeof h=="function"&&(fa(e,t,h,i),u.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(t=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),t!==u.state&&vi.enqueueReplaceState(u,u.state,null),di(e,i,u,a),u.state=e.memoizedState),typeof u.componentDidMount=="function"&&(e.flags|=4194308)}function gn(e,t){try{var i="",a=t;do i+=H(a),a=a.return;while(a);var u=i}catch(h){u=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:t,stack:u,digest:null}}function ga(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function ma(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var rp=typeof WeakMap=="function"?WeakMap:Map;function jc(e,t,i){i=Xt(-1,i),i.tag=3,i.payload={element:null};var a=t.value;return i.callback=function(){ji||(ji=!0,Ra=a),ma(e,t)},i}function Ec(e,t,i){i=Xt(-1,i),i.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var u=t.value;i.payload=function(){return a(u)},i.callback=function(){ma(e,t)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(i.callback=function(){ma(e,t),typeof a!="function"&&(vr===null?vr=new Set([this]):vr.add(this));var m=t.stack;this.componentDidCatch(t.value,{componentStack:m!==null?m:""})}),i}function Nc(e,t,i){var a=e.pingCache;if(a===null){a=e.pingCache=new rp;var u=new Set;a.set(t,u)}else u=a.get(t),u===void 0&&(u=new Set,a.set(t,u));u.has(i)||(u.add(i),e=mp.bind(null,e,t,i),t.then(e,e))}function Tc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Cc(e,t,i,a,u){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=Xt(-1,1),t.tag=2,mr(i,t,1))),i.lanes|=1),e):(e.flags|=65536,e.lanes=u,e)}var np=U.ReactCurrentOwner,ht=!1;function at(e,t,i,a){t.child=e===null?Ju(t,null,i,a):dn(t,e.child,i,a)}function Pc(e,t,i,a,u){i=i.render;var h=t.ref;return fn(t,u),a=aa(e,t,i,a,h,u),i=la(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,Zt(e,t,u)):(Oe&&i&&qo(t),t.flags|=1,at(e,t,a,u),t.child)}function Rc(e,t,i,a,u){if(e===null){var h=i.type;return typeof h=="function"&&!Ua(h)&&h.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=h,Ac(e,t,h,a,u)):(e=Ri(i.type,null,a,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,(e.lanes&u)===0){var m=h.memoizedProps;if(i=i.compare,i=i!==null?i:Yn,i(m,a)&&e.ref===t.ref)return Zt(e,t,u)}return t.flags|=1,e=br(h,a),e.ref=t.ref,e.return=t,t.child=e}function Ac(e,t,i,a,u){if(e!==null){var h=e.memoizedProps;if(Yn(h,a)&&e.ref===t.ref)if(ht=!1,t.pendingProps=a=h,(e.lanes&u)!==0)(e.flags&131072)!==0&&(ht=!0);else return t.lanes=e.lanes,Zt(e,t,u)}return ya(e,t,i,a,u)}function Oc(e,t,i){var a=t.pendingProps,u=a.children,h=e!==null?e.memoizedState:null;if(a.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(yn,wt),wt|=i;else{if((i&1073741824)===0)return e=h!==null?h.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ne(yn,wt),wt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=h!==null?h.baseLanes:i,Ne(yn,wt),wt|=a}else h!==null?(a=h.baseLanes|i,t.memoizedState=null):a=i,Ne(yn,wt),wt|=a;return at(e,t,u,i),t.child}function $c(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function ya(e,t,i,a,u){var h=dt(i)?Tr:rt.current;return h=an(t,h),fn(t,u),i=aa(e,t,i,a,h,u),a=la(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,Zt(e,t,u)):(Oe&&a&&qo(t),t.flags|=1,at(e,t,i,u),t.child)}function Ic(e,t,i,a,u){if(dt(i)){var h=!0;ri(t)}else h=!1;if(fn(t,u),t.stateNode===null)xi(e,t),Sc(t,i,a),pa(t,i,a,u),a=!0;else if(e===null){var m=t.stateNode,w=t.memoizedProps;m.props=w;var _=m.context,I=i.contextType;typeof I=="object"&&I!==null?I=jt(I):(I=dt(i)?Tr:rt.current,I=an(t,I));var V=i.getDerivedStateFromProps,W=typeof V=="function"||typeof m.getSnapshotBeforeUpdate=="function";W||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w!==a||_!==I)&&kc(t,m,a,I),gr=!1;var B=t.memoizedState;m.state=B,di(t,a,m,u),_=t.memoizedState,w!==a||B!==_||ct.current||gr?(typeof V=="function"&&(fa(t,i,V,a),_=t.memoizedState),(w=gr||bc(t,i,w,a,B,_,I))?(W||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(t.flags|=4194308)):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=_),m.props=a,m.state=_,m.context=I,a=w):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{m=t.stateNode,Yu(e,t),w=t.memoizedProps,I=t.type===t.elementType?w:Ot(t.type,w),m.props=I,W=t.pendingProps,B=m.context,_=i.contextType,typeof _=="object"&&_!==null?_=jt(_):(_=dt(i)?Tr:rt.current,_=an(t,_));var Z=i.getDerivedStateFromProps;(V=typeof Z=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w!==W||B!==_)&&kc(t,m,a,_),gr=!1,B=t.memoizedState,m.state=B,di(t,a,m,u);var ne=t.memoizedState;w!==W||B!==ne||ct.current||gr?(typeof Z=="function"&&(fa(t,i,Z,a),ne=t.memoizedState),(I=gr||bc(t,i,I,a,B,ne,_)||!1)?(V||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(a,ne,_),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(a,ne,_)),typeof m.componentDidUpdate=="function"&&(t.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof m.componentDidUpdate!="function"||w===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||w===e.memoizedProps&&B===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=ne),m.props=a,m.state=ne,m.context=_,a=I):(typeof m.componentDidUpdate!="function"||w===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||w===e.memoizedProps&&B===e.memoizedState||(t.flags|=1024),a=!1)}return va(e,t,i,a,h,u)}function va(e,t,i,a,u,h){$c(e,t);var m=(t.flags&128)!==0;if(!a&&!m)return u&&Fu(t,i,!1),Zt(e,t,h);a=t.stateNode,np.current=t;var w=m&&typeof i.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&m?(t.child=dn(t,e.child,null,h),t.child=dn(t,null,w,h)):at(e,t,w,h),t.memoizedState=a.state,u&&Fu(t,i,!0),t.child}function Dc(e){var t=e.stateNode;t.pendingContext?Uu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Uu(e,t.context,!1),ta(e,t.containerInfo)}function Lc(e,t,i,a,u){return cn(),Go(u),t.flags|=256,at(e,t,i,a),t.child}var wa={dehydrated:null,treeContext:null,retryLane:0};function xa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uc(e,t,i){var a=t.pendingProps,u=Ie.current,h=!1,m=(t.flags&128)!==0,w;if((w=m)||(w=e!==null&&e.memoizedState===null?!1:(u&2)!==0),w?(h=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(u|=1),Ne(Ie,u&1),e===null)return Ko(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(m=a.children,e=a.fallback,h?(a=t.mode,h=t.child,m={mode:"hidden",children:m},(a&1)===0&&h!==null?(h.childLanes=0,h.pendingProps=m):h=Ai(m,a,0,null),e=Ur(e,a,i,null),h.return=t,e.return=t,h.sibling=e,t.child=h,t.child.memoizedState=xa(i),t.memoizedState=wa,e):_a(t,m));if(u=e.memoizedState,u!==null&&(w=u.dehydrated,w!==null))return sp(e,t,m,a,w,u,i);if(h){h=a.fallback,m=t.mode,u=e.child,w=u.sibling;var _={mode:"hidden",children:a.children};return(m&1)===0&&t.child!==u?(a=t.child,a.childLanes=0,a.pendingProps=_,t.deletions=null):(a=br(u,_),a.subtreeFlags=u.subtreeFlags&14680064),w!==null?h=br(w,h):(h=Ur(h,m,i,null),h.flags|=2),h.return=t,a.return=t,a.sibling=h,t.child=a,a=h,h=t.child,m=e.child.memoizedState,m=m===null?xa(i):{baseLanes:m.baseLanes|i,cachePool:null,transitions:m.transitions},h.memoizedState=m,h.childLanes=e.childLanes&~i,t.memoizedState=wa,a}return h=e.child,e=h.sibling,a=br(h,{mode:"visible",children:a.children}),(t.mode&1)===0&&(a.lanes=i),a.return=t,a.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=a,t.memoizedState=null,a}function _a(e,t){return t=Ai({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function wi(e,t,i,a){return a!==null&&Go(a),dn(t,e.child,null,i),e=_a(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function sp(e,t,i,a,u,h,m){if(i)return t.flags&256?(t.flags&=-257,a=ga(Error(n(422))),wi(e,t,m,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(h=a.fallback,u=t.mode,a=Ai({mode:"visible",children:a.children},u,0,null),h=Ur(h,u,m,null),h.flags|=2,a.return=t,h.return=t,a.sibling=h,t.child=a,(t.mode&1)!==0&&dn(t,e.child,null,m),t.child.memoizedState=xa(m),t.memoizedState=wa,h);if((t.mode&1)===0)return wi(e,t,m,null);if(u.data==="$!"){if(a=u.nextSibling&&u.nextSibling.dataset,a)var w=a.dgst;return a=w,h=Error(n(419)),a=ga(h,a,void 0),wi(e,t,m,a)}if(w=(m&e.childLanes)!==0,ht||w){if(a=Qe,a!==null){switch(m&-m){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}u=(u&(a.suspendedLanes|m))!==0?0:u,u!==0&&u!==h.retryLane&&(h.retryLane=u,Yt(e,u),Dt(a,e,u,-1))}return La(),a=ga(Error(n(421))),wi(e,t,m,a)}return u.data==="$?"?(t.flags|=128,t.child=e.child,t=yp.bind(null,e),u._reactRetry=t,null):(e=h.treeContext,vt=dr(u.nextSibling),yt=t,Oe=!0,At=null,e!==null&&(St[kt++]=Jt,St[kt++]=Qt,St[kt++]=Cr,Jt=e.id,Qt=e.overflow,Cr=t),t=_a(t,a.children),t.flags|=4096,t)}function Mc(e,t,i){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Xo(e.return,t,i)}function ba(e,t,i,a,u){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:i,tailMode:u}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=a,h.tail=i,h.tailMode=u)}function Fc(e,t,i){var a=t.pendingProps,u=a.revealOrder,h=a.tail;if(at(e,t,a.children,i),a=Ie.current,(a&2)!==0)a=a&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Mc(e,i,t);else if(e.tag===19)Mc(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Ne(Ie,a),(t.mode&1)===0)t.memoizedState=null;else switch(u){case"forwards":for(i=t.child,u=null;i!==null;)e=i.alternate,e!==null&&hi(e)===null&&(u=i),i=i.sibling;i=u,i===null?(u=t.child,t.child=null):(u=i.sibling,i.sibling=null),ba(t,!1,u,i,h);break;case"backwards":for(i=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&hi(e)===null){t.child=u;break}e=u.sibling,u.sibling=i,i=u,u=e}ba(t,!0,i,null,h);break;case"together":ba(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function xi(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Zt(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),$r|=t.lanes,(i&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(n(153));if(t.child!==null){for(e=t.child,i=br(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=br(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function ip(e,t,i){switch(t.tag){case 3:Dc(t),cn();break;case 5:ec(t);break;case 1:dt(t.type)&&ri(t);break;case 4:ta(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,u=t.memoizedProps.value;Ne(li,a._currentValue),a._currentValue=u;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(Ne(Ie,Ie.current&1),t.flags|=128,null):(i&t.child.childLanes)!==0?Uc(e,t,i):(Ne(Ie,Ie.current&1),e=Zt(e,t,i),e!==null?e.sibling:null);Ne(Ie,Ie.current&1);break;case 19:if(a=(i&t.childLanes)!==0,(e.flags&128)!==0){if(a)return Fc(e,t,i);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),Ne(Ie,Ie.current),a)break;return null;case 22:case 23:return t.lanes=0,Oc(e,t,i)}return Zt(e,t,i)}var zc,Sa,Bc,Vc;zc=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},Sa=function(){},Bc=function(e,t,i,a){var u=e.memoizedProps;if(u!==a){e=t.stateNode,Ar(Vt.current);var h=null;switch(i){case"input":u=$e(e,u),a=$e(e,a),h=[];break;case"select":u=E({},u,{value:void 0}),a=E({},a,{value:void 0}),h=[];break;case"textarea":u=ot(e,u),a=ot(e,a),h=[];break;default:typeof u.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Zs)}ro(i,a);var m;i=null;for(I in u)if(!a.hasOwnProperty(I)&&u.hasOwnProperty(I)&&u[I]!=null)if(I==="style"){var w=u[I];for(m in w)w.hasOwnProperty(m)&&(i||(i={}),i[m]="")}else I!=="dangerouslySetInnerHTML"&&I!=="children"&&I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(l.hasOwnProperty(I)?h||(h=[]):(h=h||[]).push(I,null));for(I in a){var _=a[I];if(w=u?.[I],a.hasOwnProperty(I)&&_!==w&&(_!=null||w!=null))if(I==="style")if(w){for(m in w)!w.hasOwnProperty(m)||_&&_.hasOwnProperty(m)||(i||(i={}),i[m]="");for(m in _)_.hasOwnProperty(m)&&w[m]!==_[m]&&(i||(i={}),i[m]=_[m])}else i||(h||(h=[]),h.push(I,i)),i=_;else I==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,w=w?w.__html:void 0,_!=null&&w!==_&&(h=h||[]).push(I,_)):I==="children"?typeof _!="string"&&typeof _!="number"||(h=h||[]).push(I,""+_):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&(l.hasOwnProperty(I)?(_!=null&&I==="onScroll"&&Ce("scroll",e),h||w===_||(h=[])):(h=h||[]).push(I,_))}i&&(h=h||[]).push("style",i);var I=h;(t.updateQueue=I)&&(t.flags|=4)}},Vc=function(e,t,i,a){i!==a&&(t.flags|=4)};function hs(e,t){if(!Oe)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function st(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,a=0;if(t)for(var u=e.child;u!==null;)i|=u.lanes|u.childLanes,a|=u.subtreeFlags&14680064,a|=u.flags&14680064,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)i|=u.lanes|u.childLanes,a|=u.subtreeFlags,a|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=a,e.childLanes=i,t}function op(e,t,i){var a=t.pendingProps;switch(Wo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(t),null;case 1:return dt(t.type)&&ti(),st(t),null;case 3:return a=t.stateNode,pn(),Pe(ct),Pe(rt),sa(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(oi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,At!==null&&($a(At),At=null))),Sa(e,t),st(t),null;case 5:ra(t);var u=Ar(as.current);if(i=t.type,e!==null&&t.stateNode!=null)Bc(e,t,i,a,u),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(n(166));return st(t),null}if(e=Ar(Vt.current),oi(t)){a=t.stateNode,i=t.type;var h=t.memoizedProps;switch(a[Bt]=t,a[rs]=h,e=(t.mode&1)!==0,i){case"dialog":Ce("cancel",a),Ce("close",a);break;case"iframe":case"object":case"embed":Ce("load",a);break;case"video":case"audio":for(u=0;u<Zn.length;u++)Ce(Zn[u],a);break;case"source":Ce("error",a);break;case"img":case"image":case"link":Ce("error",a),Ce("load",a);break;case"details":Ce("toggle",a);break;case"input":Rn(a,h),Ce("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!h.multiple},Ce("invalid",a);break;case"textarea":Ft(a,h),Ce("invalid",a)}ro(i,h),u=null;for(var m in h)if(h.hasOwnProperty(m)){var w=h[m];m==="children"?typeof w=="string"?a.textContent!==w&&(h.suppressHydrationWarning!==!0&&Xs(a.textContent,w,e),u=["children",w]):typeof w=="number"&&a.textContent!==""+w&&(h.suppressHydrationWarning!==!0&&Xs(a.textContent,w,e),u=["children",""+w]):l.hasOwnProperty(m)&&w!=null&&m==="onScroll"&&Ce("scroll",a)}switch(i){case"input":Ve(a),Gr(a,h,!0);break;case"textarea":Ve(a),Tl(a);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(a.onclick=Zs)}a=u,t.updateQueue=a,a!==null&&(t.flags|=4)}else{m=u.nodeType===9?u:u.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Cl(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=m.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=m.createElement(i,{is:a.is}):(e=m.createElement(i),i==="select"&&(m=e,a.multiple?m.multiple=!0:a.size&&(m.size=a.size))):e=m.createElementNS(e,i),e[Bt]=t,e[rs]=a,zc(e,t,!1,!1),t.stateNode=e;e:{switch(m=no(i,a),i){case"dialog":Ce("cancel",e),Ce("close",e),u=a;break;case"iframe":case"object":case"embed":Ce("load",e),u=a;break;case"video":case"audio":for(u=0;u<Zn.length;u++)Ce(Zn[u],e);u=a;break;case"source":Ce("error",e),u=a;break;case"img":case"image":case"link":Ce("error",e),Ce("load",e),u=a;break;case"details":Ce("toggle",e),u=a;break;case"input":Rn(e,a),u=$e(e,a),Ce("invalid",e);break;case"option":u=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},u=E({},a,{value:void 0}),Ce("invalid",e);break;case"textarea":Ft(e,a),u=ot(e,a),Ce("invalid",e);break;default:u=a}ro(i,u),w=u;for(h in w)if(w.hasOwnProperty(h)){var _=w[h];h==="style"?Al(e,_):h==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,_!=null&&Pl(e,_)):h==="children"?typeof _=="string"?(i!=="textarea"||_!=="")&&$n(e,_):typeof _=="number"&&$n(e,""+_):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(l.hasOwnProperty(h)?_!=null&&h==="onScroll"&&Ce("scroll",e):_!=null&&D(e,h,_,m))}switch(i){case"input":Ve(e),Gr(e,a,!1);break;case"textarea":Ve(e),Tl(e);break;case"option":a.value!=null&&e.setAttribute("value",""+he(a.value));break;case"select":e.multiple=!!a.multiple,h=a.value,h!=null?sr(e,!!a.multiple,h,!1):a.defaultValue!=null&&sr(e,!!a.multiple,a.defaultValue,!0);break;default:typeof u.onClick=="function"&&(e.onclick=Zs)}switch(i){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return st(t),null;case 6:if(e&&t.stateNode!=null)Vc(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(n(166));if(i=Ar(as.current),Ar(Vt.current),oi(t)){if(a=t.stateNode,i=t.memoizedProps,a[Bt]=t,(h=a.nodeValue!==i)&&(e=yt,e!==null))switch(e.tag){case 3:Xs(a.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Xs(a.nodeValue,i,(e.mode&1)!==0)}h&&(t.flags|=4)}else a=(i.nodeType===9?i:i.ownerDocument).createTextNode(a),a[Bt]=t,t.stateNode=a}return st(t),null;case 13:if(Pe(Ie),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Oe&&vt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Hu(),cn(),t.flags|=98560,h=!1;else if(h=oi(t),a!==null&&a.dehydrated!==null){if(e===null){if(!h)throw Error(n(318));if(h=t.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(n(317));h[Bt]=t}else cn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;st(t),h=!1}else At!==null&&($a(At),At=null),h=!0;if(!h)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=i,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Ie.current&1)!==0?Ke===0&&(Ke=3):La())),t.updateQueue!==null&&(t.flags|=4),st(t),null);case 4:return pn(),Sa(e,t),e===null&&es(t.stateNode.containerInfo),st(t),null;case 10:return Yo(t.type._context),st(t),null;case 17:return dt(t.type)&&ti(),st(t),null;case 19:if(Pe(Ie),h=t.memoizedState,h===null)return st(t),null;if(a=(t.flags&128)!==0,m=h.rendering,m===null)if(a)hs(h,!1);else{if(Ke!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(m=hi(e),m!==null){for(t.flags|=128,hs(h,!1),a=m.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=i,i=t.child;i!==null;)h=i,e=a,h.flags&=14680066,m=h.alternate,m===null?(h.childLanes=0,h.lanes=e,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=m.childLanes,h.lanes=m.lanes,h.child=m.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=m.memoizedProps,h.memoizedState=m.memoizedState,h.updateQueue=m.updateQueue,h.type=m.type,e=m.dependencies,h.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return Ne(Ie,Ie.current&1|2),t.child}e=e.sibling}h.tail!==null&&ze()>vn&&(t.flags|=128,a=!0,hs(h,!1),t.lanes=4194304)}else{if(!a)if(e=hi(m),e!==null){if(t.flags|=128,a=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),hs(h,!0),h.tail===null&&h.tailMode==="hidden"&&!m.alternate&&!Oe)return st(t),null}else 2*ze()-h.renderingStartTime>vn&&i!==1073741824&&(t.flags|=128,a=!0,hs(h,!1),t.lanes=4194304);h.isBackwards?(m.sibling=t.child,t.child=m):(i=h.last,i!==null?i.sibling=m:t.child=m,h.last=m)}return h.tail!==null?(t=h.tail,h.rendering=t,h.tail=t.sibling,h.renderingStartTime=ze(),t.sibling=null,i=Ie.current,Ne(Ie,a?i&1|2:i&1),t):(st(t),null);case 22:case 23:return Da(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&(t.mode&1)!==0?(wt&1073741824)!==0&&(st(t),t.subtreeFlags&6&&(t.flags|=8192)):st(t),null;case 24:return null;case 25:return null}throw Error(n(156,t.tag))}function ap(e,t){switch(Wo(t),t.tag){case 1:return dt(t.type)&&ti(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return pn(),Pe(ct),Pe(rt),sa(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return ra(t),null;case 13:if(Pe(Ie),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(n(340));cn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Pe(Ie),null;case 4:return pn(),null;case 10:return Yo(t.type._context),null;case 22:case 23:return Da(),null;case 24:return null;default:return null}}var _i=!1,it=!1,lp=typeof WeakSet=="function"?WeakSet:Set,te=null;function mn(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(a){Ue(e,t,a)}else i.current=null}function ka(e,t,i){try{i()}catch(a){Ue(e,t,a)}}var qc=!1;function up(e,t){if(Do=zs,e=bu(),To(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var a=i.getSelection&&i.getSelection();if(a&&a.rangeCount!==0){i=a.anchorNode;var u=a.anchorOffset,h=a.focusNode;a=a.focusOffset;try{i.nodeType,h.nodeType}catch{i=null;break e}var m=0,w=-1,_=-1,I=0,V=0,W=e,B=null;t:for(;;){for(var Z;W!==i||u!==0&&W.nodeType!==3||(w=m+u),W!==h||a!==0&&W.nodeType!==3||(_=m+a),W.nodeType===3&&(m+=W.nodeValue.length),(Z=W.firstChild)!==null;)B=W,W=Z;for(;;){if(W===e)break t;if(B===i&&++I===u&&(w=m),B===h&&++V===a&&(_=m),(Z=W.nextSibling)!==null)break;W=B,B=W.parentNode}W=Z}i=w===-1||_===-1?null:{start:w,end:_}}else i=null}i=i||{start:0,end:0}}else i=null;for(Lo={focusedElem:e,selectionRange:i},zs=!1,te=t;te!==null;)if(t=te,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,te=e;else for(;te!==null;){t=te;try{var ne=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(ne!==null){var se=ne.memoizedProps,Be=ne.memoizedState,C=t.stateNode,S=C.getSnapshotBeforeUpdate(t.elementType===t.type?se:Ot(t.type,se),Be);C.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var R=t.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(G){Ue(t,t.return,G)}if(e=t.sibling,e!==null){e.return=t.return,te=e;break}te=t.return}return ne=qc,qc=!1,ne}function fs(e,t,i){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&e)===e){var h=u.destroy;u.destroy=void 0,h!==void 0&&ka(t,i,h)}u=u.next}while(u!==a)}}function bi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var a=i.create;i.destroy=a()}i=i.next}while(i!==t)}}function ja(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function Wc(e){var t=e.alternate;t!==null&&(e.alternate=null,Wc(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Bt],delete t[rs],delete t[zo],delete t[Wf],delete t[Hf])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Hc(e){return e.tag===5||e.tag===3||e.tag===4}function Kc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Hc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ea(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Zs));else if(a!==4&&(e=e.child,e!==null))for(Ea(e,t,i),e=e.sibling;e!==null;)Ea(e,t,i),e=e.sibling}function Na(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Na(e,t,i),e=e.sibling;e!==null;)Na(e,t,i),e=e.sibling}var Xe=null,$t=!1;function yr(e,t,i){for(i=i.child;i!==null;)Gc(e,t,i),i=i.sibling}function Gc(e,t,i){if(zt&&typeof zt.onCommitFiberUnmount=="function")try{zt.onCommitFiberUnmount(Is,i)}catch{}switch(i.tag){case 5:it||mn(i,t);case 6:var a=Xe,u=$t;Xe=null,yr(e,t,i),Xe=a,$t=u,Xe!==null&&($t?(e=Xe,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):Xe.removeChild(i.stateNode));break;case 18:Xe!==null&&($t?(e=Xe,i=i.stateNode,e.nodeType===8?Fo(e.parentNode,i):e.nodeType===1&&Fo(e,i),Wn(e)):Fo(Xe,i.stateNode));break;case 4:a=Xe,u=$t,Xe=i.stateNode.containerInfo,$t=!0,yr(e,t,i),Xe=a,$t=u;break;case 0:case 11:case 14:case 15:if(!it&&(a=i.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){u=a=a.next;do{var h=u,m=h.destroy;h=h.tag,m!==void 0&&((h&2)!==0||(h&4)!==0)&&ka(i,t,m),u=u.next}while(u!==a)}yr(e,t,i);break;case 1:if(!it&&(mn(i,t),a=i.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=i.memoizedProps,a.state=i.memoizedState,a.componentWillUnmount()}catch(w){Ue(i,t,w)}yr(e,t,i);break;case 21:yr(e,t,i);break;case 22:i.mode&1?(it=(a=it)||i.memoizedState!==null,yr(e,t,i),it=a):yr(e,t,i);break;default:yr(e,t,i)}}function Jc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new lp),t.forEach(function(a){var u=vp.bind(null,e,a);i.has(a)||(i.add(a),a.then(u,u))})}}function It(e,t){var i=t.deletions;if(i!==null)for(var a=0;a<i.length;a++){var u=i[a];try{var h=e,m=t,w=m;e:for(;w!==null;){switch(w.tag){case 5:Xe=w.stateNode,$t=!1;break e;case 3:Xe=w.stateNode.containerInfo,$t=!0;break e;case 4:Xe=w.stateNode.containerInfo,$t=!0;break e}w=w.return}if(Xe===null)throw Error(n(160));Gc(h,m,u),Xe=null,$t=!1;var _=u.alternate;_!==null&&(_.return=null),u.return=null}catch(I){Ue(u,t,I)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Qc(t,e),t=t.sibling}function Qc(e,t){var i=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(It(t,e),Wt(e),a&4){try{fs(3,e,e.return),bi(3,e)}catch(se){Ue(e,e.return,se)}try{fs(5,e,e.return)}catch(se){Ue(e,e.return,se)}}break;case 1:It(t,e),Wt(e),a&512&&i!==null&&mn(i,i.return);break;case 5:if(It(t,e),Wt(e),a&512&&i!==null&&mn(i,i.return),e.flags&32){var u=e.stateNode;try{$n(u,"")}catch(se){Ue(e,e.return,se)}}if(a&4&&(u=e.stateNode,u!=null)){var h=e.memoizedProps,m=i!==null?i.memoizedProps:h,w=e.type,_=e.updateQueue;if(e.updateQueue=null,_!==null)try{w==="input"&&h.type==="radio"&&h.name!=null&&An(u,h),no(w,m);var I=no(w,h);for(m=0;m<_.length;m+=2){var V=_[m],W=_[m+1];V==="style"?Al(u,W):V==="dangerouslySetInnerHTML"?Pl(u,W):V==="children"?$n(u,W):D(u,V,W,I)}switch(w){case"input":Kr(u,h);break;case"textarea":Nl(u,h);break;case"select":var B=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!h.multiple;var Z=h.value;Z!=null?sr(u,!!h.multiple,Z,!1):B!==!!h.multiple&&(h.defaultValue!=null?sr(u,!!h.multiple,h.defaultValue,!0):sr(u,!!h.multiple,h.multiple?[]:"",!1))}u[rs]=h}catch(se){Ue(e,e.return,se)}}break;case 6:if(It(t,e),Wt(e),a&4){if(e.stateNode===null)throw Error(n(162));u=e.stateNode,h=e.memoizedProps;try{u.nodeValue=h}catch(se){Ue(e,e.return,se)}}break;case 3:if(It(t,e),Wt(e),a&4&&i!==null&&i.memoizedState.isDehydrated)try{Wn(t.containerInfo)}catch(se){Ue(e,e.return,se)}break;case 4:It(t,e),Wt(e);break;case 13:It(t,e),Wt(e),u=e.child,u.flags&8192&&(h=u.memoizedState!==null,u.stateNode.isHidden=h,!h||u.alternate!==null&&u.alternate.memoizedState!==null||(Pa=ze())),a&4&&Jc(e);break;case 22:if(V=i!==null&&i.memoizedState!==null,e.mode&1?(it=(I=it)||V,It(t,e),it=I):It(t,e),Wt(e),a&8192){if(I=e.memoizedState!==null,(e.stateNode.isHidden=I)&&!V&&(e.mode&1)!==0)for(te=e,V=e.child;V!==null;){for(W=te=V;te!==null;){switch(B=te,Z=B.child,B.tag){case 0:case 11:case 14:case 15:fs(4,B,B.return);break;case 1:mn(B,B.return);var ne=B.stateNode;if(typeof ne.componentWillUnmount=="function"){a=B,i=B.return;try{t=a,ne.props=t.memoizedProps,ne.state=t.memoizedState,ne.componentWillUnmount()}catch(se){Ue(a,i,se)}}break;case 5:mn(B,B.return);break;case 22:if(B.memoizedState!==null){Zc(W);continue}}Z!==null?(Z.return=B,te=Z):Zc(W)}V=V.sibling}e:for(V=null,W=e;;){if(W.tag===5){if(V===null){V=W;try{u=W.stateNode,I?(h=u.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(w=W.stateNode,_=W.memoizedProps.style,m=_!=null&&_.hasOwnProperty("display")?_.display:null,w.style.display=Rl("display",m))}catch(se){Ue(e,e.return,se)}}}else if(W.tag===6){if(V===null)try{W.stateNode.nodeValue=I?"":W.memoizedProps}catch(se){Ue(e,e.return,se)}}else if((W.tag!==22&&W.tag!==23||W.memoizedState===null||W===e)&&W.child!==null){W.child.return=W,W=W.child;continue}if(W===e)break e;for(;W.sibling===null;){if(W.return===null||W.return===e)break e;V===W&&(V=null),W=W.return}V===W&&(V=null),W.sibling.return=W.return,W=W.sibling}}break;case 19:It(t,e),Wt(e),a&4&&Jc(e);break;case 21:break;default:It(t,e),Wt(e)}}function Wt(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(Hc(i)){var a=i;break e}i=i.return}throw Error(n(160))}switch(a.tag){case 5:var u=a.stateNode;a.flags&32&&($n(u,""),a.flags&=-33);var h=Kc(e);Na(e,h,u);break;case 3:case 4:var m=a.stateNode.containerInfo,w=Kc(e);Ea(e,w,m);break;default:throw Error(n(161))}}catch(_){Ue(e,e.return,_)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function cp(e,t,i){te=e,Yc(e)}function Yc(e,t,i){for(var a=(e.mode&1)!==0;te!==null;){var u=te,h=u.child;if(u.tag===22&&a){var m=u.memoizedState!==null||_i;if(!m){var w=u.alternate,_=w!==null&&w.memoizedState!==null||it;w=_i;var I=it;if(_i=m,(it=_)&&!I)for(te=u;te!==null;)m=te,_=m.child,m.tag===22&&m.memoizedState!==null?ed(u):_!==null?(_.return=m,te=_):ed(u);for(;h!==null;)te=h,Yc(h),h=h.sibling;te=u,_i=w,it=I}Xc(e)}else(u.subtreeFlags&8772)!==0&&h!==null?(h.return=u,te=h):Xc(e)}}function Xc(e){for(;te!==null;){var t=te;if((t.flags&8772)!==0){var i=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:it||bi(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!it)if(i===null)a.componentDidMount();else{var u=t.elementType===t.type?i.memoizedProps:Ot(t.type,i.memoizedProps);a.componentDidUpdate(u,i.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var h=t.updateQueue;h!==null&&Zu(t,h,a);break;case 3:var m=t.updateQueue;if(m!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}Zu(t,m,i)}break;case 5:var w=t.stateNode;if(i===null&&t.flags&4){i=w;var _=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":_.autoFocus&&i.focus();break;case"img":_.src&&(i.src=_.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var I=t.alternate;if(I!==null){var V=I.memoizedState;if(V!==null){var W=V.dehydrated;W!==null&&Wn(W)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}it||t.flags&512&&ja(t)}catch(B){Ue(t,t.return,B)}}if(t===e){te=null;break}if(i=t.sibling,i!==null){i.return=t.return,te=i;break}te=t.return}}function Zc(e){for(;te!==null;){var t=te;if(t===e){te=null;break}var i=t.sibling;if(i!==null){i.return=t.return,te=i;break}te=t.return}}function ed(e){for(;te!==null;){var t=te;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{bi(4,t)}catch(_){Ue(t,i,_)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var u=t.return;try{a.componentDidMount()}catch(_){Ue(t,u,_)}}var h=t.return;try{ja(t)}catch(_){Ue(t,h,_)}break;case 5:var m=t.return;try{ja(t)}catch(_){Ue(t,m,_)}}}catch(_){Ue(t,t.return,_)}if(t===e){te=null;break}var w=t.sibling;if(w!==null){w.return=t.return,te=w;break}te=t.return}}var dp=Math.ceil,Si=U.ReactCurrentDispatcher,Ta=U.ReactCurrentOwner,Nt=U.ReactCurrentBatchConfig,_e=0,Qe=null,qe=null,Ze=0,wt=0,yn=hr(0),Ke=0,ps=null,$r=0,ki=0,Ca=0,gs=null,ft=null,Pa=0,vn=1/0,er=null,ji=!1,Ra=null,vr=null,Ei=!1,wr=null,Ni=0,ms=0,Aa=null,Ti=-1,Ci=0;function lt(){return(_e&6)!==0?ze():Ti!==-1?Ti:Ti=ze()}function xr(e){return(e.mode&1)===0?1:(_e&2)!==0&&Ze!==0?Ze&-Ze:Gf.transition!==null?(Ci===0&&(Ci=Kl()),Ci):(e=Ee,e!==0||(e=window.event,e=e===void 0?16:ru(e.type)),e)}function Dt(e,t,i,a){if(50<ms)throw ms=0,Aa=null,Error(n(185));Fn(e,i,a),((_e&2)===0||e!==Qe)&&(e===Qe&&((_e&2)===0&&(ki|=i),Ke===4&&_r(e,Ze)),pt(e,a),i===1&&_e===0&&(t.mode&1)===0&&(vn=ze()+500,ni&&pr()))}function pt(e,t){var i=e.callbackNode;Kh(e,t);var a=Us(e,e===Qe?Ze:0);if(a===0)i!==null&&ql(i),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(i!=null&&ql(i),t===1)e.tag===0?Kf(rd.bind(null,e)):zu(rd.bind(null,e)),Vf(function(){(_e&6)===0&&pr()}),i=null;else{switch(Gl(a)){case 1:i=co;break;case 4:i=Wl;break;case 16:i=$s;break;case 536870912:i=Hl;break;default:i=$s}i=cd(i,td.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function td(e,t){if(Ti=-1,Ci=0,(_e&6)!==0)throw Error(n(327));var i=e.callbackNode;if(wn()&&e.callbackNode!==i)return null;var a=Us(e,e===Qe?Ze:0);if(a===0)return null;if((a&30)!==0||(a&e.expiredLanes)!==0||t)t=Pi(e,a);else{t=a;var u=_e;_e|=2;var h=sd();(Qe!==e||Ze!==t)&&(er=null,vn=ze()+500,Dr(e,t));do try{pp();break}catch(w){nd(e,w)}while(!0);Qo(),Si.current=h,_e=u,qe!==null?t=0:(Qe=null,Ze=0,t=Ke)}if(t!==0){if(t===2&&(u=ho(e),u!==0&&(a=u,t=Oa(e,u))),t===1)throw i=ps,Dr(e,0),_r(e,a),pt(e,ze()),i;if(t===6)_r(e,a);else{if(u=e.current.alternate,(a&30)===0&&!hp(u)&&(t=Pi(e,a),t===2&&(h=ho(e),h!==0&&(a=h,t=Oa(e,h))),t===1))throw i=ps,Dr(e,0),_r(e,a),pt(e,ze()),i;switch(e.finishedWork=u,e.finishedLanes=a,t){case 0:case 1:throw Error(n(345));case 2:Lr(e,ft,er);break;case 3:if(_r(e,a),(a&130023424)===a&&(t=Pa+500-ze(),10<t)){if(Us(e,0)!==0)break;if(u=e.suspendedLanes,(u&a)!==a){lt(),e.pingedLanes|=e.suspendedLanes&u;break}e.timeoutHandle=Mo(Lr.bind(null,e,ft,er),t);break}Lr(e,ft,er);break;case 4:if(_r(e,a),(a&4194240)===a)break;for(t=e.eventTimes,u=-1;0<a;){var m=31-Pt(a);h=1<<m,m=t[m],m>u&&(u=m),a&=~h}if(a=u,a=ze()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*dp(a/1960))-a,10<a){e.timeoutHandle=Mo(Lr.bind(null,e,ft,er),a);break}Lr(e,ft,er);break;case 5:Lr(e,ft,er);break;default:throw Error(n(329))}}}return pt(e,ze()),e.callbackNode===i?td.bind(null,e):null}function Oa(e,t){var i=gs;return e.current.memoizedState.isDehydrated&&(Dr(e,t).flags|=256),e=Pi(e,t),e!==2&&(t=ft,ft=i,t!==null&&$a(t)),e}function $a(e){ft===null?ft=e:ft.push.apply(ft,e)}function hp(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var a=0;a<i.length;a++){var u=i[a],h=u.getSnapshot;u=u.value;try{if(!Rt(h(),u))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function _r(e,t){for(t&=~Ca,t&=~ki,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-Pt(t),a=1<<i;e[i]=-1,t&=~a}}function rd(e){if((_e&6)!==0)throw Error(n(327));wn();var t=Us(e,0);if((t&1)===0)return pt(e,ze()),null;var i=Pi(e,t);if(e.tag!==0&&i===2){var a=ho(e);a!==0&&(t=a,i=Oa(e,a))}if(i===1)throw i=ps,Dr(e,0),_r(e,t),pt(e,ze()),i;if(i===6)throw Error(n(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Lr(e,ft,er),pt(e,ze()),null}function Ia(e,t){var i=_e;_e|=1;try{return e(t)}finally{_e=i,_e===0&&(vn=ze()+500,ni&&pr())}}function Ir(e){wr!==null&&wr.tag===0&&(_e&6)===0&&wn();var t=_e;_e|=1;var i=Nt.transition,a=Ee;try{if(Nt.transition=null,Ee=1,e)return e()}finally{Ee=a,Nt.transition=i,_e=t,(_e&6)===0&&pr()}}function Da(){wt=yn.current,Pe(yn)}function Dr(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,Bf(i)),qe!==null)for(i=qe.return;i!==null;){var a=i;switch(Wo(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&ti();break;case 3:pn(),Pe(ct),Pe(rt),sa();break;case 5:ra(a);break;case 4:pn();break;case 13:Pe(Ie);break;case 19:Pe(Ie);break;case 10:Yo(a.type._context);break;case 22:case 23:Da()}i=i.return}if(Qe=e,qe=e=br(e.current,null),Ze=wt=t,Ke=0,ps=null,Ca=ki=$r=0,ft=gs=null,Rr!==null){for(t=0;t<Rr.length;t++)if(i=Rr[t],a=i.interleaved,a!==null){i.interleaved=null;var u=a.next,h=i.pending;if(h!==null){var m=h.next;h.next=u,a.next=m}i.pending=a}Rr=null}return e}function nd(e,t){do{var i=qe;try{if(Qo(),fi.current=yi,pi){for(var a=De.memoizedState;a!==null;){var u=a.queue;u!==null&&(u.pending=null),a=a.next}pi=!1}if(Or=0,Je=He=De=null,ls=!1,us=0,Ta.current=null,i===null||i.return===null){Ke=1,ps=t,qe=null;break}e:{var h=e,m=i.return,w=i,_=t;if(t=Ze,w.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){var I=_,V=w,W=V.tag;if((V.mode&1)===0&&(W===0||W===11||W===15)){var B=V.alternate;B?(V.updateQueue=B.updateQueue,V.memoizedState=B.memoizedState,V.lanes=B.lanes):(V.updateQueue=null,V.memoizedState=null)}var Z=Tc(m);if(Z!==null){Z.flags&=-257,Cc(Z,m,w,h,t),Z.mode&1&&Nc(h,I,t),t=Z,_=I;var ne=t.updateQueue;if(ne===null){var se=new Set;se.add(_),t.updateQueue=se}else ne.add(_);break e}else{if((t&1)===0){Nc(h,I,t),La();break e}_=Error(n(426))}}else if(Oe&&w.mode&1){var Be=Tc(m);if(Be!==null){(Be.flags&65536)===0&&(Be.flags|=256),Cc(Be,m,w,h,t),Go(gn(_,w));break e}}h=_=gn(_,w),Ke!==4&&(Ke=2),gs===null?gs=[h]:gs.push(h),h=m;do{switch(h.tag){case 3:h.flags|=65536,t&=-t,h.lanes|=t;var C=jc(h,_,t);Xu(h,C);break e;case 1:w=_;var S=h.type,R=h.stateNode;if((h.flags&128)===0&&(typeof S.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(vr===null||!vr.has(R)))){h.flags|=65536,t&=-t,h.lanes|=t;var G=Ec(h,w,t);Xu(h,G);break e}}h=h.return}while(h!==null)}od(i)}catch(ie){t=ie,qe===i&&i!==null&&(qe=i=i.return);continue}break}while(!0)}function sd(){var e=Si.current;return Si.current=yi,e===null?yi:e}function La(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),Qe===null||($r&268435455)===0&&(ki&268435455)===0||_r(Qe,Ze)}function Pi(e,t){var i=_e;_e|=2;var a=sd();(Qe!==e||Ze!==t)&&(er=null,Dr(e,t));do try{fp();break}catch(u){nd(e,u)}while(!0);if(Qo(),_e=i,Si.current=a,qe!==null)throw Error(n(261));return Qe=null,Ze=0,Ke}function fp(){for(;qe!==null;)id(qe)}function pp(){for(;qe!==null&&!Uh();)id(qe)}function id(e){var t=ud(e.alternate,e,wt);e.memoizedProps=e.pendingProps,t===null?od(e):qe=t,Ta.current=null}function od(e){var t=e;do{var i=t.alternate;if(e=t.return,(t.flags&32768)===0){if(i=op(i,t,wt),i!==null){qe=i;return}}else{if(i=ap(i,t),i!==null){i.flags&=32767,qe=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ke=6,qe=null;return}}if(t=t.sibling,t!==null){qe=t;return}qe=t=e}while(t!==null);Ke===0&&(Ke=5)}function Lr(e,t,i){var a=Ee,u=Nt.transition;try{Nt.transition=null,Ee=1,gp(e,t,i,a)}finally{Nt.transition=u,Ee=a}return null}function gp(e,t,i,a){do wn();while(wr!==null);if((_e&6)!==0)throw Error(n(327));i=e.finishedWork;var u=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(n(177));e.callbackNode=null,e.callbackPriority=0;var h=i.lanes|i.childLanes;if(Gh(e,h),e===Qe&&(qe=Qe=null,Ze=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||Ei||(Ei=!0,cd($s,function(){return wn(),null})),h=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||h){h=Nt.transition,Nt.transition=null;var m=Ee;Ee=1;var w=_e;_e|=4,Ta.current=null,up(e,i),Qc(i,e),If(Lo),zs=!!Do,Lo=Do=null,e.current=i,cp(i),Mh(),_e=w,Ee=m,Nt.transition=h}else e.current=i;if(Ei&&(Ei=!1,wr=e,Ni=u),h=e.pendingLanes,h===0&&(vr=null),Bh(i.stateNode),pt(e,ze()),t!==null)for(a=e.onRecoverableError,i=0;i<t.length;i++)u=t[i],a(u.value,{componentStack:u.stack,digest:u.digest});if(ji)throw ji=!1,e=Ra,Ra=null,e;return(Ni&1)!==0&&e.tag!==0&&wn(),h=e.pendingLanes,(h&1)!==0?e===Aa?ms++:(ms=0,Aa=e):ms=0,pr(),null}function wn(){if(wr!==null){var e=Gl(Ni),t=Nt.transition,i=Ee;try{if(Nt.transition=null,Ee=16>e?16:e,wr===null)var a=!1;else{if(e=wr,wr=null,Ni=0,(_e&6)!==0)throw Error(n(331));var u=_e;for(_e|=4,te=e.current;te!==null;){var h=te,m=h.child;if((te.flags&16)!==0){var w=h.deletions;if(w!==null){for(var _=0;_<w.length;_++){var I=w[_];for(te=I;te!==null;){var V=te;switch(V.tag){case 0:case 11:case 15:fs(8,V,h)}var W=V.child;if(W!==null)W.return=V,te=W;else for(;te!==null;){V=te;var B=V.sibling,Z=V.return;if(Wc(V),V===I){te=null;break}if(B!==null){B.return=Z,te=B;break}te=Z}}}var ne=h.alternate;if(ne!==null){var se=ne.child;if(se!==null){ne.child=null;do{var Be=se.sibling;se.sibling=null,se=Be}while(se!==null)}}te=h}}if((h.subtreeFlags&2064)!==0&&m!==null)m.return=h,te=m;else e:for(;te!==null;){if(h=te,(h.flags&2048)!==0)switch(h.tag){case 0:case 11:case 15:fs(9,h,h.return)}var C=h.sibling;if(C!==null){C.return=h.return,te=C;break e}te=h.return}}var S=e.current;for(te=S;te!==null;){m=te;var R=m.child;if((m.subtreeFlags&2064)!==0&&R!==null)R.return=m,te=R;else e:for(m=S;te!==null;){if(w=te,(w.flags&2048)!==0)try{switch(w.tag){case 0:case 11:case 15:bi(9,w)}}catch(ie){Ue(w,w.return,ie)}if(w===m){te=null;break e}var G=w.sibling;if(G!==null){G.return=w.return,te=G;break e}te=w.return}}if(_e=u,pr(),zt&&typeof zt.onPostCommitFiberRoot=="function")try{zt.onPostCommitFiberRoot(Is,e)}catch{}a=!0}return a}finally{Ee=i,Nt.transition=t}}return!1}function ad(e,t,i){t=gn(i,t),t=jc(e,t,1),e=mr(e,t,1),t=lt(),e!==null&&(Fn(e,1,t),pt(e,t))}function Ue(e,t,i){if(e.tag===3)ad(e,e,i);else for(;t!==null;){if(t.tag===3){ad(t,e,i);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(vr===null||!vr.has(a))){e=gn(i,e),e=Ec(t,e,1),t=mr(t,e,1),e=lt(),t!==null&&(Fn(t,1,e),pt(t,e));break}}t=t.return}}function mp(e,t,i){var a=e.pingCache;a!==null&&a.delete(t),t=lt(),e.pingedLanes|=e.suspendedLanes&i,Qe===e&&(Ze&i)===i&&(Ke===4||Ke===3&&(Ze&130023424)===Ze&&500>ze()-Pa?Dr(e,0):Ca|=i),pt(e,t)}function ld(e,t){t===0&&((e.mode&1)===0?t=1:(t=Ls,Ls<<=1,(Ls&130023424)===0&&(Ls=4194304)));var i=lt();e=Yt(e,t),e!==null&&(Fn(e,t,i),pt(e,i))}function yp(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),ld(e,i)}function vp(e,t){var i=0;switch(e.tag){case 13:var a=e.stateNode,u=e.memoizedState;u!==null&&(i=u.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(n(314))}a!==null&&a.delete(t),ld(e,i)}var ud;ud=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||ct.current)ht=!0;else{if((e.lanes&i)===0&&(t.flags&128)===0)return ht=!1,ip(e,t,i);ht=(e.flags&131072)!==0}else ht=!1,Oe&&(t.flags&1048576)!==0&&Bu(t,ii,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;xi(e,t),e=t.pendingProps;var u=an(t,rt.current);fn(t,i),u=aa(null,t,a,e,u,i);var h=la();return t.flags|=1,typeof u=="object"&&u!==null&&typeof u.render=="function"&&u.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,dt(a)?(h=!0,ri(t)):h=!1,t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,ea(t),u.updater=vi,t.stateNode=u,u._reactInternals=t,pa(t,a,e,i),t=va(null,t,a,!0,h,i)):(t.tag=0,Oe&&h&&qo(t),at(null,t,u,i),t=t.child),t;case 16:a=t.elementType;e:{switch(xi(e,t),e=t.pendingProps,u=a._init,a=u(a._payload),t.type=a,u=t.tag=xp(a),e=Ot(a,e),u){case 0:t=ya(null,t,a,e,i);break e;case 1:t=Ic(null,t,a,e,i);break e;case 11:t=Pc(null,t,a,e,i);break e;case 14:t=Rc(null,t,a,Ot(a.type,e),i);break e}throw Error(n(306,a,""))}return t;case 0:return a=t.type,u=t.pendingProps,u=t.elementType===a?u:Ot(a,u),ya(e,t,a,u,i);case 1:return a=t.type,u=t.pendingProps,u=t.elementType===a?u:Ot(a,u),Ic(e,t,a,u,i);case 3:e:{if(Dc(t),e===null)throw Error(n(387));a=t.pendingProps,h=t.memoizedState,u=h.element,Yu(e,t),di(t,a,null,i);var m=t.memoizedState;if(a=m.element,h.isDehydrated)if(h={element:a,isDehydrated:!1,cache:m.cache,pendingSuspenseBoundaries:m.pendingSuspenseBoundaries,transitions:m.transitions},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){u=gn(Error(n(423)),t),t=Lc(e,t,a,i,u);break e}else if(a!==u){u=gn(Error(n(424)),t),t=Lc(e,t,a,i,u);break e}else for(vt=dr(t.stateNode.containerInfo.firstChild),yt=t,Oe=!0,At=null,i=Ju(t,null,a,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(cn(),a===u){t=Zt(e,t,i);break e}at(e,t,a,i)}t=t.child}return t;case 5:return ec(t),e===null&&Ko(t),a=t.type,u=t.pendingProps,h=e!==null?e.memoizedProps:null,m=u.children,Uo(a,u)?m=null:h!==null&&Uo(a,h)&&(t.flags|=32),$c(e,t),at(e,t,m,i),t.child;case 6:return e===null&&Ko(t),null;case 13:return Uc(e,t,i);case 4:return ta(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=dn(t,null,a,i):at(e,t,a,i),t.child;case 11:return a=t.type,u=t.pendingProps,u=t.elementType===a?u:Ot(a,u),Pc(e,t,a,u,i);case 7:return at(e,t,t.pendingProps,i),t.child;case 8:return at(e,t,t.pendingProps.children,i),t.child;case 12:return at(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(a=t.type._context,u=t.pendingProps,h=t.memoizedProps,m=u.value,Ne(li,a._currentValue),a._currentValue=m,h!==null)if(Rt(h.value,m)){if(h.children===u.children&&!ct.current){t=Zt(e,t,i);break e}}else for(h=t.child,h!==null&&(h.return=t);h!==null;){var w=h.dependencies;if(w!==null){m=h.child;for(var _=w.firstContext;_!==null;){if(_.context===a){if(h.tag===1){_=Xt(-1,i&-i),_.tag=2;var I=h.updateQueue;if(I!==null){I=I.shared;var V=I.pending;V===null?_.next=_:(_.next=V.next,V.next=_),I.pending=_}}h.lanes|=i,_=h.alternate,_!==null&&(_.lanes|=i),Xo(h.return,i,t),w.lanes|=i;break}_=_.next}}else if(h.tag===10)m=h.type===t.type?null:h.child;else if(h.tag===18){if(m=h.return,m===null)throw Error(n(341));m.lanes|=i,w=m.alternate,w!==null&&(w.lanes|=i),Xo(m,i,t),m=h.sibling}else m=h.child;if(m!==null)m.return=h;else for(m=h;m!==null;){if(m===t){m=null;break}if(h=m.sibling,h!==null){h.return=m.return,m=h;break}m=m.return}h=m}at(e,t,u.children,i),t=t.child}return t;case 9:return u=t.type,a=t.pendingProps.children,fn(t,i),u=jt(u),a=a(u),t.flags|=1,at(e,t,a,i),t.child;case 14:return a=t.type,u=Ot(a,t.pendingProps),u=Ot(a.type,u),Rc(e,t,a,u,i);case 15:return Ac(e,t,t.type,t.pendingProps,i);case 17:return a=t.type,u=t.pendingProps,u=t.elementType===a?u:Ot(a,u),xi(e,t),t.tag=1,dt(a)?(e=!0,ri(t)):e=!1,fn(t,i),Sc(t,a,u),pa(t,a,u,i),va(null,t,a,!0,e,i);case 19:return Fc(e,t,i);case 22:return Oc(e,t,i)}throw Error(n(156,t.tag))};function cd(e,t){return Vl(e,t)}function wp(e,t,i,a){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tt(e,t,i,a){return new wp(e,t,i,a)}function Ua(e){return e=e.prototype,!(!e||!e.isReactComponent)}function xp(e){if(typeof e=="function")return Ua(e)?1:0;if(e!=null){if(e=e.$$typeof,e===je)return 11;if(e===me)return 14}return 2}function br(e,t){var i=e.alternate;return i===null?(i=Tt(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Ri(e,t,i,a,u,h){var m=2;if(a=e,typeof e=="function")Ua(e)&&(m=1);else if(typeof e=="string")m=5;else e:switch(e){case F:return Ur(i.children,u,h,t);case fe:m=8,u|=8;break;case ye:return e=Tt(12,i,t,u|2),e.elementType=ye,e.lanes=h,e;case k:return e=Tt(13,i,t,u),e.elementType=k,e.lanes=h,e;case Y:return e=Tt(19,i,t,u),e.elementType=Y,e.lanes=h,e;case xe:return Ai(i,u,h,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Se:m=10;break e;case Re:m=9;break e;case je:m=11;break e;case me:m=14;break e;case Ae:m=16,a=null;break e}throw Error(n(130,e==null?e:typeof e,""))}return t=Tt(m,i,t,u),t.elementType=e,t.type=a,t.lanes=h,t}function Ur(e,t,i,a){return e=Tt(7,e,a,t),e.lanes=i,e}function Ai(e,t,i,a){return e=Tt(22,e,a,t),e.elementType=xe,e.lanes=i,e.stateNode={isHidden:!1},e}function Ma(e,t,i){return e=Tt(6,e,null,t),e.lanes=i,e}function Fa(e,t,i){return t=Tt(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function _p(e,t,i,a,u){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fo(0),this.expirationTimes=fo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fo(0),this.identifierPrefix=a,this.onRecoverableError=u,this.mutableSourceEagerHydrationData=null}function za(e,t,i,a,u,h,m,w,_){return e=new _p(e,t,i,w,_),t===1?(t=1,h===!0&&(t|=8)):t=0,h=Tt(3,null,null,t),e.current=h,h.stateNode=e,h.memoizedState={element:a,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},ea(h),e}function bp(e,t,i){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:J,key:a==null?null:""+a,children:e,containerInfo:t,implementation:i}}function dd(e){if(!e)return fr;e=e._reactInternals;e:{if(Er(e)!==e||e.tag!==1)throw Error(n(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(dt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(n(171))}if(e.tag===1){var i=e.type;if(dt(i))return Mu(e,i,t)}return t}function hd(e,t,i,a,u,h,m,w,_){return e=za(i,a,!0,e,u,h,m,w,_),e.context=dd(null),i=e.current,a=lt(),u=xr(i),h=Xt(a,u),h.callback=t??null,mr(i,h,u),e.current.lanes=u,Fn(e,u,a),pt(e,a),e}function Oi(e,t,i,a){var u=t.current,h=lt(),m=xr(u);return i=dd(i),t.context===null?t.context=i:t.pendingContext=i,t=Xt(h,m),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=mr(u,t,m),e!==null&&(Dt(e,u,m,h),ci(e,u,m)),m}function $i(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function fd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function Ba(e,t){fd(e,t),(e=e.alternate)&&fd(e,t)}function Sp(){return null}var pd=typeof reportError=="function"?reportError:function(e){console.error(e)};function Va(e){this._internalRoot=e}Ii.prototype.render=Va.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(n(409));Oi(e,t,null,null)},Ii.prototype.unmount=Va.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ir(function(){Oi(null,e,null,null)}),t[Kt]=null}};function Ii(e){this._internalRoot=e}Ii.prototype.unstable_scheduleHydration=function(e){if(e){var t=Yl();e={blockedOn:null,target:e,priority:t};for(var i=0;i<lr.length&&t!==0&&t<lr[i].priority;i++);lr.splice(i,0,e),i===0&&eu(e)}};function qa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Di(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function gd(){}function kp(e,t,i,a,u){if(u){if(typeof a=="function"){var h=a;a=function(){var I=$i(m);h.call(I)}}var m=hd(t,a,e,0,null,!1,!1,"",gd);return e._reactRootContainer=m,e[Kt]=m.current,es(e.nodeType===8?e.parentNode:e),Ir(),m}for(;u=e.lastChild;)e.removeChild(u);if(typeof a=="function"){var w=a;a=function(){var I=$i(_);w.call(I)}}var _=za(e,0,!1,null,null,!1,!1,"",gd);return e._reactRootContainer=_,e[Kt]=_.current,es(e.nodeType===8?e.parentNode:e),Ir(function(){Oi(t,_,i,a)}),_}function Li(e,t,i,a,u){var h=i._reactRootContainer;if(h){var m=h;if(typeof u=="function"){var w=u;u=function(){var _=$i(m);w.call(_)}}Oi(t,m,e,u)}else m=kp(i,t,e,u,a);return $i(m)}Jl=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=Mn(t.pendingLanes);i!==0&&(po(t,i|1),pt(t,ze()),(_e&6)===0&&(vn=ze()+500,pr()))}break;case 13:Ir(function(){var a=Yt(e,1);if(a!==null){var u=lt();Dt(a,e,1,u)}}),Ba(e,1)}},go=function(e){if(e.tag===13){var t=Yt(e,134217728);if(t!==null){var i=lt();Dt(t,e,134217728,i)}Ba(e,134217728)}},Ql=function(e){if(e.tag===13){var t=xr(e),i=Yt(e,t);if(i!==null){var a=lt();Dt(i,e,t,a)}Ba(e,t)}},Yl=function(){return Ee},Xl=function(e,t){var i=Ee;try{return Ee=e,t()}finally{Ee=i}},oo=function(e,t,i){switch(t){case"input":if(Kr(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var a=i[t];if(a!==e&&a.form===e.form){var u=ei(a);if(!u)throw Error(n(90));ut(a),Kr(a,u)}}}break;case"textarea":Nl(e,i);break;case"select":t=i.value,t!=null&&sr(e,!!i.multiple,t,!1)}},Dl=Ia,Ll=Ir;var jp={usingClientEntryPoint:!1,Events:[ns,sn,ei,$l,Il,Ia]},ys={findFiberByHostInstance:Nr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ep={bundleType:ys.bundleType,version:ys.version,rendererPackageName:ys.rendererPackageName,rendererConfig:ys.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:U.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=zl(e),e===null?null:e.stateNode},findFiberByHostInstance:ys.findFiberByHostInstance||Sp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ui=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ui.isDisabled&&Ui.supportsFiber)try{Is=Ui.inject(Ep),zt=Ui}catch{}}return gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jp,gt.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qa(t))throw Error(n(200));return bp(e,t,null,i)},gt.createRoot=function(e,t){if(!qa(e))throw Error(n(299));var i=!1,a="",u=pd;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(u=t.onRecoverableError)),t=za(e,1,!1,null,null,i,!1,a,u),e[Kt]=t.current,es(e.nodeType===8?e.parentNode:e),new Va(t)},gt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(n(188)):(e=Object.keys(e).join(","),Error(n(268,e)));return e=zl(t),e=e===null?null:e.stateNode,e},gt.flushSync=function(e){return Ir(e)},gt.hydrate=function(e,t,i){if(!Di(t))throw Error(n(200));return Li(null,e,t,!0,i)},gt.hydrateRoot=function(e,t,i){if(!qa(e))throw Error(n(405));var a=i!=null&&i.hydratedSources||null,u=!1,h="",m=pd;if(i!=null&&(i.unstable_strictMode===!0&&(u=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onRecoverableError!==void 0&&(m=i.onRecoverableError)),t=hd(t,null,e,1,i??null,u,!1,h,m),e[Kt]=t.current,es(e),a)for(e=0;e<a.length;e++)i=a[e],u=i._getVersion,u=u(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,u]:t.mutableSourceEagerHydrationData.push(i,u);return new Ii(t)},gt.render=function(e,t,i){if(!Di(t))throw Error(n(200));return Li(null,e,t,!1,i)},gt.unmountComponentAtNode=function(e){if(!Di(e))throw Error(n(40));return e._reactRootContainer?(Ir(function(){Li(null,null,e,!1,function(){e._reactRootContainer=null,e[Kt]=null})}),!0):!1},gt.unstable_batchedUpdates=Ia,gt.unstable_renderSubtreeIntoContainer=function(e,t,i,a){if(!Di(i))throw Error(n(200));if(e==null||e._reactInternals===void 0)throw Error(n(38));return Li(e,t,i,!1,a)},gt.version="18.3.1-next-f1338f8080-20240426",gt}var Sd;function $p(){if(Sd)return Ka.exports;Sd=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(r){console.error(r)}}return s(),Ka.exports=Op(),Ka.exports}var kd;function Ip(){if(kd)return Mi;kd=1;var s=$p();return Mi.createRoot=s.createRoot,Mi.hydrateRoot=s.hydrateRoot,Mi}var Dp=Ip(),L=vl();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lp=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Up=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,n,o)=>o?o.toUpperCase():n.toLowerCase()),jd=s=>{const r=Up(s);return r.charAt(0).toUpperCase()+r.slice(1)},Yd=(...s)=>s.filter((r,n,o)=>!!r&&r.trim()!==""&&o.indexOf(r)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Mp={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fp=L.forwardRef(({color:s="currentColor",size:r=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:l="",children:c,iconNode:f,...p},g)=>L.createElement("svg",{ref:g,...Mp,width:r,height:r,stroke:s,strokeWidth:o?Number(n)*24/Number(r):n,className:Yd("lucide",l),...p},[...f.map(([y,x])=>L.createElement(y,x)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=(s,r)=>{const n=L.forwardRef(({className:o,...l},c)=>L.createElement(Fp,{ref:c,iconNode:r,className:Yd(`lucide-${Lp(jd(s))}`,`lucide-${s}`,o),...l}));return n.displayName=jd(s),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zp=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Bp=we("arrow-left",zp);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vp=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],wl=we("calendar",Vp);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qp=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],qi=we("camera",qp);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wp=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Hp=we("check",Wp);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kp=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Xd=we("chevron-down",Kp);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gp=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Zd=we("chevron-up",Gp);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jp=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Qp=we("circle-alert",Jp);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yp=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Xp=we("circle-check",Yp);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zp=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],eg=we("circle-x",Zp);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tg=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],eh=we("clock",tg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rg=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],ng=we("cloud-upload",rg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sg=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Ed=we("download",sg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ig=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],og=we("eye-off",ig);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],th=we("eye",ag);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lg=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],rh=we("file-text",lg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ug=[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]],Hr=we("flame",ug);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cg=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],dg=we("history",cg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hg=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],fg=we("languages",hg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pg=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],gg=we("leaf",pg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mg=[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}]],yg=we("locate",mg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vg=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],wg=we("lock",vg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xg=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],_g=we("log-out",xg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bg=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],Sg=we("mail",bg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kg=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Qi=we("map-pin",kg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jg=[["path",{d:"M5 12h14",key:"1ays0h"}]],Eg=we("minus",jg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ng=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],Tg=we("pen-line",Ng);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cg=[["path",{d:"M10.83 2.38a2 2 0 0 1 2.34 0l8 5.74a2 2 0 0 1 .73 2.25l-3.04 9.26a2 2 0 0 1-1.9 1.37H7.04a2 2 0 0 1-1.9-1.37L2.1 10.37a2 2 0 0 1 .73-2.25z",key:"2hea0t"}]],Pg=we("pentagon",Cg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rg=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ag=we("plus",Rg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Og=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Wi=we("refresh-cw",Og);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $g=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],nh=we("save",$g);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ig=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Dg=we("search",Ig);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lg=[["path",{d:"M7 20h10",key:"e6iznv"}],["path",{d:"M10 20c5.5-2.5.8-6.4 3-10",key:"161w41"}],["path",{d:"M9.5 9.4c1.1.8 1.8 2.2 2.3 3.7-2 .4-3.5.4-4.8-.3-1.2-.6-2.3-1.9-3-4.2 2.8-.5 4.4 0 5.5.8z",key:"9gtqwd"}],["path",{d:"M14.1 6a7 7 0 0 0-1.1 4c1.9-.1 3.3-.6 4.3-1.4 1-1 1.6-2.3 1.7-4.6-2.7.1-4 1-4.9 2z",key:"bkxnd2"}]],Ss=we("sprout",Lg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ug=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Mg=we("square-check-big",Ug);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fg=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],zg=we("square",Fg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bg=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],sh=we("trash-2",Bg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vg=[["path",{d:"M2 22 16 8",key:"60hf96"}],["path",{d:"M3.47 12.53 5 11l1.53 1.53a3.5 3.5 0 0 1 0 4.94L5 19l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1rdhi6"}],["path",{d:"M7.47 8.53 9 7l1.53 1.53a3.5 3.5 0 0 1 0 4.94L9 15l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1sdzmb"}],["path",{d:"M11.47 4.53 13 3l1.53 1.53a3.5 3.5 0 0 1 0 4.94L13 11l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"eoatbi"}],["path",{d:"M20 2h2v2a4 4 0 0 1-4 4h-2V6a4 4 0 0 1 4-4Z",key:"19rau1"}],["path",{d:"M11.47 17.47 13 19l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L5 19l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"tc8ph9"}],["path",{d:"M15.47 13.47 17 15l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L9 15l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"2m8kc5"}],["path",{d:"M19.47 9.47 21 11l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L13 11l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"vex3ng"}]],qg=we("wheat",Vg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wg=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],xl=we("x",Wg),Hg={th:{save:"",cancel:"",delete:"",edit:"",close:"",confirm:"",back:"",search:"",filter:"",all:"",language:"th",appTitle:"",appSubtitle:"",navRice:"-",navSugarcane:"-",navHistory:"",riceTitle:"",riceSubtitle:"",riceFieldType:"",dryField:"",rainyField:"",unspecifiedField:"",riceVariety:"",riceVarietyPlaceholder:"",sugarcaneTitle:"",sugarcaneSubtitle:"",burnType:"",burnBefore:"",burnAfter:"",activitiesAfterBurn:"",plowing:"",collecting:"/",other:"",otherPlaceholder:"",mapTitle:"",drawBurnArea:"",drawNoBurnArea:"",burnArea:"",noBurnArea:"",totalArea:"",rai:"",sqm:"..",polygon:"polygon",location:"",gpsLocation:" GPS",accuracy:"",gettingLocation:"...",locationError:"",photos:"",addPhoto:"",remarks:"",remarksPlaceholder:"...",loading:"...",saving:"...",updateGps:" GPS",selectFromMap:"",noLocationData:"",latitude:"",longitude:"",saveDraft:"",saveData:"",clearForm:"",download:"",viewDetails:"",historyTitle:"",totalRecords:"",rice:"",sugarcane:"",draft:"",saved:"",searchPlaceholder:", ...",found:"",records:"",noData:"",startRecording:"",selectForExport:"",selected:"",selectAll:"",deselectAll:"",downloadExcel:" Excel",exportSuccess:"",exportSuccessSuffix:"!",exportError:"",pleaseSelectRecords:"",details:"",polygonList:" Polygon",recordedAt:"",saveAsFinal:"",confirmSaveDraft:"?",confirmDelete:"?",status:"",draftStatus:"",savedStatus:"",date:"",time:"",excelType:"",excelStatus:"",excelTotalArea:" ()",excelBurnArea:" ()",excelNoBurnArea:" ()",excelPolygonCount:" Polygon",excelLatitude:"",excelLongitude:"",excelAccuracy:" GPS (m)",excelRiceFieldType:"",excelRiceVariety:"",excelBurnType:"",excelPlowing:"",excelCollecting:"",excelOtherActivities:"",excelRemarks:"",excelPhotoCount:"",yes:"",no:"",sync:"",syncing:"...",syncSuccess:"",syncFailed:""},en:{save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",close:"Close",confirm:"Confirm",back:"Back",search:"Search",filter:"Filter",all:"All",language:"en",appTitle:"Burn Area Recording System",appSubtitle:"Field Data Collection",navRice:"Rice Field",navSugarcane:"Sugarcane",navHistory:"History",riceTitle:"Record Burn Area",riceSubtitle:"Rice Field",riceFieldType:"Rice Field Type",dryField:"Dry Season",rainyField:"Rainy Season",unspecifiedField:"Unspecified",riceVariety:"Rice Variety",riceVarietyPlaceholder:"Enter rice variety",sugarcaneTitle:"Record Burn Area",sugarcaneSubtitle:"Sugarcane Field",burnType:"Burn Type",burnBefore:"Pre-harvest Burn",burnAfter:"Post-harvest Burn",activitiesAfterBurn:"Post-burn Activities",plowing:"Plowing after burning",collecting:"Collecting sugarcane leaves/stubble",other:"Other",otherPlaceholder:"Specify other activities",mapTitle:"Map",drawBurnArea:"Draw Burn Area",drawNoBurnArea:"Draw No-burn Area",burnArea:"Burn Area",noBurnArea:"No-burn Area",totalArea:"Total Area",rai:"rai",sqm:"sq.m.",polygon:"polygon",location:"Location",gpsLocation:"GPS Location",accuracy:"Accuracy",gettingLocation:"Getting location...",locationError:"Cannot get location",photos:"Photos",addPhoto:"Add Photo",remarks:"Remarks",remarksPlaceholder:"Enter additional remarks...",loading:"Loading...",saving:"Saving...",updateGps:"Update GPS",selectFromMap:"Select from map",noLocationData:"No location data",latitude:"Latitude",longitude:"Longitude",saveDraft:"Save as Draft",saveData:"Save Data",clearForm:"Clear Form",download:"Download",viewDetails:"View Details",historyTitle:"Recording History",totalRecords:"Total Records",rice:"Rice",sugarcane:"Sugarcane",draft:"Draft",saved:"Saved",searchPlaceholder:"Search date, remarks...",found:"Found",records:"records",noData:"No Data",startRecording:"Start recording to view history",selectForExport:"Select records to download",selected:"Selected",selectAll:"Select All",deselectAll:"Deselect All",downloadExcel:"Download Excel",exportSuccess:"Downloaded",exportSuccessSuffix:"records successfully!",exportError:"Error downloading data",pleaseSelectRecords:"Please select records to download",details:"Details",polygonList:"Polygon List",recordedAt:"Recorded at",saveAsFinal:"Save as Final",confirmSaveDraft:"Do you want to save this draft as final?",confirmDelete:"Do you want to delete this record?",status:"Status",draftStatus:"Draft",savedStatus:"Saved",date:"Date",time:"Time",excelType:"Type",excelStatus:"Status",excelTotalArea:"Total Area (rai)",excelBurnArea:"Burn Area (rai)",excelNoBurnArea:"No-burn Area (rai)",excelPolygonCount:"Polygon Count",excelLatitude:"Latitude",excelLongitude:"Longitude",excelAccuracy:"GPS Accuracy (m)",excelRiceFieldType:"Rice Field Type",excelRiceVariety:"Rice Variety",excelBurnType:"Burn Type",excelPlowing:"Plowing",excelCollecting:"Collecting Residue",excelOtherActivities:"Other Activities",excelRemarks:"Remarks",excelPhotoCount:"Photo Count",yes:"Yes",no:"No",sync:"Sync",syncing:"Syncing...",syncSuccess:"Sync successful",syncFailed:"Sync failed"}},ih=L.createContext(void 0);function Kg({children:s}){const[r,n]=L.useState(()=>{const c=localStorage.getItem("app-language");return c==="en"||c==="th"?c:"th"});L.useEffect(()=>{localStorage.setItem("app-language",r)},[r]);const o=c=>{n(c)},l=c=>Hg[r][c];return d.jsx(ih.Provider,{value:{language:r,setLanguage:o,t:l},children:s})}function Ht(){const s=L.useContext(ih);if(s===void 0)throw new Error("useLanguage must be used within a LanguageProvider");return s}function Yi(s,r){var n={};for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&r.indexOf(o)<0&&(n[o]=s[o]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(s);l<o.length;l++)r.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(s,o[l])&&(n[o[l]]=s[o[l]]);return n}function Gg(s,r,n,o){function l(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function p(x){try{y(o.next(x))}catch(j){f(j)}}function g(x){try{y(o.throw(x))}catch(j){f(j)}}function y(x){x.done?c(x.value):l(x.value).then(p,g)}y((o=o.apply(s,r||[])).next())})}const Jg=s=>s?(...r)=>s(...r):(...r)=>fetch(...r);class _l extends Error{constructor(r,n="FunctionsError",o){super(r),this.name=n,this.context=o}}class Qg extends _l{constructor(r){super("Failed to send a request to the Edge Function","FunctionsFetchError",r)}}class Nd extends _l{constructor(r){super("Relay Error invoking the Edge Function","FunctionsRelayError",r)}}class Td extends _l{constructor(r){super("Edge Function returned a non-2xx status code","FunctionsHttpError",r)}}var al;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(al||(al={}));class Yg{constructor(r,{headers:n={},customFetch:o,region:l=al.Any}={}){this.url=r,this.headers=n,this.region=l,this.fetch=Jg(o)}setAuth(r){this.headers.Authorization=`Bearer ${r}`}invoke(r){return Gg(this,arguments,void 0,function*(n,o={}){var l;let c,f;try{const{headers:p,method:g,body:y,signal:x,timeout:j}=o;let b={},{region:T}=o;T||(T=this.region);const A=new URL(`${this.url}/${n}`);T&&T!=="any"&&(b["x-region"]=T,A.searchParams.set("forceFunctionRegion",T));let O;y&&(p&&!Object.prototype.hasOwnProperty.call(p,"Content-Type")||!p)?typeof Blob<"u"&&y instanceof Blob||y instanceof ArrayBuffer?(b["Content-Type"]="application/octet-stream",O=y):typeof y=="string"?(b["Content-Type"]="text/plain",O=y):typeof FormData<"u"&&y instanceof FormData?O=y:(b["Content-Type"]="application/json",O=JSON.stringify(y)):y&&typeof y!="string"&&!(typeof Blob<"u"&&y instanceof Blob)&&!(y instanceof ArrayBuffer)&&!(typeof FormData<"u"&&y instanceof FormData)?O=JSON.stringify(y):O=y;let $=x;j&&(f=new AbortController,c=setTimeout(()=>f.abort(),j),x?($=f.signal,x.addEventListener("abort",()=>f.abort())):$=f.signal);const M=yield this.fetch(A.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},b),this.headers),p),body:O,signal:$}).catch(re=>{throw new Qg(re)}),q=M.headers.get("x-relay-error");if(q&&q==="true")throw new Nd(M);if(!M.ok)throw new Td(M);let D=((l=M.headers.get("Content-Type"))!==null&&l!==void 0?l:"text/plain").split(";")[0].trim(),U;return D==="application/json"?U=yield M.json():D==="application/octet-stream"||D==="application/pdf"?U=yield M.blob():D==="text/event-stream"?U=M:D==="multipart/form-data"?U=yield M.formData():U=yield M.text(),{data:U,error:null,response:M}}catch(p){return{data:null,error:p,response:p instanceof Td||p instanceof Nd?p.context:void 0}}finally{c&&clearTimeout(c)}})}}var Xg=class extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}},Zg=class{constructor(s){var r,n;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(r=s.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=s.signal,this.isMaybeSingle=(n=s.isMaybeSingle)!==null&&n!==void 0?n:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,r){return this.headers=new Headers(this.headers),this.headers.set(s,r),this}then(s,r){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let l=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{let f=null,p=null,g=null,y=c.status,x=c.statusText;if(c.ok){var j,b;if(n.method!=="HEAD"){var T;const M=await c.text();M===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((T=n.headers.get("Accept"))===null||T===void 0)&&T.includes("application/vnd.pgrst.plan+text"))?p=M:p=JSON.parse(M))}const O=(j=n.headers.get("Prefer"))===null||j===void 0?void 0:j.match(/count=(exact|planned|estimated)/),$=(b=c.headers.get("content-range"))===null||b===void 0?void 0:b.split("/");O&&$&&$.length>1&&(g=parseInt($[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(p)&&(p.length>1?(f={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,g=null,y=406,x="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{var A;const O=await c.text();try{f=JSON.parse(O),Array.isArray(f)&&c.status===404&&(p=[],f=null,y=200,x="OK")}catch{c.status===404&&O===""?(y=204,x="No Content"):f={message:O}}if(f&&n.isMaybeSingle&&(!(f==null||(A=f.details)===null||A===void 0)&&A.includes("0 rows"))&&(f=null,y=200,x="OK"),f&&n.shouldThrowOnError)throw new Xg(f)}return{error:f,data:p,count:g,status:y,statusText:x}});return this.shouldThrowOnError||(l=l.catch(c=>{var f;let p="";const g=c?.cause;if(g){var y,x,j,b;const A=(y=g?.message)!==null&&y!==void 0?y:"",O=(x=g?.code)!==null&&x!==void 0?x:"";p=`${(j=c?.name)!==null&&j!==void 0?j:"FetchError"}: ${c?.message}`,p+=`

Caused by: ${(b=g?.name)!==null&&b!==void 0?b:"Error"}: ${A}`,O&&(p+=` (${O})`),g?.stack&&(p+=`
${g.stack}`)}else{var T;p=(T=c?.stack)!==null&&T!==void 0?T:""}return{error:{message:`${(f=c?.name)!==null&&f!==void 0?f:"FetchError"}: ${c?.message}`,details:p,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),l.then(s,r)}returns(){return this}overrideTypes(){return this}},em=class extends Zg{select(s){let r=!1;const n=(s??"*").split("").map(o=>/\s/.test(o)&&!r?"":(o==='"'&&(r=!r),o)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:r=!0,nullsFirst:n,foreignTable:o,referencedTable:l=o}={}){const c=l?`${l}.order`:"order",f=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${f?`${f},`:""}${s}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:r,referencedTable:n=r}={}){const o=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(o,`${s}`),this}range(s,r,{foreignTable:n,referencedTable:o=n}={}){const l=typeof o>"u"?"offset":`${o}.offset`,c=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${s}`),this.url.searchParams.set(c,`${r-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:r=!1,settings:n=!1,buffers:o=!1,wal:l=!1,format:c="text"}={}){var f;const p=[s?"analyze":null,r?"verbose":null,n?"settings":null,o?"buffers":null,l?"wal":null].filter(Boolean).join("|"),g=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${g}"; options=${p};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}};const Cd=new RegExp("[,()]");var En=class extends em{eq(s,r){return this.url.searchParams.append(s,`eq.${r}`),this}neq(s,r){return this.url.searchParams.append(s,`neq.${r}`),this}gt(s,r){return this.url.searchParams.append(s,`gt.${r}`),this}gte(s,r){return this.url.searchParams.append(s,`gte.${r}`),this}lt(s,r){return this.url.searchParams.append(s,`lt.${r}`),this}lte(s,r){return this.url.searchParams.append(s,`lte.${r}`),this}like(s,r){return this.url.searchParams.append(s,`like.${r}`),this}likeAllOf(s,r){return this.url.searchParams.append(s,`like(all).{${r.join(",")}}`),this}likeAnyOf(s,r){return this.url.searchParams.append(s,`like(any).{${r.join(",")}}`),this}ilike(s,r){return this.url.searchParams.append(s,`ilike.${r}`),this}ilikeAllOf(s,r){return this.url.searchParams.append(s,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(s,r){return this.url.searchParams.append(s,`ilike(any).{${r.join(",")}}`),this}regexMatch(s,r){return this.url.searchParams.append(s,`match.${r}`),this}regexIMatch(s,r){return this.url.searchParams.append(s,`imatch.${r}`),this}is(s,r){return this.url.searchParams.append(s,`is.${r}`),this}isDistinct(s,r){return this.url.searchParams.append(s,`isdistinct.${r}`),this}in(s,r){const n=Array.from(new Set(r)).map(o=>typeof o=="string"&&Cd.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(s,`in.(${n})`),this}notIn(s,r){const n=Array.from(new Set(r)).map(o=>typeof o=="string"&&Cd.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(s,`not.in.(${n})`),this}contains(s,r){return typeof r=="string"?this.url.searchParams.append(s,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(s,`cs.{${r.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(r)}`),this}containedBy(s,r){return typeof r=="string"?this.url.searchParams.append(s,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(s,`cd.{${r.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(r)}`),this}rangeGt(s,r){return this.url.searchParams.append(s,`sr.${r}`),this}rangeGte(s,r){return this.url.searchParams.append(s,`nxl.${r}`),this}rangeLt(s,r){return this.url.searchParams.append(s,`sl.${r}`),this}rangeLte(s,r){return this.url.searchParams.append(s,`nxr.${r}`),this}rangeAdjacent(s,r){return this.url.searchParams.append(s,`adj.${r}`),this}overlaps(s,r){return typeof r=="string"?this.url.searchParams.append(s,`ov.${r}`):this.url.searchParams.append(s,`ov.{${r.join(",")}}`),this}textSearch(s,r,{config:n,type:o}={}){let l="";o==="plain"?l="pl":o==="phrase"?l="ph":o==="websearch"&&(l="w");const c=n===void 0?"":`(${n})`;return this.url.searchParams.append(s,`${l}fts${c}.${r}`),this}match(s){return Object.entries(s).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(s,r,n){return this.url.searchParams.append(s,`not.${r}.${n}`),this}or(s,{foreignTable:r,referencedTable:n=r}={}){const o=n?`${n}.or`:"or";return this.url.searchParams.append(o,`(${s})`),this}filter(s,r,n){return this.url.searchParams.append(s,`${r}.${n}`),this}},tm=class{constructor(s,{headers:r={},schema:n,fetch:o}){this.url=s,this.headers=new Headers(r),this.schema=n,this.fetch=o}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(s,r){const{head:n=!1,count:o}=r??{},l=n?"HEAD":"GET";let c=!1;const f=(s??"*").split("").map(y=>/\s/.test(y)&&!c?"":(y==='"'&&(c=!c),y)).join(""),{url:p,headers:g}=this.cloneRequestState();return p.searchParams.set("select",f),o&&g.append("Prefer",`count=${o}`),new En({method:l,url:p,headers:g,schema:this.schema,fetch:this.fetch})}insert(s,{count:r,defaultToNull:n=!0}={}){var o;const l="POST",{url:c,headers:f}=this.cloneRequestState();if(r&&f.append("Prefer",`count=${r}`),n||f.append("Prefer","missing=default"),Array.isArray(s)){const p=s.reduce((g,y)=>g.concat(Object.keys(y)),[]);if(p.length>0){const g=[...new Set(p)].map(y=>`"${y}"`);c.searchParams.set("columns",g.join(","))}}return new En({method:l,url:c,headers:f,schema:this.schema,body:s,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(s,{onConflict:r,ignoreDuplicates:n=!1,count:o,defaultToNull:l=!0}={}){var c;const f="POST",{url:p,headers:g}=this.cloneRequestState();if(g.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&p.searchParams.set("on_conflict",r),o&&g.append("Prefer",`count=${o}`),l||g.append("Prefer","missing=default"),Array.isArray(s)){const y=s.reduce((x,j)=>x.concat(Object.keys(j)),[]);if(y.length>0){const x=[...new Set(y)].map(j=>`"${j}"`);p.searchParams.set("columns",x.join(","))}}return new En({method:f,url:p,headers:g,schema:this.schema,body:s,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(s,{count:r}={}){var n;const o="PATCH",{url:l,headers:c}=this.cloneRequestState();return r&&c.append("Prefer",`count=${r}`),new En({method:o,url:l,headers:c,schema:this.schema,body:s,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:s}={}){var r;const n="DELETE",{url:o,headers:l}=this.cloneRequestState();return s&&l.append("Prefer",`count=${s}`),new En({method:n,url:o,headers:l,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}},rm=class oh{constructor(r,{headers:n={},schema:o,fetch:l}={}){this.url=r,this.headers=new Headers(n),this.schemaName=o,this.fetch=l}from(r){if(!r||typeof r!="string"||r.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new tm(new URL(`${this.url}/${r}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(r){return new oh(this.url,{headers:this.headers,schema:r,fetch:this.fetch})}rpc(r,n={},{head:o=!1,get:l=!1,count:c}={}){var f;let p;const g=new URL(`${this.url}/rpc/${r}`);let y;const x=T=>T!==null&&typeof T=="object"&&(!Array.isArray(T)||T.some(x)),j=o&&Object.values(n).some(x);j?(p="POST",y=n):o||l?(p=o?"HEAD":"GET",Object.entries(n).filter(([T,A])=>A!==void 0).map(([T,A])=>[T,Array.isArray(A)?`{${A.join(",")}}`:`${A}`]).forEach(([T,A])=>{g.searchParams.append(T,A)})):(p="POST",y=n);const b=new Headers(this.headers);return j?b.set("Prefer",c?`count=${c},return=minimal`:"return=minimal"):c&&b.set("Prefer",`count=${c}`),new En({method:p,url:g,headers:b,schema:this.schemaName,body:y,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}};class nm{constructor(){}static detectEnvironment(){var r;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((r=navigator.userAgent)===null||r===void 0)&&r.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const o=n.versions;if(o&&o.node){const l=o.node,c=parseInt(l.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const r=this.detectEnvironment();if(r.constructor)return r.constructor;let n=r.error||"WebSocket not supported in this environment.";throw r.workaround&&(n+=`

Suggested solution: ${r.workaround}`),new Error(n)}static createWebSocket(r,n){const o=this.getWebSocketConstructor();return new o(r,n)}static isWebSocketSupported(){try{const r=this.detectEnvironment();return r.type==="native"||r.type==="ws"}catch{return!1}}}const sm="2.90.1",im=`realtime-js/${sm}`,ah="1.0.0",om="2.0.0",Pd=ah,ll=1e4,am=1e3,lm=100;var kr;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(kr||(kr={}));var Ge;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(Ge||(Ge={}));var Mt;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(Mt||(Mt={}));var ul;(function(s){s.websocket="websocket"})(ul||(ul={}));var Br;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(Br||(Br={}));class um{constructor(r){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=r??[]}encode(r,n){if(r.event===this.BROADCAST_EVENT&&!(r.payload instanceof ArrayBuffer)&&typeof r.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(r));let o=[r.join_ref,r.ref,r.topic,r.event,r.payload];return n(JSON.stringify(o))}_binaryEncodeUserBroadcastPush(r){var n;return this._isArrayBuffer((n=r.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(r):this._encodeJsonUserBroadcastPush(r)}_encodeBinaryUserBroadcastPush(r){var n,o;const l=(o=(n=r.payload)===null||n===void 0?void 0:n.payload)!==null&&o!==void 0?o:new ArrayBuffer(0);return this._encodeUserBroadcastPush(r,this.BINARY_ENCODING,l)}_encodeJsonUserBroadcastPush(r){var n,o;const l=(o=(n=r.payload)===null||n===void 0?void 0:n.payload)!==null&&o!==void 0?o:{},f=new TextEncoder().encode(JSON.stringify(l)).buffer;return this._encodeUserBroadcastPush(r,this.JSON_ENCODING,f)}_encodeUserBroadcastPush(r,n,o){var l,c;const f=r.topic,p=(l=r.ref)!==null&&l!==void 0?l:"",g=(c=r.join_ref)!==null&&c!==void 0?c:"",y=r.payload.event,x=this.allowedMetadataKeys?this._pick(r.payload,this.allowedMetadataKeys):{},j=Object.keys(x).length===0?"":JSON.stringify(x);if(g.length>255)throw new Error(`joinRef length ${g.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`ref length ${p.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`topic length ${f.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`userEvent length ${y.length} exceeds maximum of 255`);if(j.length>255)throw new Error(`metadata length ${j.length} exceeds maximum of 255`);const b=this.USER_BROADCAST_PUSH_META_LENGTH+g.length+p.length+f.length+y.length+j.length,T=new ArrayBuffer(this.HEADER_LENGTH+b);let A=new DataView(T),O=0;A.setUint8(O++,this.KINDS.userBroadcastPush),A.setUint8(O++,g.length),A.setUint8(O++,p.length),A.setUint8(O++,f.length),A.setUint8(O++,y.length),A.setUint8(O++,j.length),A.setUint8(O++,n),Array.from(g,M=>A.setUint8(O++,M.charCodeAt(0))),Array.from(p,M=>A.setUint8(O++,M.charCodeAt(0))),Array.from(f,M=>A.setUint8(O++,M.charCodeAt(0))),Array.from(y,M=>A.setUint8(O++,M.charCodeAt(0))),Array.from(j,M=>A.setUint8(O++,M.charCodeAt(0)));var $=new Uint8Array(T.byteLength+o.byteLength);return $.set(new Uint8Array(T),0),$.set(new Uint8Array(o),T.byteLength),$.buffer}decode(r,n){if(this._isArrayBuffer(r)){let o=this._binaryDecode(r);return n(o)}if(typeof r=="string"){const o=JSON.parse(r),[l,c,f,p,g]=o;return n({join_ref:l,ref:c,topic:f,event:p,payload:g})}return n({})}_binaryDecode(r){const n=new DataView(r),o=n.getUint8(0),l=new TextDecoder;switch(o){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(r,n,l)}}_decodeUserBroadcast(r,n,o){const l=n.getUint8(1),c=n.getUint8(2),f=n.getUint8(3),p=n.getUint8(4);let g=this.HEADER_LENGTH+4;const y=o.decode(r.slice(g,g+l));g=g+l;const x=o.decode(r.slice(g,g+c));g=g+c;const j=o.decode(r.slice(g,g+f));g=g+f;const b=r.slice(g,r.byteLength),T=p===this.JSON_ENCODING?JSON.parse(o.decode(b)):b,A={type:this.BROADCAST_EVENT,event:x,payload:T};return f>0&&(A.meta=JSON.parse(j)),{join_ref:null,ref:null,topic:y,event:this.BROADCAST_EVENT,payload:A}}_isArrayBuffer(r){var n;return r instanceof ArrayBuffer||((n=r?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(r,n){return!r||typeof r!="object"?{}:Object.fromEntries(Object.entries(r).filter(([o])=>n.includes(o)))}}class lh{constructor(r,n){this.callback=r,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=r,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Te;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(Te||(Te={}));const Rd=(s,r,n={})=>{var o;const l=(o=n.skipTypes)!==null&&o!==void 0?o:[];return r?Object.keys(r).reduce((c,f)=>(c[f]=cm(f,s,r,l),c),{}):{}},cm=(s,r,n,o)=>{const l=r.find(p=>p.name===s),c=l?.type,f=n[s];return c&&!o.includes(c)?uh(c,f):cl(f)},uh=(s,r)=>{if(s.charAt(0)==="_"){const n=s.slice(1,s.length);return pm(r,n)}switch(s){case Te.bool:return dm(r);case Te.float4:case Te.float8:case Te.int2:case Te.int4:case Te.int8:case Te.numeric:case Te.oid:return hm(r);case Te.json:case Te.jsonb:return fm(r);case Te.timestamp:return gm(r);case Te.abstime:case Te.date:case Te.daterange:case Te.int4range:case Te.int8range:case Te.money:case Te.reltime:case Te.text:case Te.time:case Te.timestamptz:case Te.timetz:case Te.tsrange:case Te.tstzrange:return cl(r);default:return cl(r)}},cl=s=>s,dm=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},hm=s=>{if(typeof s=="string"){const r=parseFloat(s);if(!Number.isNaN(r))return r}return s},fm=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch{return s}return s},pm=(s,r)=>{if(typeof s!="string")return s;const n=s.length-1,o=s[n];if(s[0]==="{"&&o==="}"){let c;const f=s.slice(1,n);try{c=JSON.parse("["+f+"]")}catch{c=f?f.split(","):[]}return c.map(p=>uh(r,p))}return s},gm=s=>typeof s=="string"?s.replace(" ","T"):s,ch=s=>{const r=new URL(s);return r.protocol=r.protocol.replace(/^ws/i,"http"),r.pathname=r.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),r.pathname===""||r.pathname==="/"?r.pathname="/api/broadcast":r.pathname=r.pathname+"/api/broadcast",r.href};class Qa{constructor(r,n,o={},l=ll){this.channel=r,this.event=n,this.payload=o,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(r){this.timeout=r,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(r){this.payload=Object.assign(Object.assign({},this.payload),r)}receive(r,n){var o;return this._hasReceived(r)&&n((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:r,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const r=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},r),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(r,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:r,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:r,response:n}){this.recHooks.filter(o=>o.status===r).forEach(o=>o.callback(n))}_hasReceived(r){return this.receivedResp&&this.receivedResp.status===r}}var Ad;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(Ad||(Ad={}));class _s{constructor(r,n){this.channel=r,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},l=>{const{onJoin:c,onLeave:f,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=_s.syncState(this.state,l,c,f),this.pendingDiffs.forEach(g=>{this.state=_s.syncDiff(this.state,g,c,f)}),this.pendingDiffs=[],p()}),this.channel._on(o.diff,{},l=>{const{onJoin:c,onLeave:f,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=_s.syncDiff(this.state,l,c,f),p())}),this.onJoin((l,c,f)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:c,newPresences:f})}),this.onLeave((l,c,f)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:c,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(r,n,o,l){const c=this.cloneDeep(r),f=this.transformState(n),p={},g={};return this.map(c,(y,x)=>{f[y]||(g[y]=x)}),this.map(f,(y,x)=>{const j=c[y];if(j){const b=x.map($=>$.presence_ref),T=j.map($=>$.presence_ref),A=x.filter($=>T.indexOf($.presence_ref)<0),O=j.filter($=>b.indexOf($.presence_ref)<0);A.length>0&&(p[y]=A),O.length>0&&(g[y]=O)}else p[y]=x}),this.syncDiff(c,{joins:p,leaves:g},o,l)}static syncDiff(r,n,o,l){const{joins:c,leaves:f}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return o||(o=()=>{}),l||(l=()=>{}),this.map(c,(p,g)=>{var y;const x=(y=r[p])!==null&&y!==void 0?y:[];if(r[p]=this.cloneDeep(g),x.length>0){const j=r[p].map(T=>T.presence_ref),b=x.filter(T=>j.indexOf(T.presence_ref)<0);r[p].unshift(...b)}o(p,x,g)}),this.map(f,(p,g)=>{let y=r[p];if(!y)return;const x=g.map(j=>j.presence_ref);y=y.filter(j=>x.indexOf(j.presence_ref)<0),r[p]=y,l(p,y,g),y.length===0&&delete r[p]}),r}static map(r,n){return Object.getOwnPropertyNames(r).map(o=>n(o,r[o]))}static transformState(r){return r=this.cloneDeep(r),Object.getOwnPropertyNames(r).reduce((n,o)=>{const l=r[o];return"metas"in l?n[o]=l.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):n[o]=l,n},{})}static cloneDeep(r){return JSON.parse(JSON.stringify(r))}onJoin(r){this.caller.onJoin=r}onLeave(r){this.caller.onLeave=r}onSync(r){this.caller.onSync=r}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Od;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(Od||(Od={}));var bs;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(bs||(bs={}));var tr;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(tr||(tr={}));class Cn{constructor(r,n={config:{}},o){var l,c;if(this.topic=r,this.params=n,this.socket=o,this.bindings={},this.state=Ge.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=r.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Qa(this,Mt.join,this.params,this.timeout),this.rejoinTimer=new lh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ge.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ge.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=Ge.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ge.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=Ge.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Mt.reply,{},(f,p)=>{this._trigger(this._replyEventName(p),f)}),this.presence=new _s(this),this.broadcastEndpointURL=ch(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((c=(l=this.params.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(r,n=this.timeout){var o,l,c;if(this.socket.isConnected()||this.socket.connect(),this.state==Ge.closed){const{config:{broadcast:f,presence:p,private:g}}=this.params,y=(l=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(T=>T.filter))!==null&&l!==void 0?l:[],x=!!this.bindings[bs.PRESENCE]&&this.bindings[bs.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,j={},b={broadcast:f,presence:Object.assign(Object.assign({},p),{enabled:x}),postgres_changes:y,private:g};this.socket.accessTokenValue&&(j.access_token=this.socket.accessTokenValue),this._onError(T=>r?.(tr.CHANNEL_ERROR,T)),this._onClose(()=>r?.(tr.CLOSED)),this.updateJoinPayload(Object.assign({config:b},j)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:T})=>{var A;if(this.socket._isManualToken()||this.socket.setAuth(),T===void 0){r?.(tr.SUBSCRIBED);return}else{const O=this.bindings.postgres_changes,$=(A=O?.length)!==null&&A!==void 0?A:0,M=[];for(let q=0;q<$;q++){const D=O[q],{filter:{event:U,schema:re,table:J,filter:F}}=D,fe=T&&T[q];if(fe&&fe.event===U&&Cn.isFilterValueEqual(fe.schema,re)&&Cn.isFilterValueEqual(fe.table,J)&&Cn.isFilterValueEqual(fe.filter,F))M.push(Object.assign(Object.assign({},D),{id:fe.id}));else{this.unsubscribe(),this.state=Ge.errored,r?.(tr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=M,r&&r(tr.SUBSCRIBED);return}}).receive("error",T=>{this.state=Ge.errored,r?.(tr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(T).join(", ")||"error")))}).receive("timeout",()=>{r?.(tr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(r,n={}){return await this.send({type:"presence",event:"track",payload:r},n.timeout||this.timeout)}async untrack(r={}){return await this.send({type:"presence",event:"untrack"},r)}on(r,n,o){return this.state===Ge.joined&&r===bs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(r,n,o)}async httpSend(r,n,o={}){var l;if(n==null)return Promise.reject("Payload is required for httpSend()");const c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:n,private:this.private}]})},p=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(l=o.timeout)!==null&&l!==void 0?l:this.timeout);if(p.status===202)return{success:!0};let g=p.statusText;try{const y=await p.json();g=y.error||y.message||g}catch{}return Promise.reject(new Error(g))}async send(r,n={}){var o,l;if(!this._canPush()&&r.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:c,payload:f}=r,p={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(p.Authorization=`Bearer ${this.socket.accessTokenValue}`);const g={method:"POST",headers:p,body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:f,private:this.private}]})};try{const y=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(o=n.timeout)!==null&&o!==void 0?o:this.timeout);return await((l=y.body)===null||l===void 0?void 0:l.cancel()),y.ok?"ok":"error"}catch(y){return y.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var f,p,g;const y=this._push(r.type,r,n.timeout||this.timeout);r.type==="broadcast"&&!(!((g=(p=(f=this.params)===null||f===void 0?void 0:f.config)===null||p===void 0?void 0:p.broadcast)===null||g===void 0)&&g.ack)&&c("ok"),y.receive("ok",()=>c("ok")),y.receive("error",()=>c("error")),y.receive("timeout",()=>c("timed out"))})}updateJoinPayload(r){this.joinPush.updatePayload(r)}unsubscribe(r=this.timeout){this.state=Ge.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Mt.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(l=>{o=new Qa(this,Mt.leave,{},r),o.receive("ok",()=>{n(),l("ok")}).receive("timeout",()=>{n(),l("timed out")}).receive("error",()=>{l("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o?.destroy()})}teardown(){this.pushBuffer.forEach(r=>r.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ge.closed,this.bindings={}}async _fetchWithTimeout(r,n,o){const l=new AbortController,c=setTimeout(()=>l.abort(),o),f=await this.socket.fetch(r,Object.assign(Object.assign({},n),{signal:l.signal}));return clearTimeout(c),f}_push(r,n,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${r}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new Qa(this,r,n,o);return this._canPush()?l.send():this._addToPushBuffer(l),l}_addToPushBuffer(r){if(r.startTimeout(),this.pushBuffer.push(r),this.pushBuffer.length>lm){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(r,n,o){return n}_isMember(r){return this.topic===r}_joinRef(){return this.joinPush.ref}_trigger(r,n,o){var l,c;const f=r.toLocaleLowerCase(),{close:p,error:g,leave:y,join:x}=Mt;if(o&&[p,g,y,x].indexOf(f)>=0&&o!==this._joinRef())return;let b=this._onMessage(f,n,o);if(n&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(T=>{var A,O,$;return((A=T.filter)===null||A===void 0?void 0:A.event)==="*"||(($=(O=T.filter)===null||O===void 0?void 0:O.event)===null||$===void 0?void 0:$.toLocaleLowerCase())===f}).map(T=>T.callback(b,o)):(c=this.bindings[f])===null||c===void 0||c.filter(T=>{var A,O,$,M,q,D,U,re;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in T){const J=T.id,F=(A=T.filter)===null||A===void 0?void 0:A.event;return J&&((O=n.ids)===null||O===void 0?void 0:O.includes(J))&&(F==="*"||F?.toLocaleLowerCase()===(($=n.data)===null||$===void 0?void 0:$.type.toLocaleLowerCase()))&&(!(!((M=T.filter)===null||M===void 0)&&M.table)||T.filter.table===((q=n.data)===null||q===void 0?void 0:q.table))}else{const J=(U=(D=T?.filter)===null||D===void 0?void 0:D.event)===null||U===void 0?void 0:U.toLocaleLowerCase();return J==="*"||J===((re=n?.event)===null||re===void 0?void 0:re.toLocaleLowerCase())}else return T.type.toLocaleLowerCase()===f}).map(T=>{if(typeof b=="object"&&"ids"in b){const A=b.data,{schema:O,table:$,commit_timestamp:M,type:q,errors:D}=A;b=Object.assign(Object.assign({},{schema:O,table:$,commit_timestamp:M,eventType:q,new:{},old:{},errors:D}),this._getPayloadRecords(A))}T.callback(b,o)})}_isClosed(){return this.state===Ge.closed}_isJoined(){return this.state===Ge.joined}_isJoining(){return this.state===Ge.joining}_isLeaving(){return this.state===Ge.leaving}_replyEventName(r){return`chan_reply_${r}`}_on(r,n,o){const l=r.toLocaleLowerCase(),c={type:l,filter:n,callback:o};return this.bindings[l]?this.bindings[l].push(c):this.bindings[l]=[c],this}_off(r,n){const o=r.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(l=>{var c;return!(((c=l.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===o&&Cn.isEqual(l.filter,n))})),this}static isEqual(r,n){if(Object.keys(r).length!==Object.keys(n).length)return!1;for(const o in r)if(r[o]!==n[o])return!1;return!0}static isFilterValueEqual(r,n){return(r??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(r){this._on(Mt.close,{},r)}_onError(r){this._on(Mt.error,{},n=>r(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(r=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ge.joining,this.joinPush.resend(r))}_getPayloadRecords(r){const n={new:{},old:{}};return(r.type==="INSERT"||r.type==="UPDATE")&&(n.new=Rd(r.columns,r.record)),(r.type==="UPDATE"||r.type==="DELETE")&&(n.old=Rd(r.columns,r.old_record)),n}}const Ya=()=>{},Fi={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},mm=[1e3,2e3,5e3,1e4],ym=1e4,vm=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class wm{constructor(r,n){var o;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ll,this.transport=null,this.heartbeatIntervalMs=Fi.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ya,this.ref=0,this.reconnectTimer=null,this.vsn=Pd,this.logger=Ya,this.conn=null,this.sendBuffer=[],this.serializer=new um,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=l=>l?(...c)=>l(...c):(...c)=>fetch(...c),!(!((o=n?.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${r}/${ul.websocket}`,this.httpEndpoint=ch(r),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=nm.createWebSocket(this.endpointURL())}catch(r){this._setConnectionState("disconnected");const n=r.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(r,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(r?this.conn.close(r,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(r){const n=await r.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const r=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),r}log(r,n,o){this.logger(r,n,o)}connectionState(){switch(this.conn&&this.conn.readyState){case kr.connecting:return Br.Connecting;case kr.open:return Br.Open;case kr.closing:return Br.Closing;default:return Br.Closed}}isConnected(){return this.connectionState()===Br.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(r,n={config:{}}){const o=`realtime:${r}`,l=this.getChannels().find(c=>c.topic===o);if(l)return l;{const c=new Cn(`realtime:${r}`,n,this);return this.channels.push(c),c}}push(r){const{topic:n,event:o,payload:l,ref:c}=r,f=()=>{this.encode(r,p=>{var g;(g=this.conn)===null||g===void 0||g.send(p)})};this.log("push",`${n} ${o} (${c})`,l),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(r=null){this._authPromise=this._performAuth(r);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var r;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(r=this.conn)===null||r===void 0||r.close(am,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Fi.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(r){this.heartbeatCallback=r}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(r=>r()),this.sendBuffer=[])}_makeRef(){let r=this.ref+1;return r===this.ref?this.ref=0:this.ref=r,this.ref.toString()}_leaveOpenTopic(r){let n=this.channels.find(o=>o.topic===r&&(o._isJoined()||o._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${r}"`),n.unsubscribe())}_remove(r){this.channels=this.channels.filter(n=>n.topic!==r.topic)}_onConnMessage(r){this.decode(r.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const y=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",y)}catch(x){this.log("error","error in heartbeat callback",x)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:o,event:l,payload:c,ref:f}=n,p=f?`(${f})`:"",g=c.status||"";this.log("receive",`${g} ${o} ${l} ${p}`.trim(),c),this.channels.filter(y=>y._isMember(o)).forEach(y=>y._trigger(l,c,f)),this._triggerStateCallbacks("message",n)})}_clearTimer(r){var n;r==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):r==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=r=>this._onConnError(r),this.conn.onmessage=r=>this._onConnMessage(r),this.conn.onclose=r=>this._onConnClose(r),this.conn.readyState===kr.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===kr.open||this.conn.readyState===kr.connecting)try{this.conn.close()}catch(r){this.log("error","Error closing connection",r)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(r=>r.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const r=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(r),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(r){var n;this._setConnectionState("disconnected"),this.log("transport","close",r),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",r)}_onConnError(r){this._setConnectionState("disconnected"),this.log("transport",`${r}`),this._triggerChanError(),this._triggerStateCallbacks("error",r)}_triggerChanError(){this.channels.forEach(r=>r._trigger(Mt.error))}_appendParams(r,n){if(Object.keys(n).length===0)return r;const o=r.match(/\?/)?"&":"?",l=new URLSearchParams(n);return`${r}${o}${l}`}_workerObjectUrl(r){let n;if(r)n=r;else{const o=new Blob([vm],{type:"application/javascript"});n=URL.createObjectURL(o)}return n}_setConnectionState(r,n=!1){this._connectionState=r,r==="connecting"?this._wasManualDisconnect=!1:r==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(r=null){let n,o=!1;if(r)n=r,o=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(l){this.log("error","Error fetching access token from callback",l),n=this.accessTokenValue}else n=this.accessTokenValue;o?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(l=>{const c={access_token:n,version:im};n&&l.updateJoinPayload(c),l.joinedOnce&&l._isJoined()&&l._push(Mt.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(r="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${r}`,n)})}_triggerStateCallbacks(r,n){try{this.stateChangeCallbacks[r].forEach(o=>{try{o(n)}catch(l){this.log("error",`error in ${r} callback`,l)}})}catch(o){this.log("error",`error triggering ${r} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new lh(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Fi.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(r){var n,o,l,c,f,p,g,y,x,j,b,T;switch(this.transport=(n=r?.transport)!==null&&n!==void 0?n:null,this.timeout=(o=r?.timeout)!==null&&o!==void 0?o:ll,this.heartbeatIntervalMs=(l=r?.heartbeatIntervalMs)!==null&&l!==void 0?l:Fi.HEARTBEAT_INTERVAL,this.worker=(c=r?.worker)!==null&&c!==void 0?c:!1,this.accessToken=(f=r?.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(p=r?.heartbeatCallback)!==null&&p!==void 0?p:Ya,this.vsn=(g=r?.vsn)!==null&&g!==void 0?g:Pd,r?.params&&(this.params=r.params),r?.logger&&(this.logger=r.logger),(r?.logLevel||r?.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(y=r?.reconnectAfterMs)!==null&&y!==void 0?y:(A=>mm[A-1]||ym),this.vsn){case ah:this.encode=(x=r?.encode)!==null&&x!==void 0?x:((A,O)=>O(JSON.stringify(A))),this.decode=(j=r?.decode)!==null&&j!==void 0?j:((A,O)=>O(JSON.parse(A)));break;case om:this.encode=(b=r?.encode)!==null&&b!==void 0?b:this.serializer.encode.bind(this.serializer),this.decode=(T=r?.decode)!==null&&T!==void 0?T:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=r?.workerUrl}}}var ks=class extends Error{constructor(s,r){super(s),this.name="IcebergError",this.status=r.status,this.icebergType=r.icebergType,this.icebergCode=r.icebergCode,this.details=r.details,this.isCommitStateUnknown=r.icebergType==="CommitStateUnknownException"||[500,502,504].includes(r.status)&&r.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function xm(s,r,n){const o=new URL(r,s);if(n)for(const[l,c]of Object.entries(n))c!==void 0&&o.searchParams.set(l,c);return o.toString()}async function _m(s){return!s||s.type==="none"?{}:s.type==="bearer"?{Authorization:`Bearer ${s.token}`}:s.type==="header"?{[s.name]:s.value}:s.type==="custom"?await s.getHeaders():{}}function bm(s){const r=s.fetchImpl??globalThis.fetch;return{async request({method:n,path:o,query:l,body:c,headers:f}){const p=xm(s.baseUrl,o,l),g=await _m(s.auth),y=await r(p,{method:n,headers:{...c?{"Content-Type":"application/json"}:{},...g,...f},body:c?JSON.stringify(c):void 0}),x=await y.text(),j=(y.headers.get("content-type")||"").includes("application/json"),b=j&&x?JSON.parse(x):x;if(!y.ok){const T=j?b:void 0,A=T?.error;throw new ks(A?.message??`Request failed with status ${y.status}`,{status:y.status,icebergType:A?.type,icebergCode:A?.code,details:T})}return{status:y.status,headers:y.headers,data:b}}}}function zi(s){return s.join("")}var Sm=class{constructor(s,r=""){this.client=s,this.prefix=r}async listNamespaces(s){const r=s?{parent:zi(s.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:r})).data.namespaces.map(o=>({namespace:o}))}async createNamespace(s,r){const n={namespace:s.namespace,properties:r?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(s){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${zi(s.namespace)}`})}async loadNamespaceMetadata(s){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${zi(s.namespace)}`})).data.properties}}async namespaceExists(s){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${zi(s.namespace)}`}),!0}catch(r){if(r instanceof ks&&r.status===404)return!1;throw r}}async createNamespaceIfNotExists(s,r){try{return await this.createNamespace(s,r)}catch(n){if(n instanceof ks&&n.status===409)return;throw n}}};function xn(s){return s.join("")}var km=class{constructor(s,r="",n){this.client=s,this.prefix=r,this.accessDelegation=n}async listTables(s){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${xn(s.namespace)}/tables`})).data.identifiers}async createTable(s,r){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${xn(s.namespace)}/tables`,body:r,headers:n})).data.metadata}async updateTable(s,r){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${xn(s.namespace)}/tables/${s.name}`,body:r});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(s,r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${xn(s.namespace)}/tables/${s.name}`,query:{purgeRequested:String(r?.purge??!1)}})}async loadTable(s){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${xn(s.namespace)}/tables/${s.name}`,headers:r})).data.metadata}async tableExists(s){const r={};this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${xn(s.namespace)}/tables/${s.name}`,headers:r}),!0}catch(n){if(n instanceof ks&&n.status===404)return!1;throw n}}async createTableIfNotExists(s,r){try{return await this.createTable(s,r)}catch(n){if(n instanceof ks&&n.status===409)return await this.loadTable({namespace:s.namespace,name:r.name});throw n}}},jm=class{constructor(s){let r="v1";s.catalogName&&(r+=`/${s.catalogName}`);const n=s.baseUrl.endsWith("/")?s.baseUrl:`${s.baseUrl}/`;this.client=bm({baseUrl:n,auth:s.auth,fetchImpl:s.fetch}),this.accessDelegation=s.accessDelegation?.join(","),this.namespaceOps=new Sm(this.client,r),this.tableOps=new km(this.client,r,this.accessDelegation)}async listNamespaces(s){return this.namespaceOps.listNamespaces(s)}async createNamespace(s,r){return this.namespaceOps.createNamespace(s,r)}async dropNamespace(s){await this.namespaceOps.dropNamespace(s)}async loadNamespaceMetadata(s){return this.namespaceOps.loadNamespaceMetadata(s)}async listTables(s){return this.tableOps.listTables(s)}async createTable(s,r){return this.tableOps.createTable(s,r)}async updateTable(s,r){return this.tableOps.updateTable(s,r)}async dropTable(s,r){await this.tableOps.dropTable(s,r)}async loadTable(s){return this.tableOps.loadTable(s)}async namespaceExists(s){return this.namespaceOps.namespaceExists(s)}async tableExists(s){return this.tableOps.tableExists(s)}async createNamespaceIfNotExists(s,r){return this.namespaceOps.createNamespaceIfNotExists(s,r)}async createTableIfNotExists(s,r){return this.tableOps.createTableIfNotExists(s,r)}},Xi=class extends Error{constructor(s){super(s),this.__isStorageError=!0,this.name="StorageError"}};function Le(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}var Em=class extends Xi{constructor(s,r,n){super(s),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},dl=class extends Xi{constructor(s,r){super(s),this.name="StorageUnknownError",this.originalError=r}};const bl=s=>s?(...r)=>s(...r):(...r)=>fetch(...r),Nm=()=>Response,hl=s=>{if(Array.isArray(s))return s.map(n=>hl(n));if(typeof s=="function"||s!==Object(s))return s;const r={};return Object.entries(s).forEach(([n,o])=>{const l=n.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));r[l]=hl(o)}),r},Tm=s=>{if(typeof s!="object"||s===null)return!1;const r=Object.getPrototypeOf(s);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},Cm=s=>!s||typeof s!="string"||s.length===0||s.length>100||s.trim()!==s||s.includes("/")||s.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(s);function js(s){"@babel/helpers - typeof";return js=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},js(s)}function Pm(s,r){if(js(s)!="object"||!s)return s;var n=s[Symbol.toPrimitive];if(n!==void 0){var o=n.call(s,r);if(js(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(s)}function Rm(s){var r=Pm(s,"string");return js(r)=="symbol"?r:r+""}function Am(s,r,n){return(r=Rm(r))in s?Object.defineProperty(s,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[r]=n,s}function $d(s,r){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(s);r&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(s,l).enumerable})),n.push.apply(n,o)}return n}function de(s){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?$d(Object(n),!0).forEach(function(o){Am(s,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):$d(Object(n)).forEach(function(o){Object.defineProperty(s,o,Object.getOwnPropertyDescriptor(n,o))})}return s}const Xa=s=>{var r;return s.msg||s.message||s.error_description||(typeof s.error=="string"?s.error:(r=s.error)===null||r===void 0?void 0:r.message)||JSON.stringify(s)},Om=async(s,r,n)=>{s instanceof await Nm()&&!n?.noResolveJson?s.json().then(o=>{const l=s.status||500,c=o?.statusCode||l+"";r(new Em(Xa(o),l,c))}).catch(o=>{r(new dl(Xa(o),o))}):r(new dl(Xa(s),s))},$m=(s,r,n,o)=>{const l={method:s,headers:r?.headers||{}};return s==="GET"||!o?l:(Tm(o)?(l.headers=de({"Content-Type":"application/json"},r?.headers),l.body=JSON.stringify(o)):l.body=o,r?.duplex&&(l.duplex=r.duplex),de(de({},l),n))};async function Ps(s,r,n,o,l,c){return new Promise((f,p)=>{s(n,$m(r,o,l,c)).then(g=>{if(!g.ok)throw g;return o?.noResolveJson?g:g.json()}).then(g=>f(g)).catch(g=>Om(g,p,o))})}async function Es(s,r,n,o){return Ps(s,"GET",r,n,o)}async function Ut(s,r,n,o,l){return Ps(s,"POST",r,o,l,n)}async function fl(s,r,n,o,l){return Ps(s,"PUT",r,o,l,n)}async function Im(s,r,n,o){return Ps(s,"HEAD",r,de(de({},n),{},{noResolveJson:!0}),o)}async function Sl(s,r,n,o,l){return Ps(s,"DELETE",r,o,l,n)}var Dm=class{constructor(s,r){this.downloadFn=s,this.shouldThrowOnError=r}then(s,r){return this.execute().then(s,r)}async execute(){var s=this;try{return{data:(await s.downloadFn()).body,error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(Le(r))return{data:null,error:r};throw r}}};let dh;dh=Symbol.toStringTag;var Lm=class{constructor(s,r){this.downloadFn=s,this.shouldThrowOnError=r,this[dh]="BlobDownloadBuilder",this.promise=null}asStream(){return new Dm(this.downloadFn,this.shouldThrowOnError)}then(s,r){return this.getPromise().then(s,r)}catch(s){return this.getPromise().catch(s)}finally(s){return this.getPromise().finally(s)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var s=this;try{return{data:await(await s.downloadFn()).blob(),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(Le(r))return{data:null,error:r};throw r}}};const Um={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Id={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Mm=class{constructor(s,r={},n,o){this.shouldThrowOnError=!1,this.url=s,this.headers=r,this.bucketId=n,this.fetch=bl(o)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(s,r,n,o){var l=this;try{let c;const f=de(de({},Id),o);let p=de(de({},l.headers),s==="POST"&&{"x-upsert":String(f.upsert)});const g=f.metadata;typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",f.cacheControl),g&&c.append("metadata",l.encodeMetadata(g)),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.has("cacheControl")||c.append("cacheControl",f.cacheControl),g&&!c.has("metadata")&&c.append("metadata",l.encodeMetadata(g))):(c=n,p["cache-control"]=`max-age=${f.cacheControl}`,p["content-type"]=f.contentType,g&&(p["x-metadata"]=l.toBase64(l.encodeMetadata(g))),(typeof ReadableStream<"u"&&c instanceof ReadableStream||c&&typeof c=="object"&&"pipe"in c&&typeof c.pipe=="function")&&!f.duplex&&(f.duplex="half")),o?.headers&&(p=de(de({},p),o.headers));const y=l._removeEmptyFolders(r),x=l._getFinalPath(y),j=await(s=="PUT"?fl:Ut)(l.fetch,`${l.url}/object/${x}`,c,de({headers:p},f?.duplex?{duplex:f.duplex}:{}));return{data:{path:y,id:j.Id,fullPath:j.Key},error:null}}catch(c){if(l.shouldThrowOnError)throw c;if(Le(c))return{data:null,error:c};throw c}}async upload(s,r,n){return this.uploadOrUpdate("POST",s,r,n)}async uploadToSignedUrl(s,r,n,o){var l=this;const c=l._removeEmptyFolders(s),f=l._getFinalPath(c),p=new URL(l.url+`/object/upload/sign/${f}`);p.searchParams.set("token",r);try{let g;const y=de({upsert:Id.upsert},o),x=de(de({},l.headers),{"x-upsert":String(y.upsert)});return typeof Blob<"u"&&n instanceof Blob?(g=new FormData,g.append("cacheControl",y.cacheControl),g.append("",n)):typeof FormData<"u"&&n instanceof FormData?(g=n,g.append("cacheControl",y.cacheControl)):(g=n,x["cache-control"]=`max-age=${y.cacheControl}`,x["content-type"]=y.contentType),{data:{path:c,fullPath:(await fl(l.fetch,p.toString(),g,{headers:x})).Key},error:null}}catch(g){if(l.shouldThrowOnError)throw g;if(Le(g))return{data:null,error:g};throw g}}async createSignedUploadUrl(s,r){var n=this;try{let o=n._getFinalPath(s);const l=de({},n.headers);r?.upsert&&(l["x-upsert"]="true");const c=await Ut(n.fetch,`${n.url}/object/upload/sign/${o}`,{},{headers:l}),f=new URL(n.url+c.url),p=f.searchParams.get("token");if(!p)throw new Xi("No token returned by API");return{data:{signedUrl:f.toString(),path:s,token:p},error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(Le(o))return{data:null,error:o};throw o}}async update(s,r,n){return this.uploadOrUpdate("PUT",s,r,n)}async move(s,r,n){var o=this;try{return{data:await Ut(o.fetch,`${o.url}/object/move`,{bucketId:o.bucketId,sourceKey:s,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:o.headers}),error:null}}catch(l){if(o.shouldThrowOnError)throw l;if(Le(l))return{data:null,error:l};throw l}}async copy(s,r,n){var o=this;try{return{data:{path:(await Ut(o.fetch,`${o.url}/object/copy`,{bucketId:o.bucketId,sourceKey:s,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:o.headers})).Key},error:null}}catch(l){if(o.shouldThrowOnError)throw l;if(Le(l))return{data:null,error:l};throw l}}async createSignedUrl(s,r,n){var o=this;try{let l=o._getFinalPath(s),c=await Ut(o.fetch,`${o.url}/object/sign/${l}`,de({expiresIn:r},n?.transform?{transform:n.transform}:{}),{headers:o.headers});const f=n?.download?`&download=${n.download===!0?"":n.download}`:"";return c={signedUrl:encodeURI(`${o.url}${c.signedURL}${f}`)},{data:c,error:null}}catch(l){if(o.shouldThrowOnError)throw l;if(Le(l))return{data:null,error:l};throw l}}async createSignedUrls(s,r,n){var o=this;try{const l=await Ut(o.fetch,`${o.url}/object/sign/${o.bucketId}`,{expiresIn:r,paths:s},{headers:o.headers}),c=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:l.map(f=>de(de({},f),{},{signedUrl:f.signedURL?encodeURI(`${o.url}${f.signedURL}${c}`):null})),error:null}}catch(l){if(o.shouldThrowOnError)throw l;if(Le(l))return{data:null,error:l};throw l}}download(s,r){const n=typeof r?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(r?.transform||{}),l=o?`?${o}`:"",c=this._getFinalPath(s),f=()=>Es(this.fetch,`${this.url}/${n}/${c}${l}`,{headers:this.headers,noResolveJson:!0});return new Lm(f,this.shouldThrowOnError)}async info(s){var r=this;const n=r._getFinalPath(s);try{return{data:hl(await Es(r.fetch,`${r.url}/object/info/${n}`,{headers:r.headers})),error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(Le(o))return{data:null,error:o};throw o}}async exists(s){var r=this;const n=r._getFinalPath(s);try{return await Im(r.fetch,`${r.url}/object/${n}`,{headers:r.headers}),{data:!0,error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(Le(o)&&o instanceof dl){const l=o.originalError;if([400,404].includes(l?.status))return{data:!1,error:o}}throw o}}getPublicUrl(s,r){const n=this._getFinalPath(s),o=[],l=r?.download?`download=${r.download===!0?"":r.download}`:"";l!==""&&o.push(l);const c=typeof r?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(r?.transform||{});f!==""&&o.push(f);let p=o.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${n}${p}`)}}}async remove(s){var r=this;try{return{data:await Sl(r.fetch,`${r.url}/object/${r.bucketId}`,{prefixes:s},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Le(n))return{data:null,error:n};throw n}}async list(s,r,n){var o=this;try{const l=de(de(de({},Um),r),{},{prefix:s||""});return{data:await Ut(o.fetch,`${o.url}/object/list/${o.bucketId}`,l,{headers:o.headers},n),error:null}}catch(l){if(o.shouldThrowOnError)throw l;if(Le(l))return{data:null,error:l};throw l}}async listV2(s,r){var n=this;try{const o=de({},s);return{data:await Ut(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,o,{headers:n.headers},r),error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(Le(o))return{data:null,error:o};throw o}}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const r=[];return s.width&&r.push(`width=${s.width}`),s.height&&r.push(`height=${s.height}`),s.resize&&r.push(`resize=${s.resize}`),s.format&&r.push(`format=${s.format}`),s.quality&&r.push(`quality=${s.quality}`),r.join("&")}};const hh="2.90.1",fh={"X-Client-Info":`storage-js/${hh}`};var Fm=class{constructor(s,r={},n,o){this.shouldThrowOnError=!1;const l=new URL(s);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=de(de({},fh),r),this.fetch=bl(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(s){var r=this;try{const n=r.listBucketOptionsToQueryString(s);return{data:await Es(r.fetch,`${r.url}/bucket${n}`,{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Le(n))return{data:null,error:n};throw n}}async getBucket(s){var r=this;try{return{data:await Es(r.fetch,`${r.url}/bucket/${s}`,{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Le(n))return{data:null,error:n};throw n}}async createBucket(s,r={public:!1}){var n=this;try{return{data:await Ut(n.fetch,`${n.url}/bucket`,{id:s,name:s,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:n.headers}),error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(Le(o))return{data:null,error:o};throw o}}async updateBucket(s,r){var n=this;try{return{data:await fl(n.fetch,`${n.url}/bucket/${s}`,{id:s,name:s,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:n.headers}),error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(Le(o))return{data:null,error:o};throw o}}async emptyBucket(s){var r=this;try{return{data:await Ut(r.fetch,`${r.url}/bucket/${s}/empty`,{},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Le(n))return{data:null,error:n};throw n}}async deleteBucket(s){var r=this;try{return{data:await Sl(r.fetch,`${r.url}/bucket/${s}`,{},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Le(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(s){const r={};return s&&("limit"in s&&(r.limit=String(s.limit)),"offset"in s&&(r.offset=String(s.offset)),s.search&&(r.search=s.search),s.sortColumn&&(r.sortColumn=s.sortColumn),s.sortOrder&&(r.sortOrder=s.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}},zm=class{constructor(s,r={},n){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=de(de({},fh),r),this.fetch=bl(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(s){var r=this;try{return{data:await Ut(r.fetch,`${r.url}/bucket`,{name:s},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Le(n))return{data:null,error:n};throw n}}async listBuckets(s){var r=this;try{const n=new URLSearchParams;s?.limit!==void 0&&n.set("limit",s.limit.toString()),s?.offset!==void 0&&n.set("offset",s.offset.toString()),s?.sortColumn&&n.set("sortColumn",s.sortColumn),s?.sortOrder&&n.set("sortOrder",s.sortOrder),s?.search&&n.set("search",s.search);const o=n.toString(),l=o?`${r.url}/bucket?${o}`:`${r.url}/bucket`;return{data:await Es(r.fetch,l,{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Le(n))return{data:null,error:n};throw n}}async deleteBucket(s){var r=this;try{return{data:await Sl(r.fetch,`${r.url}/bucket/${s}`,{},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Le(n))return{data:null,error:n};throw n}}from(s){var r=this;if(!Cm(s))throw new Xi("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new jm({baseUrl:this.url,catalogName:s,auth:{type:"custom",getHeaders:async()=>r.headers},fetch:this.fetch}),o=this.shouldThrowOnError;return new Proxy(n,{get(l,c){const f=l[c];return typeof f!="function"?f:async(...p)=>{try{return{data:await f.apply(l,p),error:null}}catch(g){if(o)throw g;return{data:null,error:g}}}}})}};const kl={"X-Client-Info":`storage-js/${hh}`,"Content-Type":"application/json"};var ph=class extends Error{constructor(s){super(s),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function _t(s){return typeof s=="object"&&s!==null&&"__isStorageVectorsError"in s}var Za=class extends ph{constructor(s,r,n){super(s),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Bm=class extends ph{constructor(s,r){super(s),this.name="StorageVectorsUnknownError",this.originalError=r}};const jl=s=>s?(...r)=>s(...r):(...r)=>fetch(...r),Vm=s=>{if(typeof s!="object"||s===null)return!1;const r=Object.getPrototypeOf(s);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},Dd=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),qm=async(s,r,n)=>{if(s&&typeof s=="object"&&"status"in s&&"ok"in s&&typeof s.status=="number"&&!n?.noResolveJson){const o=s.status||500,l=s;if(typeof l.json=="function")l.json().then(c=>{const f=c?.statusCode||c?.code||o+"";r(new Za(Dd(c),o,f))}).catch(()=>{const c=o+"";r(new Za(l.statusText||`HTTP ${o} error`,o,c))});else{const c=o+"";r(new Za(l.statusText||`HTTP ${o} error`,o,c))}}else r(new Bm(Dd(s),s))},Wm=(s,r,n,o)=>{const l={method:s,headers:r?.headers||{}};return o?(Vm(o)?(l.headers=de({"Content-Type":"application/json"},r?.headers),l.body=JSON.stringify(o)):l.body=o,de(de({},l),n)):l};async function Hm(s,r,n,o,l,c){return new Promise((f,p)=>{s(n,Wm(r,o,l,c)).then(g=>{if(!g.ok)throw g;if(o?.noResolveJson)return g;const y=g.headers.get("content-type");return!y||!y.includes("application/json")?{}:g.json()}).then(g=>f(g)).catch(g=>qm(g,p,o))})}async function bt(s,r,n,o,l){return Hm(s,"POST",r,o,l,n)}var Km=class{constructor(s,r={},n){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=de(de({},kl),r),this.fetch=jl(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(s){var r=this;try{return{data:await bt(r.fetch,`${r.url}/CreateIndex`,s,{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(_t(n))return{data:null,error:n};throw n}}async getIndex(s,r){var n=this;try{return{data:await bt(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:s,indexName:r},{headers:n.headers}),error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(_t(o))return{data:null,error:o};throw o}}async listIndexes(s){var r=this;try{return{data:await bt(r.fetch,`${r.url}/ListIndexes`,s,{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(_t(n))return{data:null,error:n};throw n}}async deleteIndex(s,r){var n=this;try{return{data:await bt(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:s,indexName:r},{headers:n.headers})||{},error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(_t(o))return{data:null,error:o};throw o}}},Gm=class{constructor(s,r={},n){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=de(de({},kl),r),this.fetch=jl(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(s){var r=this;try{if(s.vectors.length<1||s.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await bt(r.fetch,`${r.url}/PutVectors`,s,{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(_t(n))return{data:null,error:n};throw n}}async getVectors(s){var r=this;try{return{data:await bt(r.fetch,`${r.url}/GetVectors`,s,{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(_t(n))return{data:null,error:n};throw n}}async listVectors(s){var r=this;try{if(s.segmentCount!==void 0){if(s.segmentCount<1||s.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(s.segmentIndex!==void 0&&(s.segmentIndex<0||s.segmentIndex>=s.segmentCount))throw new Error(`segmentIndex must be between 0 and ${s.segmentCount-1}`)}return{data:await bt(r.fetch,`${r.url}/ListVectors`,s,{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(_t(n))return{data:null,error:n};throw n}}async queryVectors(s){var r=this;try{return{data:await bt(r.fetch,`${r.url}/QueryVectors`,s,{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(_t(n))return{data:null,error:n};throw n}}async deleteVectors(s){var r=this;try{if(s.keys.length<1||s.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await bt(r.fetch,`${r.url}/DeleteVectors`,s,{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(_t(n))return{data:null,error:n};throw n}}},Jm=class{constructor(s,r={},n){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=de(de({},kl),r),this.fetch=jl(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(s){var r=this;try{return{data:await bt(r.fetch,`${r.url}/CreateVectorBucket`,{vectorBucketName:s},{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(_t(n))return{data:null,error:n};throw n}}async getBucket(s){var r=this;try{return{data:await bt(r.fetch,`${r.url}/GetVectorBucket`,{vectorBucketName:s},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(_t(n))return{data:null,error:n};throw n}}async listBuckets(s={}){var r=this;try{return{data:await bt(r.fetch,`${r.url}/ListVectorBuckets`,s,{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(_t(n))return{data:null,error:n};throw n}}async deleteBucket(s){var r=this;try{return{data:await bt(r.fetch,`${r.url}/DeleteVectorBucket`,{vectorBucketName:s},{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(_t(n))return{data:null,error:n};throw n}}},Qm=class extends Jm{constructor(s,r={}){super(s,r.headers||{},r.fetch)}from(s){return new Ym(this.url,this.headers,s,this.fetch)}async createBucket(s){var r=()=>super.createBucket,n=this;return r().call(n,s)}async getBucket(s){var r=()=>super.getBucket,n=this;return r().call(n,s)}async listBuckets(s={}){var r=()=>super.listBuckets,n=this;return r().call(n,s)}async deleteBucket(s){var r=()=>super.deleteBucket,n=this;return r().call(n,s)}},Ym=class extends Km{constructor(s,r,n,o){super(s,r,o),this.vectorBucketName=n}async createIndex(s){var r=()=>super.createIndex,n=this;return r().call(n,de(de({},s),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(s={}){var r=()=>super.listIndexes,n=this;return r().call(n,de(de({},s),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(s){var r=()=>super.getIndex,n=this;return r().call(n,n.vectorBucketName,s)}async deleteIndex(s){var r=()=>super.deleteIndex,n=this;return r().call(n,n.vectorBucketName,s)}index(s){return new Xm(this.url,this.headers,this.vectorBucketName,s,this.fetch)}},Xm=class extends Gm{constructor(s,r,n,o,l){super(s,r,l),this.vectorBucketName=n,this.indexName=o}async putVectors(s){var r=()=>super.putVectors,n=this;return r().call(n,de(de({},s),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(s){var r=()=>super.getVectors,n=this;return r().call(n,de(de({},s),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(s={}){var r=()=>super.listVectors,n=this;return r().call(n,de(de({},s),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(s){var r=()=>super.queryVectors,n=this;return r().call(n,de(de({},s),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(s){var r=()=>super.deleteVectors,n=this;return r().call(n,de(de({},s),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},Zm=class extends Fm{constructor(s,r={},n,o){super(s,r,n,o)}from(s){return new Mm(this.url,this.headers,s,this.fetch)}get vectors(){return new Qm(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new zm(this.url+"/iceberg",this.headers,this.fetch)}};const gh="2.90.1",Nn=30*1e3,pl=3,el=pl*Nn,e0="http://localhost:9999",t0="supabase.auth.token",r0={"X-Client-Info":`gotrue-js/${gh}`},gl="X-Supabase-Api-Version",mh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},n0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,s0=600*1e3;class Ns extends Error{constructor(r,n,o){super(r),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=o}}function oe(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class i0 extends Ns{constructor(r,n,o){super(r,n,o),this.name="AuthApiError",this.status=n,this.code=o}}function o0(s){return oe(s)&&s.name==="AuthApiError"}class Vr extends Ns{constructor(r,n){super(r),this.name="AuthUnknownError",this.originalError=n}}class rr extends Ns{constructor(r,n,o,l){super(r,o,l),this.name=n,this.status=o}}class xt extends rr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function a0(s){return oe(s)&&s.name==="AuthSessionMissingError"}class _n extends rr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Bi extends rr{constructor(r){super(r,"AuthInvalidCredentialsError",400,void 0)}}class Vi extends rr{constructor(r,n=null){super(r,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function l0(s){return oe(s)&&s.name==="AuthImplicitGrantRedirectError"}class Ld extends rr{constructor(r,n=null){super(r,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class u0 extends rr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class ml extends rr{constructor(r,n){super(r,"AuthRetryableFetchError",n,void 0)}}function tl(s){return oe(s)&&s.name==="AuthRetryableFetchError"}class Ud extends rr{constructor(r,n,o){super(r,"AuthWeakPasswordError",n,"weak_password"),this.reasons=o}}class yl extends rr{constructor(r){super(r,"AuthInvalidJwtError",400,"invalid_jwt")}}const Hi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Md=` 	
\r=`.split(""),c0=(()=>{const s=new Array(128);for(let r=0;r<s.length;r+=1)s[r]=-1;for(let r=0;r<Md.length;r+=1)s[Md[r].charCodeAt(0)]=-2;for(let r=0;r<Hi.length;r+=1)s[Hi[r].charCodeAt(0)]=r;return s})();function Fd(s,r,n){if(s!==null)for(r.queue=r.queue<<8|s,r.queuedBits+=8;r.queuedBits>=6;){const o=r.queue>>r.queuedBits-6&63;n(Hi[o]),r.queuedBits-=6}else if(r.queuedBits>0)for(r.queue=r.queue<<6-r.queuedBits,r.queuedBits=6;r.queuedBits>=6;){const o=r.queue>>r.queuedBits-6&63;n(Hi[o]),r.queuedBits-=6}}function yh(s,r,n){const o=c0[s];if(o>-1)for(r.queue=r.queue<<6|o,r.queuedBits+=6;r.queuedBits>=8;)n(r.queue>>r.queuedBits-8&255),r.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function zd(s){const r=[],n=f=>{r.push(String.fromCodePoint(f))},o={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},c=f=>{f0(f,o,n)};for(let f=0;f<s.length;f+=1)yh(s.charCodeAt(f),l,c);return r.join("")}function d0(s,r){if(s<=127){r(s);return}else if(s<=2047){r(192|s>>6),r(128|s&63);return}else if(s<=65535){r(224|s>>12),r(128|s>>6&63),r(128|s&63);return}else if(s<=1114111){r(240|s>>18),r(128|s>>12&63),r(128|s>>6&63),r(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function h0(s,r){for(let n=0;n<s.length;n+=1){let o=s.charCodeAt(n);if(o>55295&&o<=56319){const l=(o-55296)*1024&65535;o=(s.charCodeAt(n+1)-56320&65535|l)+65536,n+=1}d0(o,r)}}function f0(s,r,n){if(r.utf8seq===0){if(s<=127){n(s);return}for(let o=1;o<6;o+=1)if((s>>7-o&1)===0){r.utf8seq=o;break}if(r.utf8seq===2)r.codepoint=s&31;else if(r.utf8seq===3)r.codepoint=s&15;else if(r.utf8seq===4)r.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");r.utf8seq-=1}else if(r.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");r.codepoint=r.codepoint<<6|s&63,r.utf8seq-=1,r.utf8seq===0&&n(r.codepoint)}}function Pn(s){const r=[],n={queue:0,queuedBits:0},o=l=>{r.push(l)};for(let l=0;l<s.length;l+=1)yh(s.charCodeAt(l),n,o);return new Uint8Array(r)}function p0(s){const r=[];return h0(s,n=>r.push(n)),new Uint8Array(r)}function qr(s){const r=[],n={queue:0,queuedBits:0},o=l=>{r.push(l)};return s.forEach(l=>Fd(l,n,o)),Fd(null,n,o),r.join("")}function g0(s){return Math.round(Date.now()/1e3)+s}function m0(){return Symbol("auth-callback")}const tt=()=>typeof window<"u"&&typeof document<"u",Mr={tested:!1,writable:!1},vh=()=>{if(!tt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Mr.tested)return Mr.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),Mr.tested=!0,Mr.writable=!0}catch{Mr.tested=!0,Mr.writable=!1}return Mr.writable};function y0(s){const r={},n=new URL(s);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((l,c)=>{r[c]=l})}catch{}return n.searchParams.forEach((o,l)=>{r[l]=o}),r}const wh=s=>s?(...r)=>s(...r):(...r)=>fetch(...r),v0=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",Tn=async(s,r,n)=>{await s.setItem(r,JSON.stringify(n))},Fr=async(s,r)=>{const n=await s.getItem(r);if(!n)return null;try{return JSON.parse(n)}catch{return n}},et=async(s,r)=>{await s.removeItem(r)};class Zi{constructor(){this.promise=new Zi.promiseConstructor((r,n)=>{this.resolve=r,this.reject=n})}}Zi.promiseConstructor=Promise;function rl(s){const r=s.split(".");if(r.length!==3)throw new yl("Invalid JWT structure");for(let o=0;o<r.length;o++)if(!n0.test(r[o]))throw new yl("JWT not in base64url format");return{header:JSON.parse(zd(r[0])),payload:JSON.parse(zd(r[1])),signature:Pn(r[2]),raw:{header:r[0],payload:r[1]}}}async function w0(s){return await new Promise(r=>{setTimeout(()=>r(null),s)})}function x0(s,r){return new Promise((o,l)=>{(async()=>{for(let c=0;c<1/0;c++)try{const f=await s(c);if(!r(c,null,f)){o(f);return}}catch(f){if(!r(c,f)){l(f);return}}})()})}function _0(s){return("0"+s.toString(16)).substr(-2)}function b0(){const r=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=n.length;let l="";for(let c=0;c<56;c++)l+=n.charAt(Math.floor(Math.random()*o));return l}return crypto.getRandomValues(r),Array.from(r,_0).join("")}async function S0(s){const n=new TextEncoder().encode(s),o=await crypto.subtle.digest("SHA-256",n),l=new Uint8Array(o);return Array.from(l).map(c=>String.fromCharCode(c)).join("")}async function k0(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const n=await S0(s);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function bn(s,r,n=!1){const o=b0();let l=o;n&&(l+="/PASSWORD_RECOVERY"),await Tn(s,`${r}-code-verifier`,l);const c=await k0(o);return[c,o===c?"plain":"s256"]}const j0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function E0(s){const r=s.headers.get(gl);if(!r||!r.match(j0))return null;try{return new Date(`${r}T00:00:00.0Z`)}catch{return null}}function N0(s){if(!s)throw new Error("Missing exp claim");const r=Math.floor(Date.now()/1e3);if(s<=r)throw new Error("JWT has expired")}function T0(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const C0=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Sn(s){if(!C0.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function nl(){const s={};return new Proxy(s,{get:(r,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const o=n.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(r,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(r,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function P0(s,r){return new Proxy(s,{get:(n,o,l)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const c=o.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)"||c==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,o,l)}return!r.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r.value=!0),Reflect.get(n,o,l)}})}function Bd(s){return JSON.parse(JSON.stringify(s))}const zr=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),R0=[502,503,504];async function Vd(s){var r;if(!v0(s))throw new ml(zr(s),0);if(R0.includes(s.status))throw new ml(zr(s),s.status);let n;try{n=await s.json()}catch(c){throw new Vr(zr(c),c)}let o;const l=E0(s);if(l&&l.getTime()>=mh["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?o=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(o=n.error_code),o){if(o==="weak_password")throw new Ud(zr(n),s.status,((r=n.weak_password)===null||r===void 0?void 0:r.reasons)||[]);if(o==="session_not_found")throw new xt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((c,f)=>c&&typeof f=="string",!0))throw new Ud(zr(n),s.status,n.weak_password.reasons);throw new i0(zr(n),s.status||500,o)}const A0=(s,r,n,o)=>{const l={method:s,headers:r?.headers||{}};return s==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},r?.headers),l.body=JSON.stringify(o),Object.assign(Object.assign({},l),n))};async function ce(s,r,n,o){var l;const c=Object.assign({},o?.headers);c[gl]||(c[gl]=mh["2024-01-01"].name),o?.jwt&&(c.Authorization=`Bearer ${o.jwt}`);const f=(l=o?.query)!==null&&l!==void 0?l:{};o?.redirectTo&&(f.redirect_to=o.redirectTo);const p=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",g=await O0(s,r,n+p,{headers:c,noResolveJson:o?.noResolveJson},{},o?.body);return o?.xform?o?.xform(g):{data:Object.assign({},g),error:null}}async function O0(s,r,n,o,l,c){const f=A0(r,o,l,c);let p;try{p=await s(n,Object.assign({},f))}catch(g){throw console.error(g),new ml(zr(g),0)}if(p.ok||await Vd(p),o?.noResolveJson)return p;try{return await p.json()}catch(g){await Vd(g)}}function Lt(s){var r;let n=null;D0(s)&&(n=Object.assign({},s),s.expires_at||(n.expires_at=g0(s.expires_in)));const o=(r=s.user)!==null&&r!==void 0?r:s;return{data:{session:n,user:o},error:null}}function qd(s){const r=Lt(s);return!r.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((n,o)=>n&&typeof o=="string",!0)&&(r.data.weak_password=s.weak_password),r}function jr(s){var r;return{data:{user:(r=s.user)!==null&&r!==void 0?r:s},error:null}}function $0(s){return{data:s,error:null}}function I0(s){const{action_link:r,email_otp:n,hashed_token:o,redirect_to:l,verification_type:c}=s,f=Yi(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:r,email_otp:n,hashed_token:o,redirect_to:l,verification_type:c},g=Object.assign({},f);return{data:{properties:p,user:g},error:null}}function Wd(s){return s}function D0(s){return s.access_token&&s.refresh_token&&s.expires_in}const sl=["global","local","others"];class L0{constructor({url:r="",headers:n={},fetch:o}){this.url=r,this.headers=n,this.fetch=wh(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(r,n=sl[0]){if(sl.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${sl.join(", ")}`);try{return await ce(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(o){if(oe(o))return{data:null,error:o};throw o}}async inviteUserByEmail(r,n={}){try{return await ce(this.fetch,"POST",`${this.url}/invite`,{body:{email:r,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:jr})}catch(o){if(oe(o))return{data:{user:null},error:o};throw o}}async generateLink(r){try{const{options:n}=r,o=Yi(r,["options"]),l=Object.assign(Object.assign({},o),n);return"newEmail"in o&&(l.new_email=o?.newEmail,delete l.newEmail),await ce(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:I0,redirectTo:n?.redirectTo})}catch(n){if(oe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(r){try{return await ce(this.fetch,"POST",`${this.url}/admin/users`,{body:r,headers:this.headers,xform:jr})}catch(n){if(oe(n))return{data:{user:null},error:n};throw n}}async listUsers(r){var n,o,l,c,f,p,g;try{const y={nextPage:null,lastPage:0,total:0},x=await ce(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(n=r?.page)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:"",per_page:(c=(l=r?.perPage)===null||l===void 0?void 0:l.toString())!==null&&c!==void 0?c:""},xform:Wd});if(x.error)throw x.error;const j=await x.json(),b=(f=x.headers.get("x-total-count"))!==null&&f!==void 0?f:0,T=(g=(p=x.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&g!==void 0?g:[];return T.length>0&&(T.forEach(A=>{const O=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),$=JSON.parse(A.split(";")[1].split("=")[1]);y[`${$}Page`]=O}),y.total=parseInt(b)),{data:Object.assign(Object.assign({},j),y),error:null}}catch(y){if(oe(y))return{data:{users:[]},error:y};throw y}}async getUserById(r){Sn(r);try{return await ce(this.fetch,"GET",`${this.url}/admin/users/${r}`,{headers:this.headers,xform:jr})}catch(n){if(oe(n))return{data:{user:null},error:n};throw n}}async updateUserById(r,n){Sn(r);try{return await ce(this.fetch,"PUT",`${this.url}/admin/users/${r}`,{body:n,headers:this.headers,xform:jr})}catch(o){if(oe(o))return{data:{user:null},error:o};throw o}}async deleteUser(r,n=!1){Sn(r);try{return await ce(this.fetch,"DELETE",`${this.url}/admin/users/${r}`,{headers:this.headers,body:{should_soft_delete:n},xform:jr})}catch(o){if(oe(o))return{data:{user:null},error:o};throw o}}async _listFactors(r){Sn(r.userId);try{const{data:n,error:o}=await ce(this.fetch,"GET",`${this.url}/admin/users/${r.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:n,error:o}}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _deleteFactor(r){Sn(r.userId),Sn(r.id);try{return{data:await ce(this.fetch,"DELETE",`${this.url}/admin/users/${r.userId}/factors/${r.id}`,{headers:this.headers}),error:null}}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _listOAuthClients(r){var n,o,l,c,f,p,g;try{const y={nextPage:null,lastPage:0,total:0},x=await ce(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(n=r?.page)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:"",per_page:(c=(l=r?.perPage)===null||l===void 0?void 0:l.toString())!==null&&c!==void 0?c:""},xform:Wd});if(x.error)throw x.error;const j=await x.json(),b=(f=x.headers.get("x-total-count"))!==null&&f!==void 0?f:0,T=(g=(p=x.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&g!==void 0?g:[];return T.length>0&&(T.forEach(A=>{const O=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),$=JSON.parse(A.split(";")[1].split("=")[1]);y[`${$}Page`]=O}),y.total=parseInt(b)),{data:Object.assign(Object.assign({},j),y),error:null}}catch(y){if(oe(y))return{data:{clients:[]},error:y};throw y}}async _createOAuthClient(r){try{return await ce(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _getOAuthClient(r){try{return await ce(this.fetch,"GET",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _updateOAuthClient(r,n){try{return await ce(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${r}`,{body:n,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(oe(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(r){try{return await ce(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(r){try{return await ce(this.fetch,"POST",`${this.url}/admin/oauth/clients/${r}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(oe(n))return{data:null,error:n};throw n}}}function Hd(s={}){return{getItem:r=>s[r]||null,setItem:(r,n)=>{s[r]=n},removeItem:r=>{delete s[r]}}}const kn={debug:!!(globalThis&&vh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class xh extends Error{constructor(r){super(r),this.isAcquireTimeout=!0}}class U0 extends xh{}async function M0(s,r,n){kn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,r);const o=new globalThis.AbortController;return r>0&&setTimeout(()=>{o.abort(),kn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},r),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,r===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async l=>{if(l){kn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,l.name);try{return await n()}finally{kn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,l.name)}}else{if(r===0)throw kn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new U0(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(kn.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function F0(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function _h(s){if(!/^0x[a-fA-F0-9]{40}$/.test(s))throw new Error(`@supabase/auth-js: Address "${s}" is invalid.`);return s.toLowerCase()}function z0(s){return parseInt(s,16)}function B0(s){const r=new TextEncoder().encode(s);return"0x"+Array.from(r,o=>o.toString(16).padStart(2,"0")).join("")}function V0(s){var r;const{chainId:n,domain:o,expirationTime:l,issuedAt:c=new Date,nonce:f,notBefore:p,requestId:g,resources:y,scheme:x,uri:j,version:b}=s;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!j)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(b!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${b}`);if(!((r=s.statement)===null||r===void 0)&&r.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${s.statement}`)}const T=_h(s.address),A=x?`${x}://${o}`:o,O=s.statement?`${s.statement}
`:"",$=`${A} wants you to sign in with your Ethereum account:
${T}

${O}`;let M=`URI: ${j}
Version: ${b}
Chain ID: ${n}${f?`
Nonce: ${f}`:""}
Issued At: ${c.toISOString()}`;if(l&&(M+=`
Expiration Time: ${l.toISOString()}`),p&&(M+=`
Not Before: ${p.toISOString()}`),g&&(M+=`
Request ID: ${g}`),y){let q=`
Resources:`;for(const D of y){if(!D||typeof D!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${D}`);q+=`
- ${D}`}M+=q}return`${$}
${M}`}class We extends Error{constructor({message:r,code:n,cause:o,name:l}){var c;super(r,{cause:o}),this.__isWebAuthnError=!0,this.name=(c=l??(o instanceof Error?o.name:void 0))!==null&&c!==void 0?c:"Unknown Error",this.code=n}}class Ki extends We{constructor(r,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:r}),this.name="WebAuthnUnknownError",this.originalError=n}}function q0({error:s,options:r}){var n,o,l;const{publicKey:c}=r;if(!c)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(r.signal instanceof AbortSignal)return new We({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else if(s.name==="ConstraintError"){if(((n=c.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new We({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:s});if(r.mediation==="conditional"&&((o=c.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new We({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:s});if(((l=c.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new We({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:s})}else{if(s.name==="InvalidStateError")return new We({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:s});if(s.name==="NotAllowedError")return new We({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="NotSupportedError")return c.pubKeyCredParams.filter(p=>p.type==="public-key").length===0?new We({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:s}):new We({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:s});if(s.name==="SecurityError"){const f=window.location.hostname;if(bh(f)){if(c.rp.id!==f)return new We({message:`The RP ID "${c.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new We({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="TypeError"){if(c.user.id.byteLength<1||c.user.id.byteLength>64)return new We({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:s})}else if(s.name==="UnknownError")return new We({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new We({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}function W0({error:s,options:r}){const{publicKey:n}=r;if(!n)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(r.signal instanceof AbortSignal)return new We({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else{if(s.name==="NotAllowedError")return new We({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="SecurityError"){const o=window.location.hostname;if(bh(o)){if(n.rpId!==o)return new We({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new We({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="UnknownError")return new We({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new We({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}class H0{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const r=new AbortController;return this.controller=r,r.signal}cancelCeremony(){if(this.controller){const r=new Error("Manually cancelling existing WebAuthn API call");r.name="AbortError",this.controller.abort(r),this.controller=void 0}}}const K0=new H0;function G0(s){if(!s)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(s);const{challenge:r,user:n,excludeCredentials:o}=s,l=Yi(s,["challenge","user","excludeCredentials"]),c=Pn(r).buffer,f=Object.assign(Object.assign({},n),{id:Pn(n.id).buffer}),p=Object.assign(Object.assign({},l),{challenge:c,user:f});if(o&&o.length>0){p.excludeCredentials=new Array(o.length);for(let g=0;g<o.length;g++){const y=o[g];p.excludeCredentials[g]=Object.assign(Object.assign({},y),{id:Pn(y.id).buffer,type:y.type||"public-key",transports:y.transports})}}return p}function J0(s){if(!s)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(s);const{challenge:r,allowCredentials:n}=s,o=Yi(s,["challenge","allowCredentials"]),l=Pn(r).buffer,c=Object.assign(Object.assign({},o),{challenge:l});if(n&&n.length>0){c.allowCredentials=new Array(n.length);for(let f=0;f<n.length;f++){const p=n[f];c.allowCredentials[f]=Object.assign(Object.assign({},p),{id:Pn(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return c}function Q0(s){var r;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const n=s;return{id:s.id,rawId:s.id,response:{attestationObject:qr(new Uint8Array(s.response.attestationObject)),clientDataJSON:qr(new Uint8Array(s.response.clientDataJSON))},type:"public-key",clientExtensionResults:s.getClientExtensionResults(),authenticatorAttachment:(r=n.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function Y0(s){var r;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const n=s,o=s.getClientExtensionResults(),l=s.response;return{id:s.id,rawId:s.id,response:{authenticatorData:qr(new Uint8Array(l.authenticatorData)),clientDataJSON:qr(new Uint8Array(l.clientDataJSON)),signature:qr(new Uint8Array(l.signature)),userHandle:l.userHandle?qr(new Uint8Array(l.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(r=n.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function bh(s){return s==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(s)}function Kd(){var s,r;return!!(tt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((s=navigator?.credentials)===null||s===void 0?void 0:s.create)=="function"&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.get)=="function")}async function X0(s){try{const r=await navigator.credentials.create(s);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new Ki("Browser returned unexpected credential type",r)}:{data:null,error:new Ki("Empty credential response",r)}}catch(r){return{data:null,error:q0({error:r,options:s})}}}async function Z0(s){try{const r=await navigator.credentials.get(s);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new Ki("Browser returned unexpected credential type",r)}:{data:null,error:new Ki("Empty credential response",r)}}catch(r){return{data:null,error:W0({error:r,options:s})}}}const ey={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},ty={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Gi(...s){const r=l=>l!==null&&typeof l=="object"&&!Array.isArray(l),n=l=>l instanceof ArrayBuffer||ArrayBuffer.isView(l),o={};for(const l of s)if(l)for(const c in l){const f=l[c];if(f!==void 0)if(Array.isArray(f))o[c]=f;else if(n(f))o[c]=f;else if(r(f)){const p=o[c];r(p)?o[c]=Gi(p,f):o[c]=Gi(f)}else o[c]=f}return o}function ry(s,r){return Gi(ey,s,r||{})}function ny(s,r){return Gi(ty,s,r||{})}class sy{constructor(r){this.client=r,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(r){return this.client.mfa.enroll(Object.assign(Object.assign({},r),{factorType:"webauthn"}))}async _challenge({factorId:r,webauthn:n,friendlyName:o,signal:l},c){try{const{data:f,error:p}=await this.client.mfa.challenge({factorId:r,webauthn:n});if(!f)return{data:null,error:p};const g=l??K0.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:y}=f.webauthn.credential_options.publicKey;y.name||(y.name=`${y.id}:${o}`),y.displayName||(y.displayName=y.name)}switch(f.webauthn.type){case"create":{const y=ry(f.webauthn.credential_options.publicKey,c?.create),{data:x,error:j}=await X0({publicKey:y,signal:g});return x?{data:{factorId:r,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:x}},error:null}:{data:null,error:j}}case"request":{const y=ny(f.webauthn.credential_options.publicKey,c?.request),{data:x,error:j}=await Z0(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:y,signal:g}));return x?{data:{factorId:r,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:x}},error:null}:{data:null,error:j}}}}catch(f){return oe(f)?{data:null,error:f}:{data:null,error:new Vr("Unexpected error in challenge",f)}}}async _verify({challengeId:r,factorId:n,webauthn:o}){return this.client.mfa.verify({factorId:n,challengeId:r,webauthn:o})}async _authenticate({factorId:r,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:l}={}},c){if(!n)return{data:null,error:new Ns("rpId is required for WebAuthn authentication")};try{if(!Kd())return{data:null,error:new Vr("Browser does not support WebAuthn",null)};const{data:f,error:p}=await this.challenge({factorId:r,webauthn:{rpId:n,rpOrigins:o},signal:l},{request:c});if(!f)return{data:null,error:p};const{webauthn:g}=f;return this._verify({factorId:r,challengeId:f.challengeId,webauthn:{type:g.type,rpId:n,rpOrigins:o,credential_response:g.credential_response}})}catch(f){return oe(f)?{data:null,error:f}:{data:null,error:new Vr("Unexpected error in authenticate",f)}}}async _register({friendlyName:r,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:l}={}},c){if(!n)return{data:null,error:new Ns("rpId is required for WebAuthn registration")};try{if(!Kd())return{data:null,error:new Vr("Browser does not support WebAuthn",null)};const{data:f,error:p}=await this._enroll({friendlyName:r});if(!f)return await this.client.mfa.listFactors().then(x=>{var j;return(j=x.data)===null||j===void 0?void 0:j.all.find(b=>b.factor_type==="webauthn"&&b.friendly_name===r&&b.status!=="unverified")}).then(x=>x?this.client.mfa.unenroll({factorId:x?.id}):void 0),{data:null,error:p};const{data:g,error:y}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:n,rpOrigins:o},signal:l},{create:c});return g?this._verify({factorId:f.id,challengeId:g.challengeId,webauthn:{rpId:n,rpOrigins:o,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:y}}catch(f){return oe(f)?{data:null,error:f}:{data:null,error:new Vr("Unexpected error in register",f)}}}}F0();const iy={url:e0,storageKey:t0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:r0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Gd(s,r,n){return await n()}const jn={};class Ts{get jwks(){var r,n;return(n=(r=jn[this.storageKey])===null||r===void 0?void 0:r.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(r){jn[this.storageKey]=Object.assign(Object.assign({},jn[this.storageKey]),{jwks:r})}get jwks_cached_at(){var r,n;return(n=(r=jn[this.storageKey])===null||r===void 0?void 0:r.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(r){jn[this.storageKey]=Object.assign(Object.assign({},jn[this.storageKey]),{cachedAt:r})}constructor(r){var n,o,l;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const c=Object.assign(Object.assign({},iy),r);if(this.storageKey=c.storageKey,this.instanceID=(n=Ts.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Ts.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.instanceID>0&&tt()){const f=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(f),this.logDebugMessages&&console.trace(f)}if(this.persistSession=c.persistSession,this.autoRefreshToken=c.autoRefreshToken,this.admin=new L0({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=wh(c.fetch),this.lock=c.lock||Gd,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,this.throwOnError=c.throwOnError,this.lockAcquireTimeout=c.lockAcquireTimeout,c.lock?this.lock=c.lock:this.persistSession&&tt()&&(!((o=globalThis?.navigator)===null||o===void 0)&&o.locks)?this.lock=M0:this.lock=Gd,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new sy(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:vh()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Hd(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=Hd(this.memoryStorage)),tt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(f){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",f)}(l=this.broadcastChannel)===null||l===void 0||l.addEventListener("message",async f=>{this._debug("received broadcast notification from other tab or client",f),await this._notifyAllSubscribers(f.data.event,f.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(r){if(this.throwOnError&&r&&r.error)throw r.error;return r}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${gh}) ${new Date().toISOString()}`}_debug(...r){return this.logDebugMessages&&this.logger(this._logPrefix(),...r),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var r;try{let n={},o="none";if(tt()&&(n=y0(window.location.href),this._isImplicitGrantCallback(n)?o="implicit":await this._isPKCECallback(n)&&(o="pkce")),tt()&&this.detectSessionInUrl&&o!=="none"){const{data:l,error:c}=await this._getSessionFromURL(n,o);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),l0(c)){const g=(r=c.details)===null||r===void 0?void 0:r.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:c}}return{error:c}}const{session:f,redirectType:p}=l;return this._debug("#_initialize()","detected session in URL",f,"redirect type",p),await this._saveSession(f),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return oe(n)?this._returnResult({error:n}):this._returnResult({error:new Vr("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(r){var n,o,l;try{const c=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(n=r?.options)===null||n===void 0?void 0:n.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(l=r?.options)===null||l===void 0?void 0:l.captchaToken}},xform:Lt}),{data:f,error:p}=c;if(p||!f)return this._returnResult({data:{user:null,session:null},error:p});const g=f.session,y=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:y,session:g},error:null})}catch(c){if(oe(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signUp(r){var n,o,l;try{let c;if("email"in r){const{email:x,password:j,options:b}=r;let T=null,A=null;this.flowType==="pkce"&&([T,A]=await bn(this.storage,this.storageKey)),c=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b?.emailRedirectTo,body:{email:x,password:j,data:(n=b?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:b?.captchaToken},code_challenge:T,code_challenge_method:A},xform:Lt})}else if("phone"in r){const{phone:x,password:j,options:b}=r;c=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:j,data:(o=b?.data)!==null&&o!==void 0?o:{},channel:(l=b?.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:b?.captchaToken}},xform:Lt})}else throw new Bi("You must provide either an email or phone number and a password");const{data:f,error:p}=c;if(p||!f)return await et(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:p});const g=f.session,y=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:y,session:g},error:null})}catch(c){if(await et(this.storage,`${this.storageKey}-code-verifier`),oe(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithPassword(r){try{let n;if("email"in r){const{email:c,password:f,options:p}=r;n=await ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:f,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:qd})}else if("phone"in r){const{phone:c,password:f,options:p}=r;n=await ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:f,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:qd})}else throw new Bi("You must provide either an email or phone number and a password");const{data:o,error:l}=n;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o||!o.session||!o.user){const c=new _n;return this._returnResult({data:{user:null,session:null},error:c})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:l})}catch(n){if(oe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(r){var n,o,l,c;return await this._handleProviderSignIn(r.provider,{redirectTo:(n=r.options)===null||n===void 0?void 0:n.redirectTo,scopes:(o=r.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=r.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(c=r.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(r){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(r))}async signInWithWeb3(r){const{chain:n}=r;switch(n){case"ethereum":return await this.signInWithEthereum(r);case"solana":return await this.signInWithSolana(r);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(r){var n,o,l,c,f,p,g,y,x,j,b;let T,A;if("message"in r)T=r.message,A=r.signature;else{const{chain:O,wallet:$,statement:M,options:q}=r;let D;if(tt())if(typeof $=="object")D=$;else{const ye=window;if("ethereum"in ye&&typeof ye.ethereum=="object"&&"request"in ye.ethereum&&typeof ye.ethereum.request=="function")D=ye.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof $!="object"||!q?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=$}const U=new URL((n=q?.url)!==null&&n!==void 0?n:window.location.href),re=await D.request({method:"eth_requestAccounts"}).then(ye=>ye).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!re||re.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const J=_h(re[0]);let F=(o=q?.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!F){const ye=await D.request({method:"eth_chainId"});F=z0(ye)}const fe={domain:U.host,address:J,statement:M,uri:U.href,version:"1",chainId:F,nonce:(l=q?.signInWithEthereum)===null||l===void 0?void 0:l.nonce,issuedAt:(f=(c=q?.signInWithEthereum)===null||c===void 0?void 0:c.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(p=q?.signInWithEthereum)===null||p===void 0?void 0:p.expirationTime,notBefore:(g=q?.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(y=q?.signInWithEthereum)===null||y===void 0?void 0:y.requestId,resources:(x=q?.signInWithEthereum)===null||x===void 0?void 0:x.resources};T=V0(fe),A=await D.request({method:"personal_sign",params:[B0(T),J]})}try{const{data:O,error:$}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:T,signature:A},!((j=r.options)===null||j===void 0)&&j.captchaToken?{gotrue_meta_security:{captcha_token:(b=r.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Lt});if($)throw $;if(!O||!O.session||!O.user){const M=new _n;return this._returnResult({data:{user:null,session:null},error:M})}return O.session&&(await this._saveSession(O.session),await this._notifyAllSubscribers("SIGNED_IN",O.session)),this._returnResult({data:Object.assign({},O),error:$})}catch(O){if(oe(O))return this._returnResult({data:{user:null,session:null},error:O});throw O}}async signInWithSolana(r){var n,o,l,c,f,p,g,y,x,j,b,T;let A,O;if("message"in r)A=r.message,O=r.signature;else{const{chain:$,wallet:M,statement:q,options:D}=r;let U;if(tt())if(typeof M=="object")U=M;else{const J=window;if("solana"in J&&typeof J.solana=="object"&&("signIn"in J.solana&&typeof J.solana.signIn=="function"||"signMessage"in J.solana&&typeof J.solana.signMessage=="function"))U=J.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof M!="object"||!D?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");U=M}const re=new URL((n=D?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in U&&U.signIn){const J=await U.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},D?.signInWithSolana),{version:"1",domain:re.host,uri:re.href}),q?{statement:q}:null));let F;if(Array.isArray(J)&&J[0]&&typeof J[0]=="object")F=J[0];else if(J&&typeof J=="object"&&"signedMessage"in J&&"signature"in J)F=J;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in F&&"signature"in F&&(typeof F.signedMessage=="string"||F.signedMessage instanceof Uint8Array)&&F.signature instanceof Uint8Array)A=typeof F.signedMessage=="string"?F.signedMessage:new TextDecoder().decode(F.signedMessage),O=F.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in U)||typeof U.signMessage!="function"||!("publicKey"in U)||typeof U!="object"||!U.publicKey||!("toBase58"in U.publicKey)||typeof U.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");A=[`${re.host} wants you to sign in with your Solana account:`,U.publicKey.toBase58(),...q?["",q,""]:[""],"Version: 1",`URI: ${re.href}`,`Issued At: ${(l=(o=D?.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((c=D?.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${D.signInWithSolana.notBefore}`]:[],...!((f=D?.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${D.signInWithSolana.expirationTime}`]:[],...!((p=D?.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${D.signInWithSolana.chainId}`]:[],...!((g=D?.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${D.signInWithSolana.nonce}`]:[],...!((y=D?.signInWithSolana)===null||y===void 0)&&y.requestId?[`Request ID: ${D.signInWithSolana.requestId}`]:[],...!((j=(x=D?.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||j===void 0)&&j.length?["Resources",...D.signInWithSolana.resources.map(F=>`- ${F}`)]:[]].join(`
`);const J=await U.signMessage(new TextEncoder().encode(A),"utf8");if(!J||!(J instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");O=J}}try{const{data:$,error:M}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:A,signature:qr(O)},!((b=r.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(T=r.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:Lt});if(M)throw M;if(!$||!$.session||!$.user){const q=new _n;return this._returnResult({data:{user:null,session:null},error:q})}return $.session&&(await this._saveSession($.session),await this._notifyAllSubscribers("SIGNED_IN",$.session)),this._returnResult({data:Object.assign({},$),error:M})}catch($){if(oe($))return this._returnResult({data:{user:null,session:null},error:$});throw $}}async _exchangeCodeForSession(r){const n=await Fr(this.storage,`${this.storageKey}-code-verifier`),[o,l]=(n??"").split("/");try{if(!o&&this.flowType==="pkce")throw new u0;const{data:c,error:f}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:r,code_verifier:o},xform:Lt});if(await et(this.storage,`${this.storageKey}-code-verifier`),f)throw f;if(!c||!c.session||!c.user){const p=new _n;return this._returnResult({data:{user:null,session:null,redirectType:null},error:p})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign(Object.assign({},c),{redirectType:l??null}),error:f})}catch(c){if(await et(this.storage,`${this.storageKey}-code-verifier`),oe(c))return this._returnResult({data:{user:null,session:null,redirectType:null},error:c});throw c}}async signInWithIdToken(r){try{const{options:n,provider:o,token:l,access_token:c,nonce:f}=r,p=await ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:l,access_token:c,nonce:f,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:Lt}),{data:g,error:y}=p;if(y)return this._returnResult({data:{user:null,session:null},error:y});if(!g||!g.session||!g.user){const x=new _n;return this._returnResult({data:{user:null,session:null},error:x})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:y})}catch(n){if(oe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(r){var n,o,l,c,f;try{if("email"in r){const{email:p,options:g}=r;let y=null,x=null;this.flowType==="pkce"&&([y,x]=await bn(this.storage,this.storageKey));const{error:j}=await ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(n=g?.data)!==null&&n!==void 0?n:{},create_user:(o=g?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:y,code_challenge_method:x},redirectTo:g?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:j})}if("phone"in r){const{phone:p,options:g}=r,{data:y,error:x}=await ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(l=g?.data)!==null&&l!==void 0?l:{},create_user:(c=g?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},channel:(f=g?.channel)!==null&&f!==void 0?f:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:y?.message_id},error:x})}throw new Bi("You must provide either an email or phone number.")}catch(p){if(await et(this.storage,`${this.storageKey}-code-verifier`),oe(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async verifyOtp(r){var n,o;try{let l,c;"options"in r&&(l=(n=r.options)===null||n===void 0?void 0:n.redirectTo,c=(o=r.options)===null||o===void 0?void 0:o.captchaToken);const{data:f,error:p}=await ce(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},r),{gotrue_meta_security:{captcha_token:c}}),redirectTo:l,xform:Lt});if(p)throw p;if(!f)throw new Error("An error occurred on token verification.");const g=f.session,y=f.user;return g?.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(r.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:y,session:g},error:null})}catch(l){if(oe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithSSO(r){var n,o,l,c,f;try{let p=null,g=null;this.flowType==="pkce"&&([p,g]=await bn(this.storage,this.storageKey));const y=await ce(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in r?{provider_id:r.providerId}:null),"domain"in r?{domain:r.domain}:null),{redirect_to:(o=(n=r.options)===null||n===void 0?void 0:n.redirectTo)!==null&&o!==void 0?o:void 0}),!((l=r?.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:r.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:p,code_challenge_method:g}),headers:this.headers,xform:$0});return!((c=y.data)===null||c===void 0)&&c.url&&tt()&&!(!((f=r.options)===null||f===void 0)&&f.skipBrowserRedirect)&&window.location.assign(y.data.url),this._returnResult(y)}catch(p){if(await et(this.storage,`${this.storageKey}-code-verifier`),oe(p))return this._returnResult({data:null,error:p});throw p}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async r=>{const{data:{session:n},error:o}=r;if(o)throw o;if(!n)throw new xt;const{error:l}=await ce(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:l})})}catch(r){if(oe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async resend(r){try{const n=`${this.url}/resend`;if("email"in r){const{email:o,type:l,options:c}=r,{error:f}=await ce(this.fetch,"POST",n,{headers:this.headers,body:{email:o,type:l,gotrue_meta_security:{captcha_token:c?.captchaToken}},redirectTo:c?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}else if("phone"in r){const{phone:o,type:l,options:c}=r,{data:f,error:p}=await ce(this.fetch,"POST",n,{headers:this.headers,body:{phone:o,type:l,gotrue_meta_security:{captcha_token:c?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:f?.message_id},error:p})}throw new Bi("You must provide either an email or phone number and a type")}catch(n){if(oe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(r,n){this._debug("#_acquireLock","begin",r);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await o,await n()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,r,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=n();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(r){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await r(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let r=null;const n=await Fr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?r=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!r)return{data:{session:null},error:null};const o=r.expires_at?r.expires_at*1e3-Date.now()<el:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",r.expires_at),!o){if(this.userStorage){const f=await Fr(this.userStorage,this.storageKey+"-user");f?.user?r.user=f.user:r.user=nl()}if(this.storage.isServer&&r.user&&!r.user.__isUserNotAvailableProxy){const f={value:this.suppressGetSessionWarning};r.user=P0(r.user,f),f.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:r},error:null}}const{data:l,error:c}=await this._callRefreshToken(r.refresh_token);return c?this._returnResult({data:{session:null},error:c}):this._returnResult({data:{session:l},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(r){if(r)return await this._getUser(r);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(r){try{return r?await ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:r,xform:jr}):await this._useSession(async n=>{var o,l,c;const{data:f,error:p}=n;if(p)throw p;return!(!((o=f.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new xt}:await ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(l=f.session)===null||l===void 0?void 0:l.access_token)!==null&&c!==void 0?c:void 0,xform:jr})})}catch(n){if(oe(n))return a0(n)&&(await this._removeSession(),await et(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(r,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(r,n))}async _updateUser(r,n={}){try{return await this._useSession(async o=>{const{data:l,error:c}=o;if(c)throw c;if(!l.session)throw new xt;const f=l.session;let p=null,g=null;this.flowType==="pkce"&&r.email!=null&&([p,g]=await bn(this.storage,this.storageKey));const{data:y,error:x}=await ce(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},r),{code_challenge:p,code_challenge_method:g}),jwt:f.access_token,xform:jr});if(x)throw x;return f.user=y.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),this._returnResult({data:{user:f.user},error:null})})}catch(o){if(await et(this.storage,`${this.storageKey}-code-verifier`),oe(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(r){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(r))}async _setSession(r){try{if(!r.access_token||!r.refresh_token)throw new xt;const n=Date.now()/1e3;let o=n,l=!0,c=null;const{payload:f}=rl(r.access_token);if(f.exp&&(o=f.exp,l=o<=n),l){const{data:p,error:g}=await this._callRefreshToken(r.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!p)return{data:{user:null,session:null},error:null};c=p}else{const{data:p,error:g}=await this._getUser(r.access_token);if(g)throw g;c={access_token:r.access_token,refresh_token:r.refresh_token,user:p.user,token_type:"bearer",expires_in:o-n,expires_at:o},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return this._returnResult({data:{user:c.user,session:c},error:null})}catch(n){if(oe(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(r){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(r))}async _refreshSession(r){try{return await this._useSession(async n=>{var o;if(!r){const{data:f,error:p}=n;if(p)throw p;r=(o=f.session)!==null&&o!==void 0?o:void 0}if(!r?.refresh_token)throw new xt;const{data:l,error:c}=await this._callRefreshToken(r.refresh_token);return c?this._returnResult({data:{user:null,session:null},error:c}):l?this._returnResult({data:{user:l.user,session:l},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(oe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(r,n){try{if(!tt())throw new Vi("No browser detected.");if(r.error||r.error_description||r.error_code)throw new Vi(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Ld("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Vi("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!r.code)throw new Ld("No code detected.");const{data:q,error:D}=await this._exchangeCodeForSession(r.code);if(D)throw D;const U=new URL(window.location.href);return U.searchParams.delete("code"),window.history.replaceState(window.history.state,"",U.toString()),{data:{session:q.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:l,access_token:c,refresh_token:f,expires_in:p,expires_at:g,token_type:y}=r;if(!c||!p||!f||!y)throw new Vi("No session defined in URL");const x=Math.round(Date.now()/1e3),j=parseInt(p);let b=x+j;g&&(b=parseInt(g));const T=b-x;T*1e3<=Nn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${T}s, should have been closer to ${j}s`);const A=b-j;x-A>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",A,b,x):x-A<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",A,b,x);const{data:O,error:$}=await this._getUser(c);if($)throw $;const M={provider_token:o,provider_refresh_token:l,access_token:c,expires_in:j,expires_at:b,refresh_token:f,token_type:y,user:O.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:M,redirectType:r.type},error:null})}catch(o){if(oe(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(r){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),r):!!(r.access_token||r.error_description)}async _isPKCECallback(r){const n=await Fr(this.storage,`${this.storageKey}-code-verifier`);return!!(r.code&&n)}async signOut(r={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(r))}async _signOut({scope:r}={scope:"global"}){return await this._useSession(async n=>{var o;const{data:l,error:c}=n;if(c)return this._returnResult({error:c});const f=(o=l.session)===null||o===void 0?void 0:o.access_token;if(f){const{error:p}=await this.admin.signOut(f,r);if(p&&!(o0(p)&&(p.status===404||p.status===401||p.status===403)))return this._returnResult({error:p})}return r!=="others"&&(await this._removeSession(),await et(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(r){const n=m0(),o={id:n,callback:r,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,o),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:o}}}async _emitInitialSession(r){return await this._useSession(async n=>{var o,l;try{const{data:{session:c},error:f}=n;if(f)throw f;await((o=this.stateChangeEmitters.get(r))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",r,"session",c)}catch(c){await((l=this.stateChangeEmitters.get(r))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",r,"error",c),console.error(c)}})}async resetPasswordForEmail(r,n={}){let o=null,l=null;this.flowType==="pkce"&&([o,l]=await bn(this.storage,this.storageKey,!0));try{return await ce(this.fetch,"POST",`${this.url}/recover`,{body:{email:r,code_challenge:o,code_challenge_method:l,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(c){if(await et(this.storage,`${this.storageKey}-code-verifier`),oe(c))return this._returnResult({data:null,error:c});throw c}}async getUserIdentities(){var r;try{const{data:n,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(r=n.user.identities)!==null&&r!==void 0?r:[]},error:null})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(r){return"token"in r?this.linkIdentityIdToken(r):this.linkIdentityOAuth(r)}async linkIdentityOAuth(r){var n;try{const{data:o,error:l}=await this._useSession(async c=>{var f,p,g,y,x;const{data:j,error:b}=c;if(b)throw b;const T=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,r.provider,{redirectTo:(f=r.options)===null||f===void 0?void 0:f.redirectTo,scopes:(p=r.options)===null||p===void 0?void 0:p.scopes,queryParams:(g=r.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await ce(this.fetch,"GET",T,{headers:this.headers,jwt:(x=(y=j.session)===null||y===void 0?void 0:y.access_token)!==null&&x!==void 0?x:void 0})});if(l)throw l;return tt()&&!(!((n=r.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(o?.url),this._returnResult({data:{provider:r.provider,url:o?.url},error:null})}catch(o){if(oe(o))return this._returnResult({data:{provider:r.provider,url:null},error:o});throw o}}async linkIdentityIdToken(r){return await this._useSession(async n=>{var o;try{const{error:l,data:{session:c}}=n;if(l)throw l;const{options:f,provider:p,token:g,access_token:y,nonce:x}=r,j=await ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=c?.access_token)!==null&&o!==void 0?o:void 0,body:{provider:p,id_token:g,access_token:y,nonce:x,link_identity:!0,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Lt}),{data:b,error:T}=j;return T?this._returnResult({data:{user:null,session:null},error:T}):!b||!b.session||!b.user?this._returnResult({data:{user:null,session:null},error:new _n}):(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("USER_UPDATED",b.session)),this._returnResult({data:b,error:T}))}catch(l){if(await et(this.storage,`${this.storageKey}-code-verifier`),oe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}})}async unlinkIdentity(r){try{return await this._useSession(async n=>{var o,l;const{data:c,error:f}=n;if(f)throw f;return await ce(this.fetch,"DELETE",`${this.url}/user/identities/${r.identity_id}`,{headers:this.headers,jwt:(l=(o=c.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0})})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(r){const n=`#_refreshAccessToken(${r.substring(0,5)}...)`;this._debug(n,"begin");try{const o=Date.now();return await x0(async l=>(l>0&&await w0(200*Math.pow(2,l-1)),this._debug(n,"refreshing attempt",l),await ce(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:r},headers:this.headers,xform:Lt})),(l,c)=>{const f=200*Math.pow(2,l);return c&&tl(c)&&Date.now()+f-o<Nn})}catch(o){if(this._debug(n,"error",o),oe(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(n,"end")}}_isValidSession(r){return typeof r=="object"&&r!==null&&"access_token"in r&&"refresh_token"in r&&"expires_at"in r}async _handleProviderSignIn(r,n){const o=await this._getUrlForProvider(`${this.url}/authorize`,r,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",r,"options",n,"url",o),tt()&&!n.skipBrowserRedirect&&window.location.assign(o),{data:{provider:r,url:o},error:null}}async _recoverAndRefresh(){var r,n;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const l=await Fr(this.storage,this.storageKey);if(l&&this.userStorage){let f=await Fr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:l.user},await Tn(this.userStorage,this.storageKey+"-user",f)),l.user=(r=f?.user)!==null&&r!==void 0?r:nl()}else if(l&&!l.user&&!l.user){const f=await Fr(this.storage,this.storageKey+"-user");f&&f?.user?(l.user=f.user,await et(this.storage,this.storageKey+"-user"),await Tn(this.storage,this.storageKey,l)):l.user=nl()}if(this._debug(o,"session from storage",l),!this._isValidSession(l)){this._debug(o,"session is not valid"),l!==null&&await this._removeSession();return}const c=((n=l.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<el;if(this._debug(o,`session has${c?"":" not"} expired with margin of ${el}s`),c){if(this.autoRefreshToken&&l.refresh_token){const{error:f}=await this._callRefreshToken(l.refresh_token);f&&(console.error(f),tl(f)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:p}=await this._getUser(l.access_token);!p&&f?.user?(l.user=f.user,await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(o,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(o,"error",l),console.error(l);return}finally{this._debug(o,"end")}}async _callRefreshToken(r){var n,o;if(!r)throw new xt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${r.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new Zi;const{data:c,error:f}=await this._refreshAccessToken(r);if(f)throw f;if(!c.session)throw new xt;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const p={data:c.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(c){if(this._debug(l,"error",c),oe(c)){const f={data:null,error:c};return tl(c)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(f),f}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(c),c}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(r,n,o=!0){const l=`#_notifyAllSubscribers(${r})`;this._debug(l,"begin",n,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:r,session:n});const c=[],f=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(r,n)}catch(g){c.push(g)}});if(await Promise.all(f),c.length>0){for(let p=0;p<c.length;p+=1)console.error(c[p]);throw c[0]}}finally{this._debug(l,"end")}}async _saveSession(r){this._debug("#_saveSession()",r),this.suppressGetSessionWarning=!0,await et(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},r),o=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&n.user&&await Tn(this.userStorage,this.storageKey+"-user",{user:n.user});const l=Object.assign({},n);delete l.user;const c=Bd(l);await Tn(this.storage,this.storageKey,c)}else{const l=Bd(n);await Tn(this.storage,this.storageKey,l)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await et(this.storage,this.storageKey),await et(this.storage,this.storageKey+"-code-verifier"),await et(this.storage,this.storageKey+"-user"),this.userStorage&&await et(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const r=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{r&&tt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",r)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const r=setInterval(()=>this._autoRefreshTokenTick(),Nn);this.autoRefreshTicker=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const r=this.autoRefreshTicker;this.autoRefreshTicker=null,r&&clearInterval(r);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const r=Date.now();try{return await this._useSession(async n=>{const{data:{session:o}}=n;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((o.expires_at*1e3-r)/Nn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${Nn}ms, refresh threshold is ${pl} ticks`),l<=pl&&await this._callRefreshToken(o.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(r){if(r.isAcquireTimeout||r instanceof xh)this._debug("auto refresh token tick lock not available");else throw r}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!tt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}}async _onVisibilityChanged(r){const n=`#_onVisibilityChanged(${r})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),r||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(r,n,o){const l=[`provider=${encodeURIComponent(n)}`];if(o?.redirectTo&&l.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&l.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[c,f]=await bn(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(f)}`});l.push(p.toString())}if(o?.queryParams){const c=new URLSearchParams(o.queryParams);l.push(c.toString())}return o?.skipBrowserRedirect&&l.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${r}?${l.join("&")}`}async _unenroll(r){try{return await this._useSession(async n=>{var o;const{data:l,error:c}=n;return c?this._returnResult({data:null,error:c}):await ce(this.fetch,"DELETE",`${this.url}/factors/${r.factorId}`,{headers:this.headers,jwt:(o=l?.session)===null||o===void 0?void 0:o.access_token})})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(r){try{return await this._useSession(async n=>{var o,l;const{data:c,error:f}=n;if(f)return this._returnResult({data:null,error:f});const p=Object.assign({friendly_name:r.friendlyName,factor_type:r.factorType},r.factorType==="phone"?{phone:r.phone}:r.factorType==="totp"?{issuer:r.issuer}:{}),{data:g,error:y}=await ce(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(o=c?.session)===null||o===void 0?void 0:o.access_token});return y?this._returnResult({data:null,error:y}):(r.factorType==="totp"&&g.type==="totp"&&(!((l=g?.totp)===null||l===void 0)&&l.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async _verify(r){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var o;const{data:l,error:c}=n;if(c)return this._returnResult({data:null,error:c});const f=Object.assign({challenge_id:r.challengeId},"webauthn"in r?{webauthn:Object.assign(Object.assign({},r.webauthn),{credential_response:r.webauthn.type==="create"?Q0(r.webauthn.credential_response):Y0(r.webauthn.credential_response)})}:{code:r.code}),{data:p,error:g}=await ce(this.fetch,"POST",`${this.url}/factors/${r.factorId}/verify`,{body:f,headers:this.headers,jwt:(o=l?.session)===null||o===void 0?void 0:o.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+p.expires_in},p)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",p),this._returnResult({data:p,error:g}))})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(r){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var o;const{data:l,error:c}=n;if(c)return this._returnResult({data:null,error:c});const f=await ce(this.fetch,"POST",`${this.url}/factors/${r.factorId}/challenge`,{body:r,headers:this.headers,jwt:(o=l?.session)===null||o===void 0?void 0:o.access_token});if(f.error)return f;const{data:p}=f;if(p.type!=="webauthn")return{data:p,error:null};switch(p.webauthn.type){case"create":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:G0(p.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:J0(p.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(r){const{data:n,error:o}=await this._challenge({factorId:r.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:r.factorId,challengeId:n.id,code:r.code})}async _listFactors(){var r;const{data:{user:n},error:o}=await this.getUser();if(o)return{data:null,error:o};const l={all:[],phone:[],totp:[],webauthn:[]};for(const c of(r=n?.factors)!==null&&r!==void 0?r:[])l.all.push(c),c.status==="verified"&&l[c.factor_type].push(c);return{data:l,error:null}}async _getAuthenticatorAssuranceLevel(){var r,n;const{data:{session:o},error:l}=await this.getSession();if(l)return this._returnResult({data:null,error:l});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=rl(o.access_token);let f=null;c.aal&&(f=c.aal);let p=f;((n=(r=o.user.factors)===null||r===void 0?void 0:r.filter(x=>x.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(p="aal2");const y=c.amr||[];return{data:{currentLevel:f,nextLevel:p,currentAuthenticationMethods:y},error:null}}async _getAuthorizationDetails(r){try{return await this._useSession(async n=>{const{data:{session:o},error:l}=n;return l?this._returnResult({data:null,error:l}):o?await ce(this.fetch,"GET",`${this.url}/oauth/authorizations/${r}`,{headers:this.headers,jwt:o.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new xt})})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(r,n){try{return await this._useSession(async o=>{const{data:{session:l},error:c}=o;if(c)return this._returnResult({data:null,error:c});if(!l)return this._returnResult({data:null,error:new xt});const f=await ce(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"approve"},xform:p=>({data:p,error:null})});return f.data&&f.data.redirect_url&&tt()&&!n?.skipBrowserRedirect&&window.location.assign(f.data.redirect_url),f})}catch(o){if(oe(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(r,n){try{return await this._useSession(async o=>{const{data:{session:l},error:c}=o;if(c)return this._returnResult({data:null,error:c});if(!l)return this._returnResult({data:null,error:new xt});const f=await ce(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"deny"},xform:p=>({data:p,error:null})});return f.data&&f.data.redirect_url&&tt()&&!n?.skipBrowserRedirect&&window.location.assign(f.data.redirect_url),f})}catch(o){if(oe(o))return this._returnResult({data:null,error:o});throw o}}async _listOAuthGrants(){try{return await this._useSession(async r=>{const{data:{session:n},error:o}=r;return o?this._returnResult({data:null,error:o}):n?await ce(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new xt})})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}}async _revokeOAuthGrant(r){try{return await this._useSession(async n=>{const{data:{session:o},error:l}=n;return l?this._returnResult({data:null,error:l}):o?(await ce(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:o.access_token,query:{client_id:r.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new xt})})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(r,n={keys:[]}){let o=n.keys.find(p=>p.kid===r);if(o)return o;const l=Date.now();if(o=this.jwks.keys.find(p=>p.kid===r),o&&this.jwks_cached_at+s0>l)return o;const{data:c,error:f}=await ce(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=l,o=c.keys.find(p=>p.kid===r),!o)?null:o}async getClaims(r,n={}){try{let o=r;if(!o){const{data:T,error:A}=await this.getSession();if(A||!T.session)return this._returnResult({data:null,error:A});o=T.session.access_token}const{header:l,payload:c,signature:f,raw:{header:p,payload:g}}=rl(o);n?.allowExpired||N0(c.exp);const y=!l.alg||l.alg.startsWith("HS")||!l.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(l.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!y){const{error:T}=await this.getUser(o);if(T)throw T;return{data:{claims:c,header:l,signature:f},error:null}}const x=T0(l.alg),j=await crypto.subtle.importKey("jwk",y,x,!0,["verify"]);if(!await crypto.subtle.verify(x,j,f,p0(`${p}.${g}`)))throw new yl("Invalid JWT signature");return{data:{claims:c,header:l,signature:f},error:null}}catch(o){if(oe(o))return this._returnResult({data:null,error:o});throw o}}}Ts.nextInstanceID={};const oy=Ts,ay="2.90.1";let xs="";typeof Deno<"u"?xs="deno":typeof document<"u"?xs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?xs="react-native":xs="node";const ly={"X-Client-Info":`supabase-js-${xs}/${ay}`},uy={headers:ly},cy={schema:"public"},dy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},hy={};function Cs(s){"@babel/helpers - typeof";return Cs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Cs(s)}function fy(s,r){if(Cs(s)!="object"||!s)return s;var n=s[Symbol.toPrimitive];if(n!==void 0){var o=n.call(s,r);if(Cs(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(s)}function py(s){var r=fy(s,"string");return Cs(r)=="symbol"?r:r+""}function gy(s,r,n){return(r=py(r))in s?Object.defineProperty(s,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[r]=n,s}function Jd(s,r){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(s);r&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(s,l).enumerable})),n.push.apply(n,o)}return n}function Me(s){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Jd(Object(n),!0).forEach(function(o){gy(s,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):Jd(Object(n)).forEach(function(o){Object.defineProperty(s,o,Object.getOwnPropertyDescriptor(n,o))})}return s}const my=s=>s?(...r)=>s(...r):(...r)=>fetch(...r),yy=()=>Headers,vy=(s,r,n)=>{const o=my(n),l=yy();return async(c,f)=>{var p;const g=(p=await r())!==null&&p!==void 0?p:s;let y=new l(f?.headers);return y.has("apikey")||y.set("apikey",s),y.has("Authorization")||y.set("Authorization",`Bearer ${g}`),o(c,Me(Me({},f),{},{headers:y}))}};function wy(s){return s.endsWith("/")?s:s+"/"}function xy(s,r){var n,o;const{db:l,auth:c,realtime:f,global:p}=s,{db:g,auth:y,realtime:x,global:j}=r,b={db:Me(Me({},g),l),auth:Me(Me({},y),c),realtime:Me(Me({},x),f),storage:{},global:Me(Me(Me({},j),p),{},{headers:Me(Me({},(n=j?.headers)!==null&&n!==void 0?n:{}),(o=p?.headers)!==null&&o!==void 0?o:{})}),accessToken:async()=>""};return s.accessToken?b.accessToken=s.accessToken:delete b.accessToken,b}function _y(s){const r=s?.trim();if(!r)throw new Error("supabaseUrl is required.");if(!r.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(wy(r))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var by=class extends oy{constructor(s){super(s)}},Sy=class{constructor(s,r,n){var o,l;this.supabaseUrl=s,this.supabaseKey=r;const c=_y(s);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const f=`sb-${c.hostname.split(".")[0]}-auth-token`,p={db:cy,realtime:hy,auth:Me(Me({},dy),{},{storageKey:f}),global:uy},g=xy(n??{},p);if(this.storageKey=(o=g.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(l=g.global.headers)!==null&&l!==void 0?l:{},g.accessToken)this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(x,j)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(j)} is not possible`)}});else{var y;this.auth=this._initSupabaseAuthClient((y=g.auth)!==null&&y!==void 0?y:{},this.headers,g.global.fetch)}this.fetch=vy(r,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Me({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.accessToken&&this.accessToken().then(x=>this.realtime.setAuth(x)).catch(x=>console.warn("Failed to set initial Realtime auth token:",x)),this.rest=new rm(new URL("rest/v1",c).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new Zm(this.storageUrl.href,this.headers,this.fetch,n?.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new Yg(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(s,r,n)}channel(s,r={config:{}}){return this.realtime.channel(s,r)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var s=this,r,n;if(s.accessToken)return await s.accessToken();const{data:o}=await s.auth.getSession();return(r=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:s.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:r,detectSessionInUrl:n,storage:o,userStorage:l,storageKey:c,flowType:f,lock:p,debug:g,throwOnError:y},x,j){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new by({url:this.authUrl.href,headers:Me(Me({},b),x),storageKey:c,autoRefreshToken:s,persistSession:r,detectSessionInUrl:n,storage:o,userStorage:l,flowType:f,lock:p,debug:g,throwOnError:y,fetch:j,hasCustomAuthorizationHeader:Object.keys(this.headers).some(T=>T.toLowerCase()==="authorization")})}_initRealtimeClient(s){return new wm(this.realtimeUrl.href,Me(Me({},s),{},{params:Me(Me({},{apikey:this.supabaseKey}),s?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,r)=>{this._handleTokenChanged(s,"CLIENT",r?.access_token)})}_handleTokenChanged(s,r,n){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):s==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const ky=(s,r,n)=>new Sy(s,r,n);function jy(){if(typeof window<"u")return!1;const s=globalThis.process;if(!s)return!1;const r=s.version;if(r==null)return!1;const n=r.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}jy()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Ey="https://qrqubfyuxpzdksnijhhy.supabase.co",Ny="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFycXViZnl1eHB6ZGtzbmlqaGh5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc2ODUwOTUsImV4cCI6MjA4MzI2MTA5NX0.oHTo182eAacbtUQQ9ex8n7R7gEKRe4SP2FE-rjb8Bso",ke=ky(Ey,Ny,{auth:{persistSession:!0,autoRefreshToken:!0}}),Sh=L.createContext(void 0),Ty=({children:s})=>{const[r,n]=L.useState(null),[o,l]=L.useState(!0);L.useEffect(()=>{ke.auth.getSession().then(({data:{session:y}})=>{n(y?.user??null),l(!1),console.log("Session loaded:",y?.user?.email||"Not logged in");try{localStorage.setItem("current_user_id",y?.user?.id||"")}catch{}});const{data:{subscription:g}}=ke.auth.onAuthStateChange((y,x)=>{console.log("Auth state changed:",y,x?.user?.email),n(x?.user??null),l(!1);try{localStorage.setItem("current_user_id",x?.user?.id||"")}catch{}});return()=>g.unsubscribe()},[]);const c=async(g,y)=>{try{console.log("Signing up:",g);const{data:x,error:j}=await ke.auth.signUp({email:g,password:y});return j?(console.error("Sign up error:",j),{error:j}):(x.user&&x.session?(console.log("Sign up successful - user logged in"),n(x.user)):console.log("Sign up successful - confirmation email sent"),{error:null})}catch(x){return console.error("Sign up exception:",x),{error:x}}},f=async(g,y)=>{try{console.log("Signing in:",g),await ke.auth.signOut(),Object.keys(localStorage).forEach(b=>{b.startsWith("sb-")&&localStorage.removeItem(b)}),localStorage.removeItem("current_user_id");const{data:x,error:j}=await ke.auth.signInWithPassword({email:g,password:y});return j?(console.error("Sign in error:",j),{error:j}):(x.user&&(console.log("Sign in successful:",x.user.email),n(x.user),localStorage.setItem("current_user_id",x.user.id),window.location.reload()),{error:null})}catch(x){return console.error("Sign in exception:",x),{error:x}}},p=async()=>{try{console.log("Signing out..."),await ke.auth.signOut(),n(null),console.log("Signed out successfully");try{localStorage.removeItem("current_user_id"),Object.keys(localStorage).forEach(y=>{y.startsWith("sb-")&&localStorage.removeItem(y)})}catch{}window.location.reload()}catch(g){console.error("Sign out error:",g)}};return d.jsx(Sh.Provider,{value:{user:r,loading:o,signUp:c,signIn:f,signOut:p},children:s})},eo=()=>{const s=L.useContext(Sh);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s};function El({title:s,subtitle:r,theme:n="rice",bgColor:o}){const{language:l,setLanguage:c,t:f}=Ht(),{signOut:p}=eo(),g=n==="rice"?"bg-gradient-to-r from-amber-500 to-yellow-500":"bg-gradient-to-r from-emerald-500 to-green-500",y=()=>{c(l==="th"?"en":"th")},x=async()=>{confirm(l==="th"?"?":"Are you sure you want to logout?")&&await p()};return d.jsxs("header",{className:"safe-area-top shadow-xl",children:[d.jsx("div",{className:o||"bg-gradient-to-r from-slate-800 via-slate-700 to-slate-800 px-4 py-4 border-b border-white/10",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-11 h-11 bg-gradient-to-br from-orange-500 to-red-600 backdrop-blur-md rounded-2xl flex items-center justify-center shadow-2xl border border-orange-400/30",children:d.jsx(Hr,{className:"w-6 h-6 text-white drop-shadow-lg"})}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-white font-bold text-lg drop-shadow-lg",children:s}),r&&d.jsx("p",{className:"text-slate-300 text-xs font-medium",children:r})]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("button",{onClick:y,className:"flex items-center gap-1.5 bg-blue-500/25 backdrop-blur-sm px-3 py-1.5 rounded-full shadow-md border border-blue-400/30 hover:bg-blue-500/35 transition-colors active:scale-95",children:[d.jsx(fg,{className:"w-4 h-4 text-blue-300"}),d.jsx("span",{className:"text-sm text-blue-100 font-medium uppercase",children:l})]}),d.jsxs("button",{onClick:x,className:"flex items-center gap-1.5 bg-red-500/25 backdrop-blur-sm px-3 py-1.5 rounded-full shadow-md border border-red-400/30 hover:bg-red-500/35 transition-colors active:scale-95",title:l==="th"?"":"Logout",children:[d.jsx(_g,{className:"w-4 h-4 text-red-300"}),d.jsx("span",{className:"text-sm text-red-100 font-medium hidden sm:inline",children:l==="th"?"":"Out"})]})]})]})}),!o&&d.jsx("div",{className:`${g} px-4 py-3 shadow-lg`,children:d.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl px-4 py-2.5 border border-white/30 shadow-inner",children:d.jsx("h2",{className:"text-white text-center font-bold drop-shadow-md",children:s})})})]})}const Cy="modulepreload",Py=function(s){return"/"+s},Qd={},Wr=function(r,n,o){let l=Promise.resolve();if(n&&n.length>0){let f=function(y){return Promise.all(y.map(x=>Promise.resolve(x).then(j=>({status:"fulfilled",value:j}),j=>({status:"rejected",reason:j}))))};document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),g=p?.nonce||p?.getAttribute("nonce");l=f(n.map(y=>{if(y=Py(y),y in Qd)return;Qd[y]=!0;const x=y.endsWith(".css"),j=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${j}`))return;const b=document.createElement("link");if(b.rel=x?"stylesheet":Cy,x||(b.as="script"),b.crossOrigin="",b.href=y,g&&b.setAttribute("nonce",g),document.head.appendChild(b),x)return new Promise((T,A)=>{b.addEventListener("load",T),b.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${y}`)))})}))}function c(f){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=f,window.dispatchEvent(p),!p.defaultPrevented)throw f}return l.then(f=>{for(const p of f||[])p.status==="rejected"&&c(p.reason);return r().catch(c)})};function kh({children:s,theme:r="rice",activeLayer:n="burn",onPolygonCreated:o,onPolygonDeleted:l,onMapReady:c,onLocationSelected:f,onControlsReady:p}){const g=L.useRef(null),y=L.useRef(null),[x,j]=L.useState({lat:13.7563,lng:100.5018}),[b,T]=L.useState(!1),[A,O]=L.useState(!1),[$,M]=L.useState([]),[q,D]=L.useState([]),U=L.useRef([]),re=L.useRef([]),J=L.useRef([]),F=L.useRef(null),fe=L.useRef(null),ye=L.useRef(n),Se=L.useRef(r),Re=L.useRef($);L.useEffect(()=>{ye.current=n},[n]),L.useEffect(()=>{Se.current=r},[r]),L.useEffect(()=>{Re.current=$},[$]);const je=E=>{if(!fe.current||E.length<3)return 0;let v=0;const N=6371e3;for(let K=0;K<E.length;K++){const ee=(K+1)%E.length,H=E[K][0]*Math.PI/180,X=E[ee][0]*Math.PI/180,Q=E[K][1]*Math.PI/180,he=E[ee][1]*Math.PI/180;v+=(he-Q)*(2+Math.sin(H)+Math.sin(X))}return v=Math.abs(v*N*N/2),v},k=()=>{console.log(" Starting drawing mode..."),T(!0),O(!1),M([]),J.current.forEach(E=>E.remove()),J.current=[],F.current&&(F.current.remove(),F.current=null)},Y=E=>{console.log(" Stopping drawing mode..."),T(!1);const v=E&&E.length?E:Re.current;if(v.length>=3){const N=je(v),K=ye.current,ee=Se.current,H=K==="burn"?ee==="rice"?"#f59e0b":"#ef4444":"#10b981",X={id:Date.now().toString(),points:v,area:N,type:K,color:H};if(console.log(" Creating polygon:",X),D(Q=>[...Q,X]),o&&o(X),fe.current&&g.current){const Q=fe.current.polygon(v,{color:H,fillColor:H,fillOpacity:.3,weight:3}).addTo(g.current),he=(N/1600).toFixed(2),ae=K==="burn"?" ":" ";Q.bindPopup(`
          <div class="text-sm">
            <strong class="${K==="burn"?"text-red-600":"text-green-600"}">${ae}</strong><br/>
            <span class="text-lg font-semibold">${he} </span><br/>
            <span class="text-xs text-gray-600"> ${Math.round(N)} ..</span><br/>
            <button class="mt-2 px-3 py-1 bg-red-500 text-white text-xs rounded-lg hover:bg-red-600" onclick="window.deletePolygon('${X.id}')">
               Polygon
            </button>
          </div>
        `),re.current.push({id:X.id,layer:Q})}}J.current.forEach(N=>N.remove()),J.current=[],F.current&&(F.current.remove(),F.current=null),M([])},me=E=>{console.log(" Deleting polygon:",E),D(N=>N.filter(K=>K.id!==E));const v=re.current.find(N=>N.id===E);v&&(v.layer.remove(),re.current=re.current.filter(N=>N.id!==E)),l&&l(E)},Ae=()=>{console.log(" Starting pin drop mode..."),O(!0),T(!1)},xe=()=>{console.log(" Stopping pin drop mode..."),O(!1)},P=()=>{O(E=>{const v=!E;return console.log(" Toggling pin drop mode:",v),v&&T(!1),v})};L.useEffect(()=>(window.deletePolygon=me,()=>{delete window.deletePolygon}),[]),L.useEffect(()=>((async()=>{const v=await Wr(()=>import("./leaflet-src-DE8NUKC0.js").then(H=>H.l),__vite__mapDeps([0,1]));if(fe.current=v,!y.current||g.current)return;console.log(" Initializing map...");const N=v.map(y.current,{center:[x.lat,x.lng],zoom:15,zoomControl:!1});v.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:19}).addTo(N);const K=v.divIcon({className:"custom-user-marker",html:`
          <div class="relative">
            <div class="absolute w-32 h-32 bg-blue-400 rounded-full opacity-20 animate-pulse" style="top: -64px; left: -64px;"></div>
            <svg width="40" height="40" viewBox="0 0 24 24" fill="#3b82f6" stroke="#3b82f6" stroke-width="2" style="filter: drop-shadow(0 4px 6px rgba(0,0,0,0.3));">
              <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
              <circle cx="12" cy="10" r="3" fill="white"></circle>
            </svg>
          </div>
        `,iconSize:[40,40],iconAnchor:[20,40]}),ee=v.marker([x.lat,x.lng],{icon:K,zIndexOffset:1e3}).addTo(N);ee.bindPopup(`
        <div class="text-sm">
          <strong> </strong><br/>
          Lat: ${x.lat.toFixed(4)}<br/>
          Lng: ${x.lng.toFixed(4)}
        </div>
      `),v.circle([x.lat,x.lng],{color:"#3b82f6",fillColor:"#3b82f6",fillOpacity:.1,radius:50}).addTo(N),N.on("click",H=>{const X=H.originalEvent?H.originalEvent.target:null;if(!(X&&X.closest(".overlay-controls"))){if(console.log(" Map clicked. Drawing mode:",window.__isDrawingMode),window.__isDrawingMode){console.log(" Adding point:",H.latlng.lat,H.latlng.lng);const Q=[H.latlng.lat,H.latlng.lng];M(he=>{const ae=[...he,Q];console.log(` Total points: ${ae.length}`);const pe=ye.current,Ve=v.circleMarker([H.latlng.lat,H.latlng.lng],{radius:6,fillColor:pe==="burn"?"#ef4444":"#10b981",color:"#fff",weight:2,opacity:1,fillOpacity:.8}).addTo(N);if(J.current.push(Ve),F.current&&F.current.remove(),ae.length>1&&(F.current=v.polyline(ae,{color:pe==="burn"?"#ef4444":"#10b981",weight:2,dashArray:"5, 5"}).addTo(N)),ae.length>=3&&fe.current){const ut=ae[0],Ct=Q,$e=fe.current.latLng(ut[0],ut[1]);fe.current.latLng(Ct[0],Ct[1]).distanceTo($e)<=30&&Y(ae)}return ae})}else if(window.__isPinDropping){console.log(" Pin drop mode active"),U.current.forEach(he=>he.remove()),U.current=[];const Q=v.marker([H.latlng.lat,H.latlng.lng],{icon:v.divIcon({className:"custom-pin-marker",html:`
                <svg width="32" height="32" viewBox="0 0 24 24" fill="#8b5cf6" stroke="white" stroke-width="2" style="filter: drop-shadow(0 4px 6px rgba(0,0,0,0.3));">
                  <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                </svg>
              `,iconSize:[32,32],iconAnchor:[16,32]})}).addTo(N);Q.bindPopup(`
            <div class="text-sm">
              <strong> </strong><br/>
              Lat: ${H.latlng.lat.toFixed(6)}<br/>
              Lng: ${H.latlng.lng.toFixed(6)}
            </div>
          `).openPopup(),U.current.push(Q),f&&f({lat:H.latlng.lat,lng:H.latlng.lng})}}}),N.on("dblclick",H=>{const X=H.originalEvent?H.originalEvent.target:null;X&&X.closest(".overlay-controls")||window.__isDrawingMode&&(console.log(" Double-click detected - finishing polygon"),v.DomEvent.stopPropagation(H),v.DomEvent.preventDefault(H),Y())}),g.current=N,navigator.geolocation&&navigator.geolocation.getCurrentPosition(H=>{const X=H.coords.latitude,Q=H.coords.longitude;j({lat:X,lng:Q}),N.setView([X,Q],15),ee.setLatLng([X,Q])},()=>{}),c&&c(N)})(),()=>{g.current&&(g.current.remove(),g.current=null)}),[]),L.useEffect(()=>{window.__isDrawingMode=b,console.log(" Drawing mode updated:",b)},[b]),L.useEffect(()=>{window.__isPinDropping=A,console.log(" Pin drop mode updated:",A)},[A]),L.useEffect(()=>{!b&&$.length>0&&(J.current.forEach(E=>E.remove()),J.current=[],F.current&&(F.current.remove(),F.current=null),M([]))},[b]);const z={startDrawing:k,stopDrawing:Y,isDrawing:b,polygons:q,startPinDrop:Ae,stopPinDrop:xe,togglePinDrop:P,isPinDropping:A};return L.useEffect(()=>{p&&p(z)},[]),d.jsxs(d.Fragment,{children:[d.jsx("style",{children:`
        @import url('https://unpkg.com/leaflet@1.9.4/dist/leaflet.css');
        
        .custom-user-marker, .custom-pin-marker {
          background: none;
          border: none;
        }
        
        .leaflet-container {
          height: 100%;
          width: 100%;
          z-index: 0;
          cursor: ${b?"crosshair":"grab"};
        }
        
        .leaflet-container:active {
          cursor: ${b?"crosshair":"grabbing"};
        }
        
        .leaflet-popup-content-wrapper {
          border-radius: 12px;
          padding: 4px;
        }
        
        .leaflet-popup-content {
          margin: 8px;
        }
      `}),d.jsxs("div",{ref:y,className:"relative w-full h-full",children:[b&&d.jsx("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 z-[1000] bg-gradient-to-r from-gray-900 to-gray-800 text-white px-6 py-3 rounded-2xl shadow-2xl border border-gray-700",children:d.jsxs("div",{className:"text-sm text-center",children:[d.jsxs("div",{className:"font-semibold mb-1",children:["  ",n==="burn"?"":""]}),d.jsxs("div",{className:"text-xs text-gray-300",children:["    : ",$.length]})]})}),q.length>0&&!b&&d.jsxs("div",{className:"absolute bottom-4 left-4 z-[1000] bg-white/95 backdrop-blur-md rounded-2xl shadow-xl p-4 border border-gray-100 max-w-xs",children:[d.jsx("div",{className:"text-sm font-semibold mb-2",children:"  Polygon"}),d.jsxs("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:[q.map((E,v)=>d.jsxs("div",{className:"flex items-center justify-between text-xs",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:E.color}}),d.jsxs("span",{children:[E.type==="burn"?"":""," #",v+1]})]}),d.jsxs("span",{className:"font-semibold",children:[(E.area/1600).toFixed(2)," "]})]},E.id)),d.jsxs("div",{className:"pt-2 border-t border-gray-200 font-semibold flex justify-between",children:[d.jsx("span",{children:":"}),d.jsxs("span",{children:[q.reduce((E,v)=>E+v.area/1600,0).toFixed(2)," "]})]})]})]}),d.jsx("div",{className:"overlay-controls relative z-[1000]",onMouseDown:E=>E.stopPropagation(),onClick:E=>E.stopPropagation(),onDoubleClick:E=>E.stopPropagation(),children:typeof s=="function"?s(z):s})]})]})}function jh({onLocateMe:s,onDropPin:r,onDrawPolygon:n,onStopDrawing:o,onEdit:l,theme:c="rice",isDrawing:f=!1,isPinDropping:p=!1}){const[g,y]=L.useState(null),x=c==="rice"?"from-amber-500 to-yellow-600":"from-emerald-500 to-green-600";return d.jsx("div",{className:"absolute right-4 top-4 flex flex-col gap-3 z-10",children:f?d.jsxs("div",{className:"relative",children:[d.jsx("button",{onClick:o,className:"w-14 h-14 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl shadow-xl flex items-center justify-center hover:shadow-2xl active:scale-95 transition-all animate-bounce","aria-label":"",children:d.jsx(eg,{className:"w-6 h-6 text-white"})}),d.jsx("div",{className:"absolute right-16 top-1/2 -translate-y-1/2 bg-red-600 text-white px-3 py-2 rounded-lg text-sm whitespace-nowrap",children:""})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"relative",children:[d.jsx("button",{onClick:s,onMouseEnter:()=>y("locate"),onMouseLeave:()=>y(null),className:"w-14 h-14 bg-white rounded-2xl shadow-xl flex items-center justify-center hover:shadow-2xl active:scale-95 transition-all border border-gray-100","aria-label":"",children:d.jsx(yg,{className:"w-6 h-6 text-blue-600"})}),g==="locate"&&d.jsx("div",{className:"absolute right-16 top-1/2 -translate-y-1/2 bg-gray-900 text-white px-3 py-2 rounded-lg text-sm whitespace-nowrap",children:""})]}),d.jsxs("div",{className:"relative",children:[d.jsx("button",{onClick:r,onMouseEnter:()=>y("pin"),onMouseLeave:()=>y(null),className:`w-14 h-14 rounded-2xl shadow-xl flex items-center justify-center active:scale-95 transition-all border ${p?"bg-purple-600 text-white border-purple-500 ring-2 ring-purple-300":"bg-white text-purple-600 border-gray-100 hover:shadow-2xl"}`,"aria-label":"",children:d.jsx(Qi,{className:`w-6 h-6 ${p?"text-white":"text-purple-600"}`})}),g==="pin"&&d.jsx("div",{className:"absolute right-16 top-1/2 -translate-y-1/2 bg-gray-900 text-white px-3 py-2 rounded-lg text-sm whitespace-nowrap",children:p?"":""})]}),d.jsxs("div",{className:"relative",children:[d.jsx("button",{onClick:n,onMouseEnter:()=>y("polygon"),onMouseLeave:()=>y(null),className:`w-14 h-14 bg-gradient-to-br ${x} rounded-2xl shadow-xl flex items-center justify-center hover:shadow-2xl active:scale-95 transition-all animate-pulse`,"aria-label":"",children:d.jsx(Pg,{className:"w-6 h-6 text-white"})}),g==="polygon"&&d.jsx("div",{className:"absolute right-16 top-1/2 -translate-y-1/2 bg-gray-900 text-white px-3 py-2 rounded-lg text-sm whitespace-nowrap",children:""})]}),d.jsxs("div",{className:"relative",children:[d.jsx("button",{onClick:l,onMouseEnter:()=>y("edit"),onMouseLeave:()=>y(null),className:"w-14 h-14 bg-white rounded-2xl shadow-xl flex items-center justify-center hover:shadow-2xl active:scale-95 transition-all border border-gray-100","aria-label":"/",children:d.jsx(Tg,{className:"w-6 h-6 text-orange-600"})}),g==="edit"&&d.jsx("div",{className:"absolute right-16 top-1/2 -translate-y-1/2 bg-gray-900 text-white px-3 py-2 rounded-lg text-sm whitespace-nowrap",children:" Polygon "})]})]})})}function Eh({title:s,status:r,children:n,theme:o="rice",onExpandChange:l,isExpanded:c}){const[f,p]=L.useState(c??!0);L.useEffect(()=>{typeof c<"u"&&p(c)},[c]);const g=()=>{const j=!f;typeof c>"u"&&p(j),l?.(j)},y={saved:o==="rice"?"bg-gradient-to-r from-amber-100 to-yellow-100 text-amber-800 border-amber-300/50":"bg-gradient-to-r from-emerald-100 to-green-100 text-emerald-800 border-emerald-300/50",draft:"bg-gradient-to-r from-orange-100 to-red-100 text-orange-800 border-orange-300/50"},x=o==="rice"?"from-amber-50 to-yellow-50":"from-emerald-50 to-green-50";return d.jsxs("div",{className:`absolute bottom-0 left-0 right-0 bg-white/95 backdrop-blur-xl rounded-t-[2rem] shadow-[0_-10px_60px_rgba(0,0,0,0.2)] border-t-2 border-gray-200/50 transition-transform duration-300 ${f?"translate-y-0":"translate-y-[calc(100%-80px)]"}`,style:{maxHeight:f?"calc(100vh - 120px)":"auto"},children:[d.jsx("button",{onClick:g,className:"w-full py-4 flex items-center justify-center group",children:d.jsx("div",{className:"w-20 h-1.5 bg-gradient-to-r from-gray-300 via-gray-400 to-gray-300 rounded-full group-hover:from-gray-400 group-hover:via-gray-500 group-hover:to-gray-400 transition-all shadow-sm"})}),d.jsxs("div",{className:`px-6 pb-4 flex items-center justify-between border-b border-gray-200/70 bg-gradient-to-r ${x}`,children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("h2",{className:"text-gray-900 font-semibold",children:s}),r&&d.jsx("span",{className:`px-4 py-1.5 rounded-full text-xs font-medium border shadow-sm ${y[r]}`,children:r==="saved"?" ":" "})]}),d.jsx("button",{onClick:g,className:"p-2.5 hover:bg-white/80 rounded-xl transition-all hover:shadow-md",children:f?d.jsx(Xd,{className:"w-6 h-6 text-gray-600"}):d.jsx(Zd,{className:"w-6 h-6 text-gray-600"})})]}),d.jsx("div",{className:"px-6 pb-6 overflow-y-auto",style:{maxHeight:"calc(100vh - 240px)"},children:n})]})}function Nh({options:s,value:r,onChange:n}){return d.jsx("div",{className:"flex bg-gray-100 rounded-2xl p-1.5 shadow-inner",children:s.map(o=>d.jsx("button",{onClick:()=>n(o.value),className:`flex-1 px-4 py-3.5 rounded-xl transition-all ${r===o.value?"bg-white text-gray-900 shadow-lg scale-105":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:o.label},o.value))})}function Th({label:s,checked:r,onChange:n}){return d.jsxs("label",{className:"flex items-center justify-between cursor-pointer p-4 bg-gradient-to-r from-gray-50 to-gray-100 border-2 border-gray-200 rounded-2xl hover:border-gray-300 transition-all shadow-sm",children:[d.jsx("span",{className:"text-gray-900",children:s}),d.jsx("div",{onClick:()=>n(!r),className:`relative w-16 h-9 rounded-full transition-all shadow-inner ${r?"bg-gradient-to-r from-blue-500 to-blue-600":"bg-gray-300"}`,children:d.jsx("div",{className:`absolute top-1 w-7 h-7 bg-white rounded-full shadow-lg transition-transform ${r?"translate-x-8":"translate-x-1"}`,children:r&&d.jsx("div",{className:"absolute inset-2 bg-blue-500 rounded-full"})})})]})}function Ry({onSave:s,onSaveDraft:r,polygons:n=[],onNavigateToMap:o,mapSelectedLocation:l}){const[c,f]=L.useState(new Date().toISOString().split("T")[0]),[p,g]=L.useState(new Date().toTimeString().slice(0,5)),[y,x]=L.useState(!0),[j,b]=L.useState("dry"),[T,A]=L.useState(""),[O,$]=L.useState(""),[M,q]=L.useState(""),[D,U]=L.useState(!1),[re,J]=L.useState([]),[F,fe]=L.useState(null),[ye,Se]=L.useState(!1),[Re,je]=L.useState(null),{t:k}=Ht();L.useEffect(()=>{y&&Y()},[y]),L.useEffect(()=>{l&&fe({lat:l.lat,lng:l.lng,accuracy:F?.accuracy})},[l]);const Y=()=>{if(Se(!0),je(null),!navigator.geolocation){je("GPS "),Se(!1);return}navigator.geolocation.getCurrentPosition(P=>{const{latitude:z,longitude:E,accuracy:v}=P.coords;fe({lat:z,lng:E,accuracy:v}),Se(!1)},P=>{let z="";switch(P.code){case P.PERMISSION_DENIED:z="";break;case P.POSITION_UNAVAILABLE:z="";break;case P.TIMEOUT:z="";break}je(z),Se(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})},me=P=>{const z=P.target.files;if(z&&z.length>0){const E=z[0],v=URL.createObjectURL(E),N=new Image;N.onload=()=>{const ee=Math.min(1,1280/Math.max(N.width,N.height)),H=document.createElement("canvas");H.width=Math.round(N.width*ee),H.height=Math.round(N.height*ee);const X=H.getContext("2d");if(!X){URL.revokeObjectURL(v);return}X.fillStyle="#ffffff",X.fillRect(0,0,H.width,H.height),X.drawImage(N,0,0,H.width,H.height);const Q=H.toDataURL("image/jpeg",.7);J(he=>[...he,Q]),URL.revokeObjectURL(v)},N.src=v}},Ae=P=>{J(z=>z.filter((E,v)=>v!==P))},xe=async P=>{U(!0),await new Promise(E=>setTimeout(E,1e3)),U(!1);const z={date:c,time:p,riceFieldType:j,riceVariety:T==="other"?O:T,remarks:M,photos:re,polygons:n,location:y&&F?{lat:F.lat,lng:F.lng,accuracy:F.accuracy}:null};P?r(z):s(z)};return d.jsxs("div",{className:"space-y-6 py-2",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm text-gray-700 mb-2 flex items-center gap-1.5",children:[d.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:d.jsx(wl,{className:"w-4 h-4 text-blue-600"})}),d.jsx("span",{children:k("date")})]}),d.jsx("input",{type:"date",value:c,onChange:P=>f(P.target.value),className:"w-full px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-xl text-gray-900 focus:border-amber-400 focus:ring-2 focus:ring-amber-100 transition-all"})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm text-gray-700 mb-2 flex items-center gap-1.5",children:[d.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:d.jsx(eh,{className:"w-4 h-4 text-purple-600"})}),d.jsx("span",{children:k("time")})]}),d.jsx("input",{type:"time",value:p,onChange:P=>g(P.target.value),className:"w-full px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-xl text-gray-900 focus:border-purple-400 focus:ring-2 focus:ring-purple-100 transition-all"})]})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm text-gray-700 mb-3 flex items-center gap-1.5",children:[d.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:d.jsx(Qi,{className:"w-4 h-4 text-green-600"})}),d.jsx("span",{children:k("location")})]}),d.jsx(Th,{label:k("gpsLocation"),checked:y,onChange:x}),y?d.jsxs("div",{className:"mt-3 p-5 bg-gradient-to-br from-blue-50 to-cyan-50 border-2 border-blue-200 rounded-2xl shadow-sm",children:[d.jsx("div",{className:"text-sm text-gray-700 space-y-2 mb-4",children:ye?d.jsxs("div",{className:"flex items-center gap-2 text-blue-600",children:[d.jsx(Wi,{className:"w-4 h-4 animate-spin"}),d.jsx("span",{children:k("gettingLocation")})]}):Re?d.jsxs("div",{className:"text-red-600 bg-red-50 p-2 rounded-lg",children:[" ",Re]}):F?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-blue-600",children:""}),d.jsxs("span",{className:"text-xs text-gray-600",children:[k("latitude"),":"]}),d.jsxs("span",{children:[F.lat.toFixed(6)," N"]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-blue-600",children:""}),d.jsxs("span",{className:"text-xs text-gray-600",children:[k("longitude"),":"]}),d.jsxs("span",{children:[F.lng.toFixed(6)," E"]})]}),d.jsx("div",{className:"pt-2 border-t border-blue-200",children:d.jsxs("span",{className:"text-xs text-blue-600 bg-blue-100 px-2 py-1 rounded-full",children:[" ",k("accuracy"),": ",F.accuracy?Math.round(F.accuracy):"?"," m"]})})]}):d.jsx("div",{className:"text-gray-500",children:k("noLocationData")})}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs("button",{onClick:Y,disabled:ye,className:"flex-1 px-4 py-3 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-xl hover:from-green-700 hover:to-green-800 active:scale-98 transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:[d.jsx(Wi,{className:`w-4 h-4 ${ye?"animate-spin":""}`}),ye?k("loading"):` ${k("updateGps")}`]}),d.jsxs("button",{className:"flex-1 px-4 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl hover:from-blue-700 hover:to-blue-800 active:scale-98 transition-all",onClick:o,children:[" ",k("selectFromMap")]})]})]}):d.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3",children:[d.jsx("input",{type:"text",placeholder:`X (${k("longitude")})`,className:"px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-xl text-gray-900 focus:border-blue-400 focus:ring-2 focus:ring-blue-100 transition-all"}),d.jsx("input",{type:"text",placeholder:`Y (${k("latitude")})`,className:"px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-xl text-gray-900 focus:border-blue-400 focus:ring-2 focus:ring-blue-100 transition-all"})]})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm text-gray-700 mb-3 flex items-center gap-1.5",children:[d.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-lg flex items-center justify-center",children:d.jsx("span",{className:"text-base",children:""})}),d.jsx("span",{children:k("riceFieldType")})]}),d.jsx(Nh,{options:[{value:"dry",label:` ${k("dryField")}`},{value:"wet",label:` ${k("rainyField")}`},{value:"unspecified",label:` ${k("unspecifiedField")}`}],value:j,onChange:P=>b(P)})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm text-gray-700 mb-3 flex items-center gap-1.5",children:[d.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center",children:d.jsx(Ss,{className:"w-4 h-4 text-yellow-600"})}),d.jsx("span",{children:k("riceVariety")})]}),d.jsxs("select",{value:T,onChange:P=>A(P.target.value),className:"w-full px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-xl text-gray-900 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-100 transition-all",children:[d.jsx("option",{value:"",children:k("riceVarietyPlaceholder")}),d.jsx("option",{value:"",children:""}),d.jsx("option",{value:"",children:""}),d.jsx("option",{value:"15",children:"15"}),d.jsx("option",{value:"1",children:"1"}),d.jsx("option",{value:"other",children:`${k("other")} (${k("riceVarietyPlaceholder")})`})]}),T==="other"&&d.jsx("input",{type:"text",placeholder:k("riceVarietyPlaceholder"),value:O,onChange:P=>$(P.target.value),className:"mt-3 w-full px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-xl text-gray-900 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-100 transition-all"})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{className:"p-5 bg-gradient-to-br from-red-50 to-orange-50 border-2 border-red-200 rounded-2xl shadow-sm",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[d.jsx("div",{className:"w-8 h-8 bg-red-500 rounded-lg flex items-center justify-center shadow-lg shadow-red-200",children:d.jsx(Hr,{className:"w-5 h-5 text-white"})}),d.jsx("span",{className:"text-sm text-gray-700 font-medium",children:k("burnArea")})]}),d.jsx("div",{className:"text-3xl font-bold text-gray-900 mb-1",children:n.filter(P=>P.type==="burn").reduce((P,z)=>P+z.area/1600,0).toFixed(2)}),d.jsx("div",{className:"text-sm text-gray-600 font-medium",children:k("rai")}),d.jsxs("div",{className:"text-xs text-gray-500 mt-2 bg-red-100/50 px-3 py-1.5 rounded-lg inline-block",children:[n.filter(P=>P.type==="burn").length," ",k("polygon")]})]}),d.jsxs("div",{className:"p-5 bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200 rounded-2xl shadow-sm",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[d.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-lg flex items-center justify-center shadow-lg shadow-green-200",children:d.jsx(Ss,{className:"w-5 h-5 text-white"})}),d.jsx("span",{className:"text-sm text-gray-700 font-medium",children:k("noBurnArea")})]}),d.jsx("div",{className:"text-3xl font-bold text-gray-900 mb-1",children:n.filter(P=>P.type==="non-burn").reduce((P,z)=>P+z.area/1600,0).toFixed(2)}),d.jsx("div",{className:"text-sm text-gray-600 font-medium",children:k("rai")}),d.jsxs("div",{className:"text-xs text-gray-500 mt-2 bg-green-100/50 px-3 py-1.5 rounded-lg inline-block",children:[n.filter(P=>P.type==="non-burn").length," ",k("polygon")]})]})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm text-gray-700 mb-3 flex items-center gap-1.5",children:[d.jsx("div",{className:"w-8 h-8 bg-pink-100 rounded-lg flex items-center justify-center",children:d.jsx(qi,{className:"w-4 h-4 text-pink-600"})}),d.jsx("span",{children:k("photos")})]}),re.length>0&&d.jsx("div",{className:"grid grid-cols-3 gap-3 mb-3",children:re.map((P,z)=>d.jsxs("div",{className:"relative aspect-square rounded-xl overflow-hidden bg-gray-100 border-2 border-gray-200",children:[d.jsx("img",{src:P,alt:`Photo ${z+1}`,className:"w-full h-full object-cover"}),d.jsx("button",{onClick:()=>Ae(z),className:"absolute top-1 right-1 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center shadow-lg hover:bg-red-600 transition-colors",children:d.jsx(xl,{className:"w-4 h-4"})})]},z))}),d.jsxs("label",{className:"w-full px-4 py-4 bg-gradient-to-br from-gray-50 to-gray-100 border-2 border-dashed border-gray-300 rounded-2xl text-gray-600 hover:border-pink-300 hover:bg-pink-50 active:scale-98 transition-all flex items-center justify-center gap-3 shadow-sm cursor-pointer",children:[d.jsx(qi,{className:"w-6 h-6 text-pink-500"}),d.jsxs("span",{children:[" ",k("addPhoto")]}),d.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:me,className:"hidden"})]}),re.length>0&&d.jsxs("div",{className:"text-xs text-gray-600 mt-2 text-center",children:[re.length," ",k("photos")]})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm text-gray-700 mb-3 flex items-center gap-1.5",children:[d.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center",children:d.jsx("span",{className:"text-base",children:""})}),d.jsx("span",{children:k("remarks")})]}),d.jsx("textarea",{value:M,onChange:P=>q(P.target.value),placeholder:k("remarksPlaceholder"),rows:4,className:"w-full px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-xl text-gray-900 resize-none focus:border-orange-400 focus:ring-2 focus:ring-orange-100 transition-all"})]}),d.jsxs("div",{className:"space-y-3 pt-4",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[d.jsxs("button",{onClick:()=>xe(!0),disabled:D,className:"px-6 py-3 bg-gradient-to-r from-orange-100 to-orange-200 text-orange-700 rounded-2xl hover:from-orange-200 hover:to-orange-300 active:scale-98 transition-all disabled:opacity-50 shadow-sm",children:[" ",k("saveDraft")]}),d.jsxs("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-gradient-to-r from-gray-100 to-gray-200 text-gray-700 rounded-2xl hover:from-gray-200 hover:to-gray-300 active:scale-98 transition-all shadow-sm",children:[" ",k("clearForm")]})]}),d.jsx("button",{onClick:()=>xe(!1),disabled:D,className:"w-full px-6 py-4 bg-gradient-to-r from-amber-500 to-yellow-600 text-white rounded-2xl hover:from-amber-600 hover:to-yellow-700 active:scale-98 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-amber-200",children:D?` ${k("saving")}`:` ${k("saveData")}`})]})]})}function Ch({message:s}){return d.jsx("div",{className:"fixed bottom-24 left-1/2 transform -translate-x-1/2 z-50 animate-slide-up",children:d.jsxs("div",{className:"bg-gradient-to-r from-gray-900 to-gray-800 text-white px-6 py-4 rounded-2xl shadow-2xl flex items-center gap-3 border border-gray-700 backdrop-blur-sm",children:[d.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center shadow-lg shadow-green-500/50",children:d.jsx(Xp,{className:"w-5 h-5 text-white",strokeWidth:2.5})}),d.jsx("span",{children:s})]})})}function Ph({activeLayer:s,onLayerChange:r,theme:n="rice",isVisible:o=!0,onZoomIn:l,onZoomOut:c}){const{t:f}=Ht(),[p,g]=L.useState(!1);return o?d.jsxs("div",{className:"absolute top-4 left-4 z-10 flex flex-col gap-3",children:[!p&&d.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-2 px-3 py-2 bg-white/95 backdrop-blur-md rounded-xl shadow-lg border border-gray-100 hover:shadow-xl transition-all",children:[s==="burn"?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-red-500 to-orange-500 rounded-lg flex items-center justify-center",children:d.jsx(Hr,{className:"w-4 h-4 text-white"})}),d.jsx("span",{className:"text-xs font-medium text-gray-700",children:f("burnArea")})]}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg flex items-center justify-center",children:d.jsx(Ss,{className:"w-4 h-4 text-white"})}),d.jsx("span",{className:"text-xs font-medium text-gray-700",children:f("noBurnArea")})]}),d.jsx(Xd,{className:"w-4 h-4 text-gray-500"})]}),p&&d.jsxs("div",{className:"bg-white/95 backdrop-blur-md rounded-xl shadow-xl p-2 border border-gray-100",children:[d.jsxs("button",{onClick:()=>g(!1),className:"w-full flex items-center justify-between px-2 py-1.5 mb-2 hover:bg-gray-50 rounded-lg transition-all",children:[d.jsxs("span",{className:"text-xs text-gray-600 font-medium",children:[" ",f("language")==="th"?"":"Layers"]}),d.jsx(Zd,{className:"w-4 h-4 text-gray-500"})]}),d.jsxs("div",{className:"flex flex-col gap-1.5",children:[d.jsxs("button",{onClick:()=>{r("burn"),g(!1)},className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-all ${s==="burn"?"bg-gradient-to-r from-red-500 to-orange-500 text-white shadow-md":"text-gray-600 hover:bg-gray-50"}`,children:[d.jsx(Hr,{className:"w-4 h-4"}),d.jsx("span",{className:"text-xs font-medium",children:f("burnArea")})]}),d.jsxs("button",{onClick:()=>{r("non-burn"),g(!1)},className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-all ${s==="non-burn"?"bg-gradient-to-r from-green-500 to-emerald-500 text-white shadow-md":"text-gray-600 hover:bg-gray-50"}`,children:[d.jsx(Ss,{className:"w-4 h-4"}),d.jsx("span",{className:"text-xs font-medium",children:f("noBurnArea")})]})]})]}),l&&c&&d.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-gray-100 overflow-hidden flex flex-col",children:[d.jsx("button",{onClick:l,className:"w-7 h-7 flex items-center justify-center hover:bg-gray-50 active:scale-95 transition-all border-b border-gray-100","aria-label":f("language")==="th"?"":"Zoom in",children:d.jsx(Ag,{className:"w-4 h-4 text-gray-700"})}),d.jsx("button",{onClick:c,className:"w-7 h-7 flex items-center justify-center hover:bg-gray-50 active:scale-95 transition-all","aria-label":f("language")==="th"?"":"Zoom out",children:d.jsx(Eg,{className:"w-4 h-4 text-gray-700"})})]})]}):null}const Ji="burn_area_records",Ay="current_user_id",ws=()=>{try{const s=localStorage.getItem(Ay);return`${Ji}:${s||"guest"}`}catch{return`${Ji}:guest`}},Fe={getRecords:()=>{try{const s=ws();let r=localStorage.getItem(s);if(!r){const n=localStorage.getItem(Ji);n&&(localStorage.setItem(s,n),localStorage.removeItem(Ji),r=n)}return r?JSON.parse(r):[]}catch(s){return console.error("Error reading from storage:",s),[]}},getRecord:s=>Fe.getRecords().find(n=>n.id===s)||null,saveRecord:s=>{try{const r=Fe.getRecords(),n=r.findIndex(o=>o.id===s.id);n>=0?r[n]=s:r.unshift(s),localStorage.setItem(ws(),JSON.stringify(r))}catch(r){console.error("Error saving to storage:",r)}},deleteRecord:s=>{try{const n=Fe.getRecords().filter(o=>o.id!==s);localStorage.setItem(ws(),JSON.stringify(n))}catch(r){console.error("Error deleting from storage:",r)}},updateRecordStatus:(s,r)=>{try{const n=Fe.getRecords(),o=n.find(l=>l.id===s);o&&(o.status=r,localStorage.setItem(ws(),JSON.stringify(n)))}catch(n){console.error("Error updating record status:",n)}},getRecordsByType:s=>Fe.getRecords().filter(n=>n.type===s),getStats:()=>{const s=Fe.getRecords(),r=s.filter(c=>c.type==="rice"),n=s.filter(c=>c.type==="sugarcane"),o=r.reduce((c,f)=>c+f.polygons.reduce((p,g)=>p+g.area,0),0),l=n.reduce((c,f)=>c+f.polygons.reduce((p,g)=>p+g.area,0),0);return{total:s.length,rice:r.length,sugarcane:n.length,totalRiceArea:o/1600,totalSugarcaneArea:l/1600}},purgeSampleData:()=>{try{const s=Fe.getRecords(),r=["sample-rice-1","sample-sugarcane-1","sample-rice-draft"];if(s.some(o=>r.includes(o.id))){console.log("Purging legacy sample data...");const o=s.filter(l=>!r.includes(l.id));localStorage.setItem(ws(),JSON.stringify(o))}}catch(s){console.error("Error purging sample data:",s)}},clearAllData:()=>{try{Object.keys(localStorage).filter(n=>n.startsWith("burn_area_records")).forEach(n=>localStorage.removeItem(n)),localStorage.removeItem("current_user_id"),console.log("All local data cleared.")}catch(s){console.error("Error clearing data:",s)}}};function Oy(){const{t:s,language:r}=Ht(),[n,o]=L.useState(!1),[l,c]=L.useState(""),[f,p]=L.useState("burn"),[g,y]=L.useState([]),[x,j]=L.useState(!0),[b,T]=L.useState(null),[A,O]=L.useState(null),[$,M]=L.useState(null),q=()=>{j(!1),window.__isPinDropping||($?.togglePinDrop?$.togglePinDrop():$?.startPinDrop&&$.startPinDrop()),c(" "+(r==="th"?"":"Click on map to select location")),o(!0),setTimeout(()=>o(!1),3e3)},D=k=>{const Y={id:Date.now().toString(),type:"rice",date:k.date,time:k.time,location:k.location||{lat:13.7563,lng:100.5018,accuracy:5},polygons:g,riceFieldType:k.riceFieldType,riceVariety:k.riceVariety,remarks:k.remarks,photos:k.photos,createdAt:new Date().toISOString(),status:"saved"};Fe.saveRecord(Y),c(` ${s("saveData")} (${g.length} ${s("polygon")})`),o(!0),setTimeout(()=>o(!1),3e3),y([])},U=k=>{const Y={id:Date.now().toString(),type:"rice",date:k.date,time:k.time,location:k.location||{lat:13.7563,lng:100.5018,accuracy:5},polygons:g,riceFieldType:k.riceFieldType,riceVariety:k.riceVariety,remarks:k.remarks,photos:k.photos,createdAt:new Date().toISOString(),status:"draft"};Fe.saveRecord(Y),c(` ${s("saveDraft")}`),o(!0),setTimeout(()=>o(!1),3e3)},re=()=>{if(!$?.isDrawing){if(c(" "+s("gettingLocation")),o(!0),!navigator.geolocation){c(" GPS "),setTimeout(()=>o(!1),3e3);return}navigator.geolocation.getCurrentPosition(k=>{const{latitude:Y,longitude:me}=k.coords;b?(b.setView([Y,me],18),c(` ${s("location")} ${Y.toFixed(6)}, ${me.toFixed(6)}`)):c(` ${s("location")}: ${Y.toFixed(6)}, ${me.toFixed(6)}`),setTimeout(()=>o(!1),3e3)},k=>{let Y=" ";switch(k.code){case k.PERMISSION_DENIED:Y=" ";break;case k.POSITION_UNAVAILABLE:Y=" ";break;case k.TIMEOUT:Y=" ";break}c(Y),setTimeout(()=>o(!1),3e3)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})}},J=()=>{if($?.isDrawing)return;const k=window.__isPinDropping;$?.togglePinDrop?.(),c(k?" "+(r==="th"?"":"Pin drop mode disabled"):" "+(r==="th"?"":"Click on map to select location")),o(!0),setTimeout(()=>o(!1),3e3)},F=()=>{console.log(" Draw polygon button clicked"),$?.startDrawing?($.startDrawing(),c(" "+(s("language")==="th"?" Polygon - , ":"Start drawing - Click to add points, Double-click to finish")),o(!0),setTimeout(()=>o(!1),4e3)):(console.error(" Drawing controls not available!"),c("  Polygon "),o(!0),setTimeout(()=>o(!1),2e3))},fe=()=>{console.log(" Stop drawing button clicked"),$?.stopDrawing&&$.stopDrawing()},ye=k=>{console.log(" Polygon created in screen:",k),setTimeout(()=>{y(Y=>[...Y,k]),c(` ${r==="th"?" Polygon ":"Polygon created"} - ${(k.area/1600).toFixed(2)} ${s("rai")}`),o(!0),setTimeout(()=>o(!1),3e3)},0)},Se=k=>{console.log(" Polygon deleted in screen:",k),y(Y=>Y.filter(me=>me.id!==k)),c(" "+(r==="th"?" Polygon ":"Polygon deleted")),o(!0),setTimeout(()=>o(!1),2e3)},Re=()=>{b&&b.zoomIn()},je=()=>{b&&b.zoomOut()};return d.jsxs("div",{className:"relative h-full flex flex-col",children:[d.jsx(El,{title:s("appTitle"),subtitle:s("appSubtitle"),theme:"rice"}),d.jsxs("div",{className:"flex-1 relative",children:[d.jsx(Ph,{activeLayer:f,onLayerChange:p,theme:"rice",isVisible:!x,onZoomIn:Re,onZoomOut:je}),d.jsx(kh,{theme:"rice",activeLayer:f,onPolygonCreated:ye,onPolygonDeleted:Se,onMapReady:T,onControlsReady:k=>M(k),onLocationSelected:k=>{O(k),c(` ${s("location")} ${k.lat.toFixed(6)}, ${k.lng.toFixed(6)}`),o(!0),setTimeout(()=>o(!1),2500)},children:k=>d.jsx(jh,{theme:"rice",isDrawing:k?.isDrawing||!1,isPinDropping:k?.isPinDropping||!1,onLocateMe:re,onDropPin:J,onDrawPolygon:F,onStopDrawing:fe,onEdit:()=>{c(" "+(r==="th"?' Polygon   ""  popup':'Click on polygon, then press "Delete" in popup')),o(!0),setTimeout(()=>o(!1),3e3)}})}),d.jsx(Eh,{title:`${s("riceTitle")} (${s("riceSubtitle")})`,status:"draft",theme:"rice",isExpanded:x,onExpandChange:j,children:d.jsx(Ry,{onSave:D,onSaveDraft:U,polygons:g,onNavigateToMap:q,mapSelectedLocation:A})})]}),n&&d.jsx(Ch,{message:l})]})}function il({label:s,checked:r,onChange:n}){return d.jsxs("label",{className:"flex items-center gap-3 cursor-pointer hover:bg-white/50 p-2 rounded-xl transition-colors",children:[d.jsx("div",{onClick:()=>n(!r),className:`w-7 h-7 rounded-lg border-2 flex items-center justify-center transition-all shadow-sm ${r?"bg-gradient-to-br from-blue-500 to-blue-600 border-blue-600 shadow-blue-200":"bg-white border-gray-300 hover:border-blue-300"}`,children:r&&d.jsx(Hp,{className:"w-5 h-5 text-white",strokeWidth:3})}),d.jsx("span",{className:"text-gray-900",children:s})]})}function $y({onSave:s,onSaveDraft:r,polygons:n=[],onNavigateToMap:o,mapSelectedLocation:l}){const[c,f]=L.useState(new Date().toISOString().split("T")[0]),[p,g]=L.useState(new Date().toTimeString().slice(0,5)),[y,x]=L.useState(!0),[j,b]=L.useState("before"),[T,A]=L.useState({plowing:!1,collecting:!1,other:!1}),[O,$]=L.useState(""),[M,q]=L.useState(""),[D,U]=L.useState(!1),[re,J]=L.useState([]),[F,fe]=L.useState(null),[ye,Se]=L.useState(!1),[Re,je]=L.useState(null),{t:k}=Ht();L.useEffect(()=>{y&&Y()},[y]),L.useEffect(()=>{l&&fe({lat:l.lat,lng:l.lng,accuracy:F?.accuracy})},[l]);const Y=()=>{if(Se(!0),je(null),!navigator.geolocation){je("GPS "),Se(!1);return}navigator.geolocation.getCurrentPosition(P=>{const{latitude:z,longitude:E,accuracy:v}=P.coords;fe({lat:z,lng:E,accuracy:v}),Se(!1)},P=>{let z="";switch(P.code){case P.PERMISSION_DENIED:z="";break;case P.POSITION_UNAVAILABLE:z="";break;case P.TIMEOUT:z="";break}je(z),Se(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})},me=P=>{const z=P.target.files;if(z&&z.length>0){const E=z[0],v=URL.createObjectURL(E),N=new Image;N.onload=()=>{const ee=Math.min(1,1280/Math.max(N.width,N.height)),H=document.createElement("canvas");H.width=Math.round(N.width*ee),H.height=Math.round(N.height*ee);const X=H.getContext("2d");if(!X){URL.revokeObjectURL(v);return}X.fillStyle="#ffffff",X.fillRect(0,0,H.width,H.height),X.drawImage(N,0,0,H.width,H.height);const Q=H.toDataURL("image/jpeg",.7);J(he=>[...he,Q]),URL.revokeObjectURL(v)},N.src=v}},Ae=P=>{J(z=>z.filter((E,v)=>v!==P))},xe=async P=>{U(!0),await new Promise(E=>setTimeout(E,1e3)),U(!1);const z={date:c,time:p,burnType:j,activities:{...T,otherText:O},remarks:M,photos:re,polygons:n,location:y&&F?{lat:F.lat,lng:F.lng,accuracy:F.accuracy}:null};P?r(z):s(z)};return d.jsxs("div",{className:"space-y-6 py-2",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm text-gray-700 mb-2 flex items-center gap-1.5",children:[d.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:d.jsx(wl,{className:"w-4 h-4 text-blue-600"})}),d.jsx("span",{children:k("date")})]}),d.jsx("input",{type:"date",value:c,onChange:P=>f(P.target.value),className:"w-full px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-xl text-gray-900 focus:border-emerald-400 focus:ring-2 focus:ring-emerald-100 transition-all"})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm text-gray-700 mb-2 flex items-center gap-1.5",children:[d.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:d.jsx(eh,{className:"w-4 h-4 text-purple-600"})}),d.jsx("span",{children:k("time")})]}),d.jsx("input",{type:"time",value:p,onChange:P=>g(P.target.value),className:"w-full px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-xl text-gray-900 focus:border-purple-400 focus:ring-2 focus:ring-purple-100 transition-all"})]})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm text-gray-700 mb-3 flex items-center gap-1.5",children:[d.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:d.jsx(Qi,{className:"w-4 h-4 text-green-600"})}),d.jsx("span",{children:k("location")})]}),d.jsx(Th,{label:k("gpsLocation"),checked:y,onChange:x}),y?d.jsxs("div",{className:"mt-3 p-5 bg-gradient-to-br from-blue-50 to-cyan-50 border-2 border-blue-200 rounded-2xl shadow-sm",children:[d.jsx("div",{className:"text-sm text-gray-700 space-y-2 mb-4",children:ye?d.jsxs("div",{className:"flex items-center gap-2 text-blue-600",children:[d.jsx(Wi,{className:"w-4 h-4 animate-spin"}),d.jsx("span",{children:k("gettingLocation")})]}):Re?d.jsxs("div",{className:"text-red-600 bg-red-50 p-2 rounded-lg",children:[" ",Re]}):F?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-blue-600",children:""}),d.jsxs("span",{className:"text-xs text-gray-600",children:[k("latitude"),":"]}),d.jsxs("span",{children:[F.lat.toFixed(6)," N"]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-blue-600",children:""}),d.jsxs("span",{className:"text-xs text-gray-600",children:[k("longitude"),":"]}),d.jsxs("span",{children:[F.lng.toFixed(6)," E"]})]}),d.jsx("div",{className:"pt-2 border-t border-blue-200",children:d.jsxs("span",{className:"text-xs text-blue-600 bg-blue-100 px-2 py-1 rounded-full",children:[" ",k("accuracy"),": ",F.accuracy?Math.round(F.accuracy):"?"," m"]})})]}):d.jsx("div",{className:"text-gray-500",children:k("noLocationData")})}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs("button",{onClick:Y,disabled:ye,className:"flex-1 px-4 py-3 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-xl hover:from-green-700 hover:to-green-800 active:scale-98 transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:[d.jsx(Wi,{className:`w-4 h-4 ${ye?"animate-spin":""}`}),ye?k("loading"):` ${k("updateGps")}`]}),d.jsxs("button",{className:"flex-1 px-4 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl hover:from-blue-700 hover:to-blue-800 active:scale-98 transition-all",onClick:o,children:[" ",k("selectFromMap")]})]})]}):d.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3",children:[d.jsx("input",{type:"text",placeholder:`X (${k("longitude")})`,className:"px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-xl text-gray-900 focus:border-blue-400 focus:ring-2 focus:ring-blue-100 transition-all"}),d.jsx("input",{type:"text",placeholder:`Y (${k("latitude")})`,className:"px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-xl text-gray-900 focus:border-blue-400 focus:ring-2 focus:ring-blue-100 transition-all"})]})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm text-gray-700 mb-3 flex items-center gap-1.5",children:[d.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center",children:d.jsx(Hr,{className:"w-4 h-4 text-orange-600"})}),d.jsx("span",{children:k("burnType")})]}),d.jsx(Nh,{options:[{value:"before",label:` ${k("burnBefore")}`},{value:"after",label:` ${k("burnAfter")}`},{value:"unspecified",label:` ${k("unspecifiedField")}`}],value:j,onChange:P=>b(P)})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{className:"p-5 bg-gradient-to-br from-red-50 to-orange-50 border-2 border-red-200 rounded-2xl shadow-sm",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[d.jsx("div",{className:"w-8 h-8 bg-red-500 rounded-lg flex items-center justify-center shadow-lg shadow-red-200",children:d.jsx(Hr,{className:"w-5 h-5 text-white"})}),d.jsx("span",{className:"text-sm text-gray-700 font-medium",children:k("burnArea")})]}),d.jsx("div",{className:"text-3xl font-bold text-gray-900 mb-1",children:n.filter(P=>P.type==="burn").reduce((P,z)=>P+z.area/1600,0).toFixed(2)}),d.jsx("div",{className:"text-sm text-gray-600 font-medium",children:k("rai")}),d.jsxs("div",{className:"text-xs text-gray-500 mt-2 bg-red-100/50 px-3 py-1.5 rounded-lg inline-block",children:[n.filter(P=>P.type==="burn").length," ",k("polygon")]})]}),d.jsxs("div",{className:"p-5 bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200 rounded-2xl shadow-sm",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[d.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-lg flex items-center justify-center shadow-lg shadow-green-200",children:d.jsx(Ss,{className:"w-5 h-5 text-white"})}),d.jsx("span",{className:"text-sm text-gray-700 font-medium",children:k("noBurnArea")})]}),d.jsx("div",{className:"text-3xl font-bold text-gray-900 mb-1",children:n.filter(P=>P.type==="non-burn").reduce((P,z)=>P+z.area/1600,0).toFixed(2)}),d.jsx("div",{className:"text-sm text-gray-600 font-medium",children:k("rai")}),d.jsxs("div",{className:"text-xs text-gray-500 mt-2 bg-green-100/50 px-3 py-1.5 rounded-lg inline-block",children:[n.filter(P=>P.type==="non-burn").length," ",k("polygon")]})]})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm text-gray-700 mb-3 flex items-center gap-1.5",children:[d.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:d.jsx("span",{className:"text-base",children:""})}),d.jsx("span",{children:k("activitiesAfterBurn")})]}),d.jsxs("div",{className:"space-y-3 p-4 bg-gray-50 rounded-2xl border-2 border-gray-200",children:[d.jsx(il,{label:k("plowing"),checked:T.plowing,onChange:P=>A({...T,plowing:P})}),d.jsx(il,{label:k("collecting"),checked:T.collecting,onChange:P=>A({...T,collecting:P})}),d.jsx(il,{label:k("other"),checked:T.other,onChange:P=>A({...T,other:P})}),T.other&&d.jsx("input",{type:"text",placeholder:k("otherPlaceholder"),value:O,onChange:P=>$(P.target.value),className:"w-full px-4 py-3 bg-white border-2 border-gray-300 rounded-xl text-gray-900 focus:border-blue-400 focus:ring-2 focus:ring-blue-100 transition-all"})]})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm text-gray-700 mb-3 flex items-center gap-1.5",children:[d.jsx("div",{className:"w-8 h-8 bg-pink-100 rounded-lg flex items-center justify-center",children:d.jsx(qi,{className:"w-4 h-4 text-pink-600"})}),d.jsx("span",{children:k("photos")})]}),re.length>0&&d.jsx("div",{className:"grid grid-cols-3 gap-3 mb-3",children:re.map((P,z)=>d.jsxs("div",{className:"relative aspect-square rounded-xl overflow-hidden bg-gray-100 border-2 border-gray-200",children:[d.jsx("img",{src:P,alt:`Photo ${z+1}`,className:"w-full h-full object-cover"}),d.jsx("button",{onClick:()=>Ae(z),className:"absolute top-1 right-1 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center shadow-lg hover:bg-red-600 transition-colors",children:d.jsx(xl,{className:"w-4 h-4"})})]},z))}),d.jsxs("label",{className:"w-full px-4 py-4 bg-gradient-to-br from-gray-50 to-gray-100 border-2 border-dashed border-gray-300 rounded-2xl text-gray-600 hover:border-pink-300 hover:bg-pink-50 active:scale-98 transition-all flex items-center justify-center gap-3 shadow-sm cursor-pointer",children:[d.jsx(qi,{className:"w-6 h-6 text-pink-500"}),d.jsxs("span",{children:[" ",k("addPhoto")]}),d.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:me,className:"hidden"})]}),re.length>0&&d.jsxs("div",{className:"text-xs text-gray-600 mt-2 text-center",children:[re.length," ",k("photos")]})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm text-gray-700 mb-3 flex items-center gap-1.5",children:[d.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:d.jsx("span",{className:"text-base",children:""})}),d.jsx("span",{children:k("remarks")})]}),d.jsx("textarea",{value:M,onChange:P=>q(P.target.value),placeholder:k("remarksPlaceholder"),rows:4,className:"w-full px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-xl text-gray-900 resize-none focus:border-purple-400 focus:ring-2 focus:ring-purple-100 transition-all"})]}),d.jsxs("div",{className:"space-y-3 pt-4",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[d.jsxs("button",{onClick:()=>xe(!0),disabled:D,className:"px-6 py-3 bg-gradient-to-r from-orange-100 to-orange-200 text-orange-700 rounded-2xl hover:from-orange-200 hover:to-orange-300 active:scale-98 transition-all disabled:opacity-50 shadow-sm",children:[" ",k("saveDraft")]}),d.jsxs("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-gradient-to-r from-gray-100 to-gray-200 text-gray-700 rounded-2xl hover:from-gray-200 hover:to-gray-300 active:scale-98 transition-all shadow-sm",children:[" ",k("clearForm")]})]}),d.jsx("button",{onClick:()=>xe(!1),disabled:D,className:"w-full px-6 py-4 bg-gradient-to-r from-emerald-500 to-green-600 text-white rounded-2xl hover:from-emerald-600 hover:to-green-700 active:scale-98 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-emerald-200",children:D?` ${k("saving")}`:` ${k("saveData")}`})]})]})}function Iy(){const{t:s,language:r}=Ht(),[n,o]=L.useState(!1),[l,c]=L.useState(""),[f,p]=L.useState("burn"),[g,y]=L.useState([]),[x,j]=L.useState(!0),[b,T]=L.useState(null),[A,O]=L.useState(null),[$,M]=L.useState(null),q=()=>{j(!1),$?.togglePinDrop?$.togglePinDrop():$?.startPinDrop&&$.startPinDrop(),c(" "+(r==="th"?"":"Click on map to select location")),o(!0),setTimeout(()=>o(!1),3e3)},D=k=>{const Y={id:Date.now().toString(),type:"sugarcane",date:k.date,time:k.time,location:k.location||{lat:13.7563,lng:100.5018,accuracy:5},polygons:g,burnType:k.burnType,activities:k.activities,remarks:k.remarks,photos:k.photos,createdAt:new Date().toISOString(),status:"saved"};Fe.saveRecord(Y);const me=g.filter(xe=>xe.type==="burn"),Ae=g.filter(xe=>xe.type==="non-burn");c(` ${s("saveData")} - ${s("burnArea")}: ${me.length}, ${s("noBurnArea")}: ${Ae.length}`),o(!0),setTimeout(()=>o(!1),3e3),y([])},U=k=>{const Y={id:Date.now().toString(),type:"sugarcane",date:k.date,time:k.time,location:k.location||{lat:13.7563,lng:100.5018,accuracy:5},polygons:g,burnType:k.burnType,activities:k.activities,remarks:k.remarks,photos:k.photos,createdAt:new Date().toISOString(),status:"draft"};Fe.saveRecord(Y),c(` ${s("saveDraft")}`),o(!0),setTimeout(()=>o(!1),3e3)},re=()=>{if(!$?.isDrawing){if(c(" "+s("gettingLocation")),o(!0),!navigator.geolocation){c(" GPS "),setTimeout(()=>o(!1),3e3);return}navigator.geolocation.getCurrentPosition(k=>{const{latitude:Y,longitude:me}=k.coords;b?(b.setView([Y,me],18),c(` ${s("location")} ${Y.toFixed(6)}, ${me.toFixed(6)}`)):c(` ${s("location")}: ${Y.toFixed(6)}, ${me.toFixed(6)}`),setTimeout(()=>o(!1),3e3)},k=>{let Y=" ";switch(k.code){case k.PERMISSION_DENIED:Y=" ";break;case k.POSITION_UNAVAILABLE:Y=" ";break;case k.TIMEOUT:Y=" ";break}c(Y),setTimeout(()=>o(!1),3e3)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})}},J=()=>{if($?.isDrawing)return;const k=window.__isPinDropping;$?.togglePinDrop?.(),c(k?" "+(r==="th"?"":"Pin drop mode disabled"):" "+(r==="th"?"":"Click on map to select location")),o(!0),setTimeout(()=>o(!1),3e3)},F=()=>{if(console.log(" Draw polygon button clicked"),$?.startDrawing){$.startDrawing();const k=s(f==="burn"?"burnArea":"noBurnArea");c(` ${r==="th"?` ${k} - , `:`Draw ${k} - Click to add points, Double-click to finish`}`),o(!0),setTimeout(()=>o(!1),4e3)}else console.error(" Drawing controls not available!"),c("  Polygon "),o(!0),setTimeout(()=>o(!1),2e3)},fe=()=>{console.log(" Stop drawing button clicked"),$?.stopDrawing&&$.stopDrawing()},ye=k=>{console.log(" Polygon created in screen:",k),setTimeout(()=>{y(me=>[...me,k]);const Y=k.type==="burn"?` ${s("burnArea")}`:` ${s("noBurnArea")}`;c(` ${r==="th"?"":"Created"} ${Y} - ${(k.area/1600).toFixed(2)} ${s("rai")}`),o(!0),setTimeout(()=>o(!1),3e3)},0)},Se=k=>{console.log(" Polygon deleted in screen:",k),y(Y=>Y.filter(me=>me.id!==k)),c(" "+(r==="th"?" Polygon ":"Polygon deleted")),o(!0),setTimeout(()=>o(!1),2e3)},Re=()=>{b&&b.zoomIn()},je=()=>{b&&b.zoomOut()};return d.jsxs("div",{className:"relative h-full flex flex-col",children:[d.jsx(El,{title:s("appTitle"),subtitle:s("appSubtitle"),theme:"sugarcane"}),d.jsxs("div",{className:"flex-1 relative",children:[d.jsx(kh,{theme:"sugarcane",activeLayer:f,onPolygonCreated:ye,onPolygonDeleted:Se,onMapReady:T,onControlsReady:k=>M(k),onLocationSelected:k=>{O(k),c(` ${s("location")} ${k.lat.toFixed(6)}, ${k.lng.toFixed(6)}`),o(!0),setTimeout(()=>o(!1),2500)},children:k=>d.jsxs(d.Fragment,{children:[d.jsx(Ph,{activeLayer:f,onLayerChange:p,theme:"sugarcane",isVisible:!x,onZoomIn:Re,onZoomOut:je}),d.jsx(jh,{theme:"sugarcane",isDrawing:k?.isDrawing||!1,isPinDropping:k?.isPinDropping||!1,onLocateMe:re,onDropPin:J,onDrawPolygon:F,onStopDrawing:fe,onEdit:()=>{c(" "+(r==="th"?' Polygon   ""  popup':'Click on polygon, then press "Delete" in popup')),o(!0),setTimeout(()=>o(!1),3e3)}})]})}),d.jsx(Eh,{title:`${s("sugarcaneTitle")} (${s("sugarcaneSubtitle")})`,status:"draft",theme:"sugarcane",isExpanded:x,onExpandChange:j,children:d.jsx($y,{onSave:D,onSaveDraft:U,polygons:g,onNavigateToMap:q,mapSelectedLocation:A})})]}),n&&d.jsx(Ch,{message:l})]})}function Dy({record:s,onClose:r}){const{t:n,language:o}=Ht(),l=L.useRef(null),c=L.useRef(null),[f,p]=L.useState(s.status),g=async()=>{const{jsPDF:A}=await Wr(async()=>{const{jsPDF:Y}=await import("./jspdf.es.min--0tw-uwZ.js").then(me=>me.j);return{jsPDF:Y}},[]),O=(await Wr(async()=>{const{default:Y}=await import("./html2canvas.esm-B0tyYwQk.js");return{default:Y}},[])).default,$=new A("p","mm","a4"),M=$.internal.pageSize.getWidth(),q=$.internal.pageSize.getHeight(),D=10,U=s.polygons.reduce((Y,me)=>Y+me.area,0)/1600,re=s.polygons.filter(Y=>Y.type==="burn").reduce((Y,me)=>Y+me.area,0)/1600,J=s.polygons.filter(Y=>Y.type==="non-burn").reduce((Y,me)=>Y+me.area,0)/1600,F=document.createElement("div");F.style.position="fixed",F.style.left="-10000px",F.style.top="0",F.style.width="800px",F.style.background="#ffffff",F.style.color="#111827",F.style.fontFamily="system-ui, -apple-system, Segoe UI, Roboto, Noto Sans Thai, TH Sarabun New, Arial, sans-serif",F.style.padding="24px",F.innerHTML=`
      <div style="display:flex;align-items:center;gap:8px;margin-bottom:8px">
        <div style="font-size:24px">${s.type==="rice"?"":""}</div>
        <div style="font-weight:600">${s.type==="rice"?n("rice"):n("sugarcane")}</div>
        <div style="margin-left:auto;font-size:12px;color:#6b7280">${s.date} ${s.time}</div>
      </div>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:12px">
        <div style="padding:8px;border:1px solid #e5e7eb;border-radius:12px">
          <div style="font-size:12px;color:#6b7280">${n("totalArea")}</div>
          <div style="font-size:18px;font-weight:700">${U.toFixed(2)} ${n("rai")}  ${s.polygons.length} ${n("polygon")}</div>
        </div>
        <div style="padding:8px;border:1px solid #e5e7eb;border-radius:12px">
          <div style="font-size:12px;color:#6b7280">${n("location")}</div>
          <div style="font-size:12px;font-family:monospace">${s.location.lat.toFixed(6)}, ${s.location.lng.toFixed(6)}</div>
        </div>
      </div>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:12px">
        <div style="padding:8px;border:1px solid #fee2e2;border-radius:12px;background:#fef2f2">
          <div style="font-size:12px;color:#ef4444">${n("burnArea")}</div>
          <div style="font-size:16px;font-weight:700">${re.toFixed(2)} ${n("rai")}</div>
        </div>
        <div style="padding:8px;border:1px solid #dcfce7;border-radius:12px;background:#f0fdf4">
          <div style="font-size:12px;color:#10b981">${n("noBurnArea")}</div>
          <div style="font-size:16px;font-weight:700">${J.toFixed(2)} ${n("rai")}</div>
        </div>
      </div>
      <div>
        <div style="font-size:12px;font-weight:600;color:#374151;margin-bottom:6px">${n("polygonList")}</div>
        <div style="display:flex;flex-direction:column;gap:4px">
          ${s.polygons.map((Y,me)=>`
            <div style="display:flex;justify-content:space-between;align-items:center;padding:6px;border:1px solid #e5e7eb;border-radius:10px;background:#fafafa">
              <div style="display:flex;align-items:center;gap:6px">
                <div style="width:12px;height:12px;border-radius:3px;background:${Y.color}"></div>
                <div style="font-size:12px">${Y.type==="burn"?"":""} Polygon #${me+1}</div>
              </div>
              <div style="font-size:12px;font-weight:600">${(Y.area/1600).toFixed(2)} ${n("rai")}</div>
            </div>
          `).join("")}
        </div>
      </div>
      ${s.photos&&s.photos.length?`
        <div style="margin-top:10px">
          <div style="font-size:12px;font-weight:600;color:#374151;margin-bottom:6px">${n("photos")} (${s.photos.length})</div>
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:6px">
            ${s.photos.map((Y,me)=>`
              <div style="border:1px solid #e5e7eb;border-radius:10px;overflow:hidden;background:#f3f4f6">
                <img src="${Y}" style="width:100%;height:160px;object-fit:cover" />
                <div style="font-size:11px;color:#6b7280;padding:4px 6px">${n("photos")} ${me+1}</div>
              </div>
            `).join("")}
          </div>
        </div>
      `:""}
    `,document.body.appendChild(F);const fe=await O(F,{scale:2,useCORS:!0,backgroundColor:"#ffffff"}),ye=fe.toDataURL("image/png"),Se=M-D*2,Re=fe.height*(Se/fe.width);$.addImage(ye,"PNG",D,D,Se,Math.min(Re,q-D*2)),document.body.removeChild(F);const je=new Date().toISOString().replace(/[:.]/g,"-").slice(0,19),k=o==="th"?`_${je}.pdf`:`BurnAreaData_${je}.pdf`;$.save(k)},y=()=>{confirm(n("confirmSaveDraft"))&&(Fe.updateRecordStatus(s.id,"saved"),p("saved"))};L.useEffect(()=>((async()=>{const O=await Wr(()=>import("./leaflet-src-DE8NUKC0.js").then(U=>U.l),__vite__mapDeps([0,1]));if(!c.current||l.current)return;const $=s.location?.lat??s.polygons[0]?.points[0]?.[0]??13.7563,M=s.location?.lng??s.polygons[0]?.points[0]?.[1]??100.5018,q=O.map(c.current,{center:[$,M],zoom:15,zoomControl:!0});O.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:19}).addTo(q);const D=O.divIcon({className:"custom-marker",html:`
          <svg width="32" height="32" viewBox="0 0 24 24" fill="#3b82f6" stroke="white" stroke-width="2" style="filter: drop-shadow(0 4px 6px rgba(0,0,0,0.3));">
            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
            <circle cx="12" cy="10" r="3" fill="white"></circle>
          </svg>
        `,iconSize:[32,32],iconAnchor:[16,32]});if(O.marker([$,M],{icon:D}).addTo(q).bindPopup(`<strong> ${n("location")}</strong>`),s.polygons.forEach((U,re)=>{const J=O.polygon(U.points,{color:U.color,fillColor:U.color,fillOpacity:.3,weight:3}).addTo(q),F=(U.area/1600).toFixed(2),fe=U.type==="burn"?` ${n("burnArea")}`:` ${n("noBurnArea")}`;J.bindPopup(`
          <div class="text-sm">
            <strong>${fe} #${re+1}</strong><br/>
            <span class="text-lg font-semibold">${F} ${n("rai")}</span><br/>
            <span class="text-xs text-gray-600"> ${Math.round(U.area)} ${n("sqm")}</span>
          </div>
        `)}),s.polygons.length>0){const U=s.polygons.flatMap(re=>re.points);U.length>0&&q.fitBounds(U)}l.current=q})(),()=>{l.current&&(l.current.remove(),l.current=null)}),[s]);const x=s.type==="rice"?"amber":"emerald",j=s.type==="rice"?"":"",b=s.type==="rice"?n("rice"):n("sugarcane"),T=s.polygons.reduce((A,O)=>A+O.area,0)/1600;return d.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-black/50 backdrop-blur-sm",children:[d.jsx("style",{children:`
        @import url('https://unpkg.com/leaflet@1.9.4/dist/leaflet.css');
        .custom-marker { background: none; border: none; }
      `}),d.jsxs("div",{className:"bg-white w-full h-full sm:h-auto sm:max-h-[90vh] sm:max-w-2xl sm:rounded-3xl overflow-hidden shadow-2xl animate-slide-up",children:[d.jsxs("div",{className:`bg-gradient-to-r from-${x}-500 to-${x}-600 px-6 py-4 flex items-center justify-between`,children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("button",{onClick:r,className:"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center transition-colors",children:d.jsx(Bp,{className:"w-6 h-6 text-white"})}),d.jsx("span",{className:"text-3xl",children:j}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsxs("h2",{className:"text-white text-xl font-semibold",children:[n("details")," - ",b]}),f==="draft"?d.jsxs("span",{className:"bg-orange-500/40 backdrop-blur-sm text-white text-xs px-3 py-1 rounded-full border border-orange-300/50",children:[" ",n("draftStatus")]}):d.jsxs("span",{className:"bg-green-500/40 backdrop-blur-sm text-white text-xs px-3 py-1 rounded-full border border-green-300/50",children:[" ",n("savedStatus")]})]}),d.jsxs("p",{className:"text-white/80 text-sm",children:[s.date," ",s.time]})]})]}),d.jsx("button",{onClick:r,className:"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center transition-colors",children:d.jsx(xl,{className:"w-6 h-6 text-white"})})]}),d.jsxs("div",{className:"overflow-y-auto",style:{maxHeight:"calc(100vh - 100px)"},children:[d.jsx("div",{className:"flex items-center gap-2 px-6 py-3 bg-white border-b border-gray-200",children:d.jsxs("button",{onClick:g,className:"px-3 py-2 bg-blue-600 text-white rounded-xl flex items-center gap-2 text-sm hover:bg-blue-700 transition-colors",children:[d.jsx(rh,{className:"w-4 h-4"}),d.jsx("span",{children:"PDF"})]})}),d.jsx("div",{ref:c,className:"h-64 bg-gray-100"}),d.jsxs("div",{className:"p-6 space-y-4",children:[d.jsxs("div",{className:`p-4 bg-gradient-to-br from-${x}-50 to-${x}-100 rounded-2xl border-2 border-${x}-200`,children:[d.jsx("div",{className:"text-sm text-gray-600 mb-1",children:n("totalArea")}),d.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[T.toFixed(2)," ",n("rai")]}),d.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[s.polygons.length," ",n("polygon"),"   ",Math.round(T*1600)," ",n("sqm")]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:n("polygonList")}),d.jsx("div",{className:"space-y-2",children:s.polygons.map((A,O)=>d.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:A.color}}),d.jsxs("span",{className:"text-sm",children:[A.type==="burn"?"":""," Polygon #",O+1]})]}),d.jsxs("span",{className:"text-sm font-semibold",children:[(A.area/1600).toFixed(2)," ",n("rai")]})]},A.id))})]}),s.type==="rice"&&d.jsxs("div",{className:"space-y-3",children:[s.riceFieldType&&d.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl",children:[d.jsx("span",{className:"text-sm text-gray-600",children:n("riceFieldType")}),d.jsx("span",{className:"text-sm font-semibold",children:s.riceFieldType==="dry"?` ${n("dryField")}`:s.riceFieldType==="wet"?` ${n("rainyField")}`:` ${n("unspecifiedField")}`})]}),s.riceVariety&&d.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl",children:[d.jsx("span",{className:"text-sm text-gray-600",children:n("riceVariety")}),d.jsx("span",{className:"text-sm font-semibold",children:s.riceVariety})]})]}),s.type==="sugarcane"&&d.jsxs("div",{className:"space-y-3",children:[s.burnType&&d.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl",children:[d.jsx("span",{className:"text-sm text-gray-600",children:n("burnType")}),d.jsx("span",{className:"text-sm font-semibold",children:s.burnType==="before"?` ${n("burnBefore")}`:s.burnType==="after"?` ${n("burnAfter")}`:` ${n("unspecifiedField")}`})]}),s.activities&&d.jsxs("div",{className:"p-3 bg-gray-50 rounded-xl",children:[d.jsx("div",{className:"text-sm text-gray-600 mb-2",children:n("activitiesAfterBurn")}),d.jsxs("div",{className:"space-y-1 text-sm",children:[s.activities.plowing&&d.jsxs("div",{children:[" ",n("plowing")]}),s.activities.collecting&&d.jsxs("div",{children:[" ",n("collecting")]}),s.activities.other&&s.activities.otherText&&d.jsxs("div",{children:[" ",s.activities.otherText]})]})]})]}),d.jsxs("div",{className:"p-3 bg-gray-50 rounded-xl",children:[d.jsx("div",{className:"text-sm text-gray-600 mb-1",children:n("gpsLocation")}),d.jsxs("div",{className:"text-sm font-mono",children:[s.location.lat.toFixed(6),", ",s.location.lng.toFixed(6),""]}),s.location.accuracy&&d.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[n("accuracy"),": ",s.location.accuracy,"m"]})]}),s.remarks&&d.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl",children:[d.jsx("div",{className:"text-sm text-gray-600 mb-2",children:n("remarks")}),d.jsx("div",{className:"text-sm text-gray-900",children:s.remarks})]}),s.photos&&s.photos.length>0&&d.jsxs("div",{children:[d.jsxs("h3",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[d.jsx("span",{children:""}),d.jsxs("span",{children:[n("photos")," (",s.photos.length,")"]})]}),d.jsx("div",{className:"grid grid-cols-2 gap-3",children:s.photos.map((A,O)=>d.jsxs("div",{className:"relative aspect-square rounded-xl overflow-hidden bg-gray-100 border-2 border-gray-200 shadow-md",children:[d.jsx("img",{src:A,alt:`Photo ${O+1}`,className:"w-full h-full object-cover cursor-pointer hover:scale-105 transition-transform",onClick:()=>window.open(A,"_blank")}),d.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/50 to-transparent p-2",children:d.jsxs("div",{className:"text-xs text-white text-center",children:[n("photos")," ",O+1]})})]},O))})]}),d.jsxs("div",{className:"text-xs text-gray-400 text-center pt-4 border-t border-gray-200",children:[n("recordedAt"),": ",new Date(s.createdAt).toLocaleString(o==="th"?"th-TH":"en-US")]}),f==="draft"&&d.jsx("div",{className:"pt-4",children:d.jsxs("button",{onClick:y,className:"w-full px-6 py-4 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-2xl hover:from-green-700 hover:to-emerald-700 active:scale-98 transition-all shadow-lg shadow-green-200 flex items-center justify-center gap-2",children:[d.jsx(nh,{className:"w-5 h-5"}),d.jsx("span",{children:n("saveAsFinal")})]})})]})]})]})]})}const Ly=async s=>{console.log(" syncToCloud called with userId:",s);let r=null;if(s)r={id:s},console.log(" Using provided User ID:",s);else{console.warn(" No userId provided, falling back to Supabase auth");const{data:{user:o},error:l}=await ke.auth.getUser();if(l||!o)return console.error("User not authenticated:",l),{success:!1,count:0,error:"Not authenticated"};r=o}console.log(" Final user ID for sync:",r.id);const n=Fe.getRecords().filter(o=>o.status==="saved"&&!o.synced);if(n.length===0)return console.log("No records to sync"),{success:!0,count:0};console.log(`Found ${n.length} records to sync`);for(const o of n)try{console.log(`Syncing record ${o.id}...`);const{data:l,error:c}=await ke.from("burn_records").insert({user_id:r.id,record_type:o.type==="rice"?"":"",notes:o.remarks,location:`POINT(${o.location.lng} ${o.location.lat})`,local_id:o.id}).select().single();if(c)throw c;if(o.polygons&&o.polygons.length>0){const f=o.polygons.map(p=>({record_id:l.id,geometry:{type:"Polygon",coordinates:[p.points.map(g=>[g[1],g[0]])]},area_sqm:p.area}));await ke.from("burn_polygons").insert(f)}if(o.photos&&o.photos.length>0){for(const[f,p]of o.photos.entries())if(!p.startsWith("http"))try{const g=p.match(/^data:([A-Za-z-+\/]+);base64,(.+)$/);if(!g||g.length!==3){console.error("Invalid base64 string format");continue}const y=g[1]||"image/jpeg",x=g[2],j=atob(x),b=new Array(j.length);for(let D=0;D<j.length;D++)b[D]=j.charCodeAt(D);const T=new Uint8Array(b),A=new Blob([T],{type:y}),O=y.split("/")[1]||"jpg",$=`${r.id}/${l.id}/photo_${f}_${Date.now()}.${O}`;console.log(`Uploading photo ${f+1}/${o.photos.length} (${A.size} bytes) to ${$}`);const{error:M}=await ke.storage.from("burn-photos").upload($,A,{contentType:y,upsert:!1});if(M){console.error(`Error uploading photo ${f}:`,M);continue}console.log(`Photo ${f+1} uploaded successfully`);const{error:q}=await ke.from("burn_photos").insert({record_id:l.id,storage_path:$,file_size:A.size,mime_type:y});q&&console.error(`Error saving photo metadata ${f}:`,q)}catch(g){console.error(`Error processing photo ${f}:`,g)}}Fe.saveRecord({...o,synced:!0,supabaseId:l.id}),console.log(` Successfully synced record ${o.id}`)}catch(l){console.error(`Failed to sync record ${o.id}:`,l)}return{success:!0,count:n.length}};class ol{static async saveRecord(r){try{const{data:{user:n}}=await ke.auth.getUser();if(!n)throw new Error("User not authenticated");console.log("Saving record to Supabase...",r);const{data:o,error:l}=await ke.from("burn_records").insert({user_id:n.id,record_type:r.type,notes:r.notes||null,location:`POINT(${r.location.lng} ${r.location.lat})`,location_name:r.location.name||null,local_id:r.id}).select().single();if(l)throw console.error("Error inserting record:",l),l;if(console.log("Record saved:",o.id),r.polygons&&r.polygons.length>0){const c=r.polygons.map(p=>({record_id:o.id,geometry:{type:"Polygon",coordinates:[p.coordinates]}})),{error:f}=await ke.from("burn_polygons").insert(c);if(f)throw console.error("Error inserting polygons:",f),f;console.log(`Saved ${c.length} polygons`)}return r.photos&&r.photos.length>0&&await this.uploadPhotos(o.id,r.photos),o.id}catch(n){return console.error("Error saving record to Supabase:",n),null}}static async uploadPhotos(r,n){const{data:{user:o}}=await ke.auth.getUser();if(o){console.log(`Uploading ${n.length} photos...`);for(let l=0;l<n.length;l++)try{const c=n[l];if(c.startsWith("http")){console.log(`Skipping external URL photo ${l+1}`);continue}const f=c.match(/^data:([A-Za-z-+\/]+);base64,(.+)$/);if(!f||f.length!==3){console.error(`Invalid base64 format for photo ${l}`);continue}const p=f[1]||"image/jpeg",g=f[2],y=atob(g),x=new Array(y.length);for(let M=0;M<y.length;M++)x[M]=y.charCodeAt(M);const j=new Uint8Array(x),b=new Blob([j],{type:p}),T=p.split("/")[1]||"jpg",A=`${o.id}/${r}/photo_${l}_${Date.now()}.${T}`;console.log(`Uploading photo ${l+1}/${n.length} to ${A} (${b.size} bytes, ${p})`);const{error:O}=await ke.storage.from("burn-photos").upload(A,b,{contentType:p,upsert:!1});if(O)throw console.error(`Upload error for photo ${l}:`,O),O;const{error:$}=await ke.from("burn_photos").insert({record_id:r,storage_path:A,file_size:b.size,mime_type:p});if($)throw console.error(`Database error for photo ${l}:`,$),$;console.log(` Photo ${l+1} uploaded successfully`)}catch(c){console.error(` Error uploading photo ${l}:`,c)}}}static async getUserRecords(r){try{let n=null;if(r)n={id:r};else{const{data:{user:c}}=await ke.auth.getUser();n=c}if(!n)return[];console.log("Fetching user records...");const{data:o,error:l}=await ke.from("burn_records").select(`
          *,
          burn_polygons(*),
          burn_photos(*)
        `).eq("user_id",n.id).order("created_at",{ascending:!1});if(l)throw console.error("Error fetching records:",l),l;return console.log(`Fetched ${o?.length||0} records`),await Promise.all(o.map(c=>this.transformToAppRecord(c)))}catch(n){return console.error("Error fetching records:",n),[]}}static async getRecordsNearLocation(r,n,o=10){try{const{data:{user:l}}=await ke.auth.getUser();if(!l)return[];console.log(`Fetching records within ${o}km of (${r}, ${n})`);const{data:c,error:f}=await ke.rpc("get_records_near",{lat:r,lng:n,radius_meters:o*1e3,p_user_id:l.id});if(f)throw console.error("Error fetching nearby records:",f),f;return console.log(`Found ${c?.length||0} nearby records`),await Promise.all(c.map(p=>this.transformToAppRecord(p)))}catch(l){return console.error("Error fetching nearby records:",l),[]}}static async getPhotoUrl(r){try{const{data:n}=await ke.storage.from("burn-photos").createSignedUrl(r,3600);return n?.signedUrl||null}catch(n){return console.error("Error getting photo URL:",n),null}}static async getRecordPhotos(r){try{const{data:n,error:o}=await ke.from("burn_photos").select("storage_path").eq("record_id",r);if(o)throw o;return(await Promise.all(n.map(c=>this.getPhotoUrl(c.storage_path)))).filter(c=>c!==null)}catch(n){return console.error("Error getting record photos:",n),[]}}static async deleteRecord(r){try{if(console.log(`Deleting record ${r}...`),!r||!r.includes("-"))return console.warn(`Skipping cloud delete: Invalid UUID format "${r}"`),!0;const{data:n}=await ke.from("burn_photos").select("storage_path").eq("record_id",r);if(n&&n.length>0){const l=n.map(f=>f.storage_path),{error:c}=await ke.storage.from("burn-photos").remove(l);c?console.error("Error deleting photos from storage:",c):console.log(`Deleted ${l.length} photos from storage`)}const{error:o}=await ke.from("burn_records").delete().eq("id",r);if(o)throw console.error("Error deleting record:",o),o;return console.log("Record deleted successfully"),!0}catch(n){return console.error("Error deleting record:",n),!1}}static async transformToAppRecord(r){const n=r.burn_photos?await Promise.all(r.burn_photos.map(c=>this.getPhotoUrl(c.storage_path))):[];let o=0,l=0;if(r.location)if(typeof r.location=="string"&&r.location.startsWith("01"))try{const c=r.location,f=c.substring(18,34),p=c.substring(34,50),g=y=>{const x=y.match(/.{1,2}/g);if(!x)return 0;const j=new Uint8Array(x.map(b=>parseInt(b,16)));return new DataView(j.buffer).getFloat64(0,!0)};l=g(f),o=g(p)}catch(c){console.warn("Failed to parse WKB location:",c)}else{const c=typeof r.location=="string"?r.location.match(/POINT\(([^ ]+) ([^ ]+)\)/):null;c&&(l=parseFloat(c[1]),o=parseFloat(c[2]))}return{id:r.local_id||r.id,type:r.record_type,notes:r.notes||"",location:{lat:o,lng:l,name:r.location_name||""},polygons:r.burn_polygons?.map(c=>({coordinates:c.geometry.coordinates[0]}))||[],photos:n.filter(c=>c!==null),timestamp:new Date(r.created_at).getTime(),supabaseId:r.id}}static async getAnalytics(){try{const{data:{user:r}}=await ke.auth.getUser();if(!r)return null;const{count:n}=await ke.from("burn_records").select("*",{count:"exact",head:!0}).eq("user_id",r.id),{data:o}=await ke.from("burn_polygons").select("area_sqm, burn_records!inner(user_id)").eq("burn_records.user_id",r.id),l=o?.reduce((p,g)=>p+(g.area_sqm||0),0)||0,{data:c}=await ke.from("burn_records").select("record_type").eq("user_id",r.id),f=c?.reduce((p,g)=>(p[g.record_type]=(p[g.record_type]||0)+1,p),{});return{totalRecords:n||0,totalAreaHectares:(l/1e4).toFixed(2),recordsByType:f}}catch(r){return console.error("Error fetching analytics:",r),null}}}function Uy(){const{t:s,language:r}=Ht(),{user:n}=eo(),[o,l]=L.useState([]),[c,f]=L.useState([]),[p,g]=L.useState(""),[y,x]=L.useState("all"),[j,b]=L.useState("all"),[T,A]=L.useState(null),[O,$]=L.useState(!1),[M,q]=L.useState(new Set),[D,U]=L.useState(!1),[re,J]=L.useState(!1);L.useEffect(()=>{n?.id&&localStorage.setItem("current_user_id",n.id)},[n?.id]),L.useEffect(()=>{Fe.purgeSampleData(),F()},[]),L.useEffect(()=>{const E=async()=>{if(n?.id)try{const v=await ol.getUserRecords(n.id);if(!v||v.length===0)return;v.map(K=>{try{const ee=K.type===""||K.type==="rice"?"rice":"sugarcane",H=new Date(K.timestamp),X=H.toISOString().slice(0,10),Q=H.toTimeString().slice(0,5),he=(K.polygons||[]).map(ae=>{if(!ae.coordinates||!Array.isArray(ae.coordinates))return null;const pe=ae.coordinates.map(([Ct,$e])=>[$e,Ct]),Ve=ye(pe);return{id:Math.random().toString(36).slice(2),points:pe,area:Ve,type:"burn",color:"#ef4444"}}).filter(ae=>ae!==null);return{id:K.id,type:ee,date:X,time:Q,location:{lat:K.location.lat,lng:K.location.lng,accuracy:5},polygons:he,riceFieldType:void 0,riceVariety:void 0,burnType:void 0,activities:void 0,remarks:K.notes||"",photos:K.photos||[],createdAt:H.toISOString(),status:"saved",synced:!0,supabaseId:K.supabaseId}}catch(ee){return console.error("Error mapping record:",K,ee),null}}).filter(K=>K!==null).forEach(K=>Fe.saveRecord(K)),F()}catch(v){console.error("Error loading from cloud:",v)}};n?.id&&E()},[n?.id]),L.useEffect(()=>{fe()},[o,p,y,j]);const F=()=>{const E=Fe.getRecords();l(E)},fe=()=>{let E=o;y!=="all"&&(E=E.filter(v=>v.type===y)),j!=="all"&&(E=E.filter(v=>v.status===j)),p&&(E=E.filter(v=>v.date.includes(p)||v.remarks?.toLowerCase().includes(p.toLowerCase())||v.id.includes(p))),f(E)},ye=E=>{if(!E||E.length<3)return 0;const v=6371e3;let N=0;for(let K=0;K<E.length;K++){const ee=(K+1)%E.length,H=E[K][0]*Math.PI/180,X=E[ee][0]*Math.PI/180,Q=E[K][1]*Math.PI/180,he=E[ee][1]*Math.PI/180;N+=(he-Q)*(2+Math.sin(H)+Math.sin(X))}return N=Math.abs(N*v*v/2),N},Se=async()=>{J(!0);try{if(!n){alert(r==="th"?"":"Please log in");return}console.log(" HistoryScreen calling syncToCloud with user.id:",n.id);const E=await Ly(n.id);if(E.success&&n.id){const v=await ol.getUserRecords(n.id);v&&v.length>0&&v.forEach(N=>{const K=N.type===""||N.type==="rice"?"rice":"sugarcane",ee=new Date(N.timestamp);Fe.saveRecord({id:N.id,type:K,date:ee.toISOString().slice(0,10),time:ee.toTimeString().slice(0,5),location:{lat:N.location.lat,lng:N.location.lng,accuracy:5},polygons:[],remarks:N.notes||"",photos:N.photos||[],createdAt:ee.toISOString(),status:"saved",synced:!0,supabaseId:N.supabaseId})})}alert(` ${s("syncSuccess")} (${E.count} ${s("records")})`),F()}catch(E){alert(` ${s("syncFailed")}: ${E.message}`)}finally{J(!1)}},Re=async E=>{if(!confirm(s("confirmDelete")))return;const v=o.find(N=>N.id===E);console.log("Attempting delete for:",E,"Remote ID:",v?.supabaseId);try{v?.supabaseId&&v.supabaseId.includes("-")?await ol.deleteRecord(v.supabaseId)||alert(r==="th"?"":"Failed to delete on cloud"):console.warn("Skipping cloud delete: Invalid supabaseId",v?.supabaseId)}catch{alert(r==="th"?"":"Error deleting on cloud")}finally{Fe.deleteRecord(E),F()}},je=E=>{A(E),$(!0)},k=E=>{Fe.updateRecordStatus(E,"saved"),F()},Y=()=>{U(!D),D&&q(new Set)},me=()=>{const E=new Set(c.map(v=>v.id));q(E)},Ae=()=>q(new Set),xe=async()=>{if(M.size===0){alert(s("pleaseSelectRecords"));return}try{const E=await Wr(()=>import("./xlsx-DGuHH-KN.js"),[]),N=o.filter(Q=>M.has(Q.id)).map(Q=>{const he=Q.polygons.reduce((Ve,ut)=>Ve+ut.area,0)/1600,ae=Q.polygons.filter(Ve=>Ve.type==="burn").reduce((Ve,ut)=>Ve+ut.area,0)/1600,pe=Q.polygons.filter(Ve=>Ve.type==="non-burn").reduce((Ve,ut)=>Ve+ut.area,0)/1600;return{[s("date")]:Q.date,[s("time")]:Q.time,[s("excelType")]:Q.type==="rice"?s("rice"):s("sugarcane"),[s("excelStatus")]:Q.status==="draft"?s("draftStatus"):s("savedStatus"),[s("excelTotalArea")]:he.toFixed(2),[s("excelBurnArea")]:ae.toFixed(2),[s("excelNoBurnArea")]:pe.toFixed(2),[s("excelPolygonCount")]:Q.polygons.length,[s("excelLatitude")]:Q.location.lat.toFixed(6),[s("excelLongitude")]:Q.location.lng.toFixed(6),[s("excelAccuracy")]:Q.location.accuracy||"-",[s("excelRiceFieldType")]:Q.riceFieldType==="dry"?s("dryField"):Q.riceFieldType==="wet"?s("rainyField"):Q.riceFieldType==="unspecified"?s("unspecifiedField"):"-",[s("excelRiceVariety")]:Q.riceVariety||"-",[s("excelBurnType")]:Q.burnType==="before"?s("burnBefore"):Q.burnType==="after"?s("burnAfter"):Q.burnType==="unspecified"?s("unspecifiedField"):"-",[s("excelPlowing")]:Q.activities?.plowing?s("yes"):s("no"),[s("excelCollecting")]:Q.activities?.collecting?s("yes"):s("no"),[s("excelOtherActivities")]:Q.activities?.otherText||"-",[s("excelRemarks")]:Q.remarks||"-",[s("excelPhotoCount")]:Q.photos?.length||0}}),K=E.utils.json_to_sheet(N),ee=E.utils.book_new();E.utils.book_append_sheet(ee,K,r==="th"?"":"Burn Area Data"),K["!cols"]=Array(19).fill({wch:15});const H=new Date().toISOString().replace(/[:.]/g,"-").slice(0,19),X=r==="th"?`_${H}.xlsx`:`BurnAreaData_${H}.xlsx`;E.writeFile(ee,X),U(!1),q(new Set),alert(`${s("exportSuccess")} ${M.size} ${s("exportSuccessSuffix")}`)}catch(E){console.error("Export error:",E),alert(s("exportError"))}},P=async()=>{if(M.size===0){alert(s("pleaseSelectRecords"));return}try{const{jsPDF:E}=await Wr(async()=>{const{jsPDF:ae}=await import("./jspdf.es.min--0tw-uwZ.js").then(pe=>pe.j);return{jsPDF:ae}},[]),v=(await Wr(async()=>{const{default:ae}=await import("./html2canvas.esm-B0tyYwQk.js");return{default:ae}},[])).default,N=o.filter(ae=>M.has(ae.id)),K=new E("p","mm","a4"),ee=K.internal.pageSize.getWidth(),H=K.internal.pageSize.getHeight(),X=10;for(let ae=0;ae<N.length;ae++){const pe=N[ae],Ve=pe.polygons.reduce((ot,Ft)=>ot+Ft.area,0)/1600,ut=pe.polygons.filter(ot=>ot.type==="burn").reduce((ot,Ft)=>ot+Ft.area,0)/1600,Ct=pe.polygons.filter(ot=>ot.type==="non-burn").reduce((ot,Ft)=>ot+Ft.area,0)/1600,$e=document.createElement("div");$e.style.position="fixed",$e.style.left="-10000px",$e.style.top="0",$e.style.width="800px",$e.style.background="#ffffff",$e.style.color="#111827",$e.style.fontFamily="system-ui, -apple-system, Segoe UI, Roboto, Noto Sans Thai, TH Sarabun New, Arial, sans-serif",$e.style.padding="24px",$e.style.border="1px solid #e5e7eb",$e.style.borderRadius="12px",$e.style.boxShadow="0 2px 10px rgba(0,0,0,0.08)";const Rn=r==="th"?"":"Burn Area Report",An=pe.type==="rice"?r==="th"?"":"Rice":r==="th"?"":"Sugarcane",Kr=pe.riceFieldType?pe.riceFieldType==="dry"?s("dryField"):pe.riceFieldType==="wet"?s("rainyField"):s("unspecifiedField"):"-";$e.innerHTML=`
          <div style="text-align:center; font-weight:700; font-size:20px; margin-bottom:16px;">${Rn}</div>
          <div style="display:flex; gap:12px; margin-bottom:12px; font-size:14px;">
            <div><strong>${s("records")}:</strong> ${ae+1}</div>
            <div><strong>${s("excelType")}:</strong> ${An}</div>
            <div><strong>${s("status")}:</strong> ${pe.status==="draft"?s("draftStatus"):s("savedStatus")}</div>
          </div>
          <div style="display:grid; grid-template-columns:1fr 1fr; gap:8px; font-size:13px; margin-bottom:12px;">
            <div><strong>${s("date")}:</strong> ${pe.date} ${pe.time}</div>
            <div><strong>${s("location")}:</strong> ${pe.location.lat.toFixed(6)}, ${pe.location.lng.toFixed(6)}</div>
            <div><strong>${s("totalArea")}:</strong> ${Ve.toFixed(2)} ${s("rai")}</div>
            <div><strong>${s("burnArea")}:</strong> ${ut.toFixed(2)} ${s("rai")}</div>
            <div><strong>${s("noBurnArea")}:</strong> ${Ct.toFixed(2)} ${s("rai")}</div>
            ${pe.riceFieldType?`<div><strong>${s("riceFieldType")}:</strong> ${Kr}</div>`:""}
            ${pe.riceVariety?`<div><strong>${s("riceVariety")}:</strong> ${pe.riceVariety}</div>`:""}
            ${pe.burnType?`<div><strong>${s("burnType")}:</strong> ${pe.burnType==="before"?s("burnBefore"):pe.burnType==="after"?s("burnAfter"):s("unspecifiedField")}</div>`:""}
            ${pe.remarks?`<div style="grid-column:1 / -1;"><strong>${s("remarks")}:</strong> ${pe.remarks}</div>`:""}
          </div>
          ${pe.photos&&pe.photos.length>0?`
            <div style="margin-top:8px;">
              <div style="font-weight:700; font-size:14px; margin-bottom:6px;">${s("photos")}:</div>
              <div style="display:grid; grid-template-columns:repeat(3, 1fr); gap:8px;">
                ${pe.photos.map((ot,Ft)=>`
                  <div style="border:1px solid #e5e7eb; border-radius:8px; overflow:hidden;">
                    <img src="${ot}" style="width:100%; height:120px; object-fit:cover;" crossorigin="anonymous" />
                    <div style="font-size:11px; color:#6b7280; padding:4px 6px;">${s("photos")} ${Ft+1}</div>
                  </div>
                `).join("")}
              </div>
            </div>
          `:""}
        `,document.body.appendChild($e);const Gr=await v($e,{scale:2,useCORS:!0,backgroundColor:"#ffffff"}),On=Gr.toDataURL("image/png"),nr=ee-X*2,sr=Gr.height*(nr/Gr.width);ae>0&&K.addPage(),K.addImage(On,"PNG",X,X,nr,Math.min(sr,H-X*2)),document.body.removeChild($e)}const Q=new Date().toISOString().replace(/[:.]/g,"-").slice(0,19),he=r==="th"?`_${Q}.pdf`:`BurnAreaData_${Q}.pdf`;K.save(he),U(!1),q(new Set),alert(`${s("exportSuccess")} ${M.size} ${s("exportSuccessSuffix")}`)}catch(E){console.error("PDF export error:",E),alert(s("exportError"))}},z=Fe.getStats();return d.jsxs("div",{className:"relative h-full flex flex-col bg-gradient-to-br from-gray-50 to-gray-100",children:[d.jsx(El,{title:s("appTitle"),subtitle:s("appSubtitle"),bgColor:"bg-gradient-to-r from-gray-700 to-gray-800 px-4 py-4 border-b border-white/10"}),d.jsx("div",{className:"px-4 py-2 bg-gradient-to-br from-blue-600 via-blue-500 to-indigo-600 shadow-xl",children:d.jsxs("div",{className:"grid grid-cols-3 gap-1.5",children:[d.jsxs("div",{className:"bg-white/25 backdrop-blur-lg rounded-lg p-2 text-center border border-white/30 shadow-lg",children:[d.jsx("div",{className:"text-xl font-bold text-white drop-shadow-lg",children:z.total}),d.jsx("div",{className:"text-[9px] text-white/90 font-medium",children:s("totalRecords")})]}),d.jsxs("div",{className:"bg-white/25 backdrop-blur-lg rounded-lg p-2 text-center border border-white/30 shadow-lg",children:[d.jsx("div",{className:"text-xl font-bold text-white drop-shadow-lg",children:z.rice}),d.jsxs("div",{className:"text-[9px] text-white/90 font-medium",children:[" ",s("rice")]})]}),d.jsxs("div",{className:"bg-white/25 backdrop-blur-lg rounded-lg p-2 text-center border border-white/30 shadow-lg",children:[d.jsx("div",{className:"text-xl font-bold text-white drop-shadow-lg",children:z.sugarcane}),d.jsxs("div",{className:"text-[9px] text-white/90 font-medium",children:[" ",s("sugarcane")]})]})]})}),d.jsxs("div",{className:"px-4 py-3 bg-white/80 backdrop-blur-sm border-b border-gray-200/70 space-y-2 shadow-md",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("div",{className:"flex-1 flex items-center gap-2 bg-gray-50 rounded-xl px-3 py-2 border border-gray-200 shadow-sm",children:[d.jsx(Dg,{className:"w-4 h-4 text-gray-500"}),d.jsx("input",{type:"text",placeholder:s("searchPlaceholder"),value:p,onChange:E=>g(E.target.value),className:"flex-1 bg-transparent border-none outline-none text-sm"})]}),c.length>0&&d.jsxs("button",{onClick:Y,className:`px-3 py-2 rounded-xl transition-all shadow-md flex items-center gap-1.5 font-medium text-sm ${D?"bg-gray-200 text-gray-700":"bg-green-600 text-white"}`,children:[d.jsx(Ed,{className:"w-4 h-4"}),d.jsx("span",{children:s(D?"cancel":"download")})]}),d.jsxs("button",{onClick:()=>{confirm(r==="th"?"?":"Are you sure you want to delete ALL local data? This cannot be undone.")&&(Fe.clearAllData(),F(),alert("Local data cleared."))},className:"px-3 py-2 rounded-xl transition-all shadow-md flex items-center gap-1.5 font-medium text-sm bg-red-100 text-red-600 border border-red-200 hover:bg-red-200",children:[d.jsx(sh,{className:"w-4 h-4"}),d.jsx("span",{className:"hidden sm:inline",children:"Reset"})]}),d.jsxs("button",{onClick:Se,disabled:re,className:"px-3 py-2 rounded-xl transition-all shadow-md flex items-center gap-1.5 font-medium text-sm bg-blue-600 text-white disabled:opacity-50",children:[d.jsx(ng,{className:"w-4 h-4"}),d.jsx("span",{children:s(re?"syncing":"sync")})]})]}),D&&c.length>0&&d.jsxs("div",{className:"space-y-2 pt-2 animate-in slide-in-from-top duration-200",children:[d.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-xl border-2 border-green-200",children:[d.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[s("selected"),": ",M.size," ",s("records").toLowerCase()]}),d.jsx("button",{onClick:M.size===c.length?Ae:me,className:"px-3 py-1.5 text-xs bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:M.size===c.length?s("deselectAll"):s("selectAll")})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[d.jsxs("button",{onClick:xe,disabled:M.size===0,className:"px-4 py-3 bg-green-600 text-white rounded-xl flex items-center justify-center gap-2 font-medium disabled:opacity-50 hover:bg-green-700 transition-colors shadow-lg shadow-green-200",children:[d.jsx(Ed,{className:"w-5 h-5"}),d.jsx("span",{children:"Excel"})]}),d.jsxs("button",{onClick:P,disabled:M.size===0,className:"px-4 py-3 bg-red-600 text-white rounded-xl flex items-center justify-center gap-2 font-medium disabled:opacity-50 hover:bg-red-700 transition-colors shadow-lg shadow-red-200",children:[d.jsx(rh,{className:"w-5 h-5"}),d.jsxs("span",{children:["PDF (+",s("photos"),")"]})]})]})]})]}),d.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-4",children:c.length===0?d.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[d.jsx("div",{className:"text-6xl mb-4",children:""}),d.jsx("div",{className:"text-lg",children:s("noData")}),d.jsx("div",{className:"text-sm",children:s("startRecording")})]}):d.jsx("div",{className:"space-y-3 pb-4",children:c.map(E=>d.jsx(My,{record:E,onView:()=>je(E),onDelete:()=>Re(E.id),onSave:()=>k(E.id),selectedForExport:M,isSelectMode:D,setSelectedForExport:q},E.id))})}),O&&T&&d.jsx(Dy,{record:T,onClose:()=>{$(!1),A(null)}})]})}function My({record:s,onView:r,onDelete:n,onSave:o,selectedForExport:l,isSelectMode:c,setSelectedForExport:f}){const{t:p}=Ht(),g=s.type==="rice"?"from-amber-500 to-yellow-600":"from-emerald-500 to-green-600",y=s.type==="rice"?"":"",x=s.type==="rice"?p("rice"):p("sugarcane"),j=s.polygons.reduce((A,O)=>A+O.area,0)/1600,b=l.has(s.id),T=()=>{const A=new Set(l);b?A.delete(s.id):A.add(s.id),f(A)};return d.jsxs("div",{className:`bg-white rounded-2xl shadow-lg border overflow-hidden transition-all ${c&&b?"border-green-500 border-2 ring-2 ring-green-200":"border-gray-200/50"}`,onClick:c?T:void 0,children:[d.jsxs("div",{className:`bg-gradient-to-r ${g} px-4 py-4 flex items-center justify-between shadow-md`,children:[d.jsxs("div",{className:"flex items-center gap-3",children:[c&&d.jsx("div",{className:"w-10 h-10 bg-white/25 backdrop-blur-sm rounded-full flex items-center justify-center border border-white/30",children:b?d.jsx(Mg,{className:"w-6 h-6 text-white"}):d.jsx(zg,{className:"w-6 h-6 text-white"})}),d.jsx("div",{className:"w-12 h-12 bg-white/25 backdrop-blur-sm rounded-2xl flex items-center justify-center border border-white/30",children:d.jsx("span",{className:"text-2xl",children:y})}),d.jsxs("div",{children:[d.jsx("div",{className:"text-white font-bold",children:x}),d.jsx("div",{className:"text-white/90 text-xs mt-1",children:d.jsx("span",{className:"bg-white/20 px-2 py-1 rounded-full font-medium",children:s.status==="draft"?p("draftStatus"):p("savedStatus")})})]})]}),d.jsxs("div",{className:"text-white text-right",children:[d.jsx("div",{className:"text-2xl font-bold",children:j.toFixed(2)}),d.jsxs("div",{className:"text-xs text-white/90",children:[p("rai")," (",s.polygons.length," ",p("polygon"),")"]})]})]}),d.jsxs("div",{className:"p-5 space-y-3 bg-gradient-to-br from-white to-gray-50",children:[d.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-700 bg-white px-3 py-2 rounded-xl shadow-sm border border-gray-100",children:[d.jsx(wl,{className:"w-5 h-5 text-blue-500"}),d.jsxs("span",{className:"font-medium",children:[s.date," ",s.time]})]}),d.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-700 bg-white px-3 py-2 rounded-xl shadow-sm border border-gray-100",children:[d.jsx(Qi,{className:"w-5 h-5 text-red-500"}),d.jsxs("span",{className:"font-mono text-xs",children:[s.location.lat.toFixed(4),", ",s.location.lng.toFixed(4),""]})]}),s.remarks&&d.jsxs("div",{className:"text-sm text-gray-700 bg-blue-50/50 p-3 rounded-xl border border-blue-100/50",children:[" ",s.remarks]}),s.photos&&s.photos.length>0&&d.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700 bg-purple-50/50 px-3 py-2 rounded-xl border border-purple-100/50",children:[" ",d.jsxs("span",{className:"font-medium",children:[s.photos.length," ",p("photos").toLowerCase()]})]}),!c&&d.jsxs("div",{className:"flex gap-2 pt-3",children:[d.jsxs("button",{onClick:r,className:"flex-1 px-4 py-3 bg-blue-600 text-white rounded-xl flex items-center justify-center gap-2 font-medium hover:bg-blue-700 transition-colors",children:[d.jsx(th,{className:"w-5 h-5"}),d.jsx("span",{children:p("viewDetails")})]}),s.status==="draft"&&d.jsx("button",{onClick:A=>{A.stopPropagation(),confirm(p("confirmSaveDraft"))&&o()},className:"px-4 py-3 bg-green-600 text-white rounded-xl shadow-lg shadow-green-100 hover:bg-green-700 transition-colors",children:d.jsx(nh,{className:"w-5 h-5"})}),d.jsx("button",{onClick:n,className:"px-4 py-3 bg-red-100 text-red-600 rounded-xl border border-red-200 hover:bg-red-200 transition-colors",children:d.jsx(sh,{className:"w-5 h-5"})})]})]})]})}function Fy({currentScreen:s,onScreenChange:r}){const{t:n}=Ht();return d.jsx("nav",{className:"bg-white/95 backdrop-blur-lg border-t border-gray-200/50 safe-area-bottom shadow-[0_-4px_30px_rgba(0,0,0,0.1)]",children:d.jsxs("div",{className:"grid grid-cols-3 px-2",children:[d.jsxs("button",{onClick:()=>r("rice"),className:`flex flex-col items-center justify-center py-3 px-2 transition-all relative rounded-2xl mx-1 ${s==="rice"?"text-amber-600":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[s==="rice"&&d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-amber-100/80 to-amber-50/40 rounded-2xl"}),d.jsx("div",{className:`relative z-10 w-12 h-12 rounded-2xl flex items-center justify-center mb-1.5 transition-all ${s==="rice"?"bg-gradient-to-br from-amber-500 to-yellow-600 shadow-xl shadow-amber-300/50 scale-110":"bg-gray-100"}`,children:d.jsx(qg,{className:`w-6 h-6 ${s==="rice"?"text-white":"text-gray-600"}`})}),d.jsx("span",{className:`relative z-10 text-xs font-medium ${s==="rice"?"font-semibold":""}`,children:n("navRice")}),s==="rice"&&d.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-16 h-1 bg-gradient-to-r from-amber-500 to-yellow-600 rounded-full shadow-lg"})]}),d.jsxs("button",{onClick:()=>r("sugarcane"),className:`flex flex-col items-center justify-center py-3 px-2 transition-all relative rounded-2xl mx-1 ${s==="sugarcane"?"text-emerald-600":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[s==="sugarcane"&&d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-emerald-100/80 to-emerald-50/40 rounded-2xl"}),d.jsx("div",{className:`relative z-10 w-12 h-12 rounded-2xl flex items-center justify-center mb-1.5 transition-all ${s==="sugarcane"?"bg-gradient-to-br from-emerald-500 to-green-600 shadow-xl shadow-emerald-300/50 scale-110":"bg-gray-100"}`,children:d.jsx(gg,{className:`w-6 h-6 ${s==="sugarcane"?"text-white":"text-gray-600"}`})}),d.jsx("span",{className:`relative z-10 text-xs font-medium ${s==="sugarcane"?"font-semibold":""}`,children:n("navSugarcane")}),s==="sugarcane"&&d.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-16 h-1 bg-gradient-to-r from-emerald-500 to-green-600 rounded-full shadow-lg"})]}),d.jsxs("button",{onClick:()=>r("history"),className:`flex flex-col items-center justify-center py-3 px-2 transition-all relative rounded-2xl mx-1 ${s==="history"?"text-blue-600":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[s==="history"&&d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-blue-100/80 to-blue-50/40 rounded-2xl"}),d.jsx("div",{className:`relative z-10 w-12 h-12 rounded-2xl flex items-center justify-center mb-1.5 transition-all ${s==="history"?"bg-gradient-to-br from-blue-500 to-blue-700 shadow-xl shadow-blue-300/50 scale-110":"bg-gray-100"}`,children:d.jsx(dg,{className:`w-6 h-6 ${s==="history"?"text-white":"text-gray-600"}`})}),d.jsx("span",{className:`relative z-10 text-xs font-medium ${s==="history"?"font-semibold":""}`,children:n("navHistory")}),s==="history"&&d.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-16 h-1 bg-gradient-to-r from-blue-500 to-blue-700 rounded-full shadow-lg"})]})]})})}function zy(){const[s,r]=L.useState(!1),[n,o]=L.useState(""),[l,c]=L.useState(""),[f,p]=L.useState(!1),[g,y]=L.useState(!1),[x,j]=L.useState("th"),[b,T]=L.useState(""),[A,O]=L.useState(""),{signIn:$,signUp:M}=eo(),q={th:{title:"",subtitle:"",signIn:"",signUp:"",email:"",password:"",emailPlaceholder:"",passwordPlaceholder:"",passwordHint:" 6 ",signInButton:"",signUpButton:"",loading:"...",noAccount:"?",hasAccount:"?",clickSignUp:"",clickSignIn:"",security:"",successSignUp:"! ...",features:{title:"",gps:" GPS",gpsDesc:" GPS ",map:"",mapDesc:"",data:"",dataDesc:" Excel",sync:"",syncDesc:" Cloud Storage"}},en:{title:"Burn Area Recording System",subtitle:"Efficient Field Data Management",signIn:"Sign In",signUp:"Sign Up",email:"Email",password:"Password",emailPlaceholder:"Enter your email",passwordPlaceholder:"Enter your password",passwordHint:"Password must be at least 6 characters",signInButton:"Sign In",signUpButton:"Create Account",loading:"Processing...",noAccount:"Don't have an account?",hasAccount:"Already have an account?",clickSignUp:"Sign Up",clickSignIn:"Sign In",security:"Your data is encrypted and secure",successSignUp:"Account created successfully! Signing in...",features:{title:"Key Features",gps:"GPS Tracking",gpsDesc:"Accurate GPS location recording",map:"Map Drawing",mapDesc:"Draw burn area boundaries on map",data:"Data Management",dataDesc:"Save and export to Excel format",sync:"Auto Sync",syncDesc:"Secure cloud data storage"}}},D=async re=>{re.preventDefault(),T(""),O(""),y(!0);try{if(!n||!l)throw new Error(x==="th"?"":"Please enter email and password");if(l.length<6)throw new Error(x==="th"?" 6 ":"Password must be at least 6 characters");const{error:J}=s?await M(n,l):await $(n,l);if(J){let F=J.message;throw x==="th"&&(J.message.includes("Invalid login credentials")?F="":J.message.includes("Email already registered")?F="":J.message.includes("Invalid email")?F="":J.message.includes("Password")&&(F="")),new Error(F)}s&&O(U.successSignUp)}catch(J){T(J.message||(x==="th"?"":"An error occurred"))}finally{y(!1)}},U=x==="th"?q.th:q.en;return d.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-amber-50 to-yellow-50 flex",children:[d.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-4 sm:p-8",children:d.jsxs("div",{className:"w-full max-w-md",children:[d.jsx("div",{className:"flex justify-end mb-6",children:d.jsxs("div",{className:"inline-flex bg-white rounded-full shadow-md border border-gray-200 p-1",children:[d.jsx("button",{onClick:()=>j("th"),className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${x==="th"?"bg-gradient-to-r from-orange-500 to-amber-500 text-white shadow-md":"text-gray-600 hover:text-gray-900"}`,children:""}),d.jsx("button",{onClick:()=>j("en"),className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${x==="en"?"bg-gradient-to-r from-orange-500 to-amber-500 text-white shadow-md":"text-gray-600 hover:text-gray-900"}`,children:"EN"})]})}),d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-orange-500 to-red-600 rounded-3xl shadow-2xl shadow-orange-300/50 mb-4 animate-pulse",children:d.jsx(Hr,{className:"w-10 h-10 text-white",strokeWidth:2.5})}),d.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:U.title}),d.jsx("p",{className:"text-gray-600",children:U.subtitle})]}),d.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl border border-gray-100 p-8",children:[d.jsxs("div",{className:"flex bg-gray-100 rounded-2xl p-1 mb-6",children:[d.jsx("button",{onClick:()=>{r(!1),T(""),O("")},className:`flex-1 py-3 rounded-xl font-semibold transition-all ${s?"text-gray-600 hover:text-gray-900":"bg-white text-gray-900 shadow-md"}`,children:U.signIn}),d.jsx("button",{onClick:()=>{r(!0),T(""),O("")},className:`flex-1 py-3 rounded-xl font-semibold transition-all ${s?"bg-white text-gray-900 shadow-md":"text-gray-600 hover:text-gray-900"}`,children:U.signUp})]}),d.jsxs("form",{onSubmit:D,children:[d.jsxs("div",{className:"mb-5",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:U.email}),d.jsxs("div",{className:"relative",children:[d.jsx(Sg,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),d.jsx("input",{type:"email",value:n,onChange:re=>o(re.target.value),placeholder:U.emailPlaceholder,className:"w-full pl-12 pr-4 py-3.5 bg-gray-50 border-2 border-gray-200 rounded-xl focus:border-orange-400 focus:bg-white focus:ring-4 focus:ring-orange-100 transition-all outline-none",required:!0})]})]}),d.jsxs("div",{className:"mb-5",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:U.password}),d.jsxs("div",{className:"relative",children:[d.jsx(wg,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),d.jsx("input",{type:f?"text":"password",value:l,onChange:re=>c(re.target.value),placeholder:U.passwordPlaceholder,className:"w-full pl-12 pr-12 py-3.5 bg-gray-50 border-2 border-gray-200 rounded-xl focus:border-orange-400 focus:bg-white focus:ring-4 focus:ring-orange-100 transition-all outline-none",required:!0,minLength:6}),d.jsx("button",{type:"button",onClick:()=>p(!f),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:f?d.jsx(og,{className:"w-5 h-5"}):d.jsx(th,{className:"w-5 h-5"})})]}),s&&d.jsx("p",{className:"text-xs text-gray-500 mt-2",children:U.passwordHint})]}),b&&d.jsxs("div",{className:"mb-5 p-4 bg-red-50 border-2 border-red-200 rounded-xl flex items-start gap-3",children:[d.jsx(Qp,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),d.jsx("p",{className:"text-sm text-red-800",children:b})]}),A&&d.jsxs("div",{className:"mb-5 p-4 bg-green-50 border-2 border-green-200 rounded-xl flex items-start gap-3",children:[d.jsx("div",{className:"w-5 h-5 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:d.jsx("span",{className:"text-white text-xs font-bold",children:""})}),d.jsx("p",{className:"text-sm text-green-800",children:A})]}),d.jsx("button",{type:"submit",disabled:g,className:"w-full bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600 text-white font-semibold py-4 rounded-xl shadow-lg shadow-orange-300/50 hover:shadow-xl hover:shadow-orange-400/50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:g?d.jsxs("span",{className:"flex items-center justify-center gap-2",children:[d.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),U.loading]}):s?U.signUpButton:U.signInButton})]}),d.jsx("div",{className:"mt-6 text-center",children:d.jsxs("p",{className:"text-sm text-gray-600",children:[s?U.hasAccount:U.noAccount," ",d.jsx("button",{type:"button",onClick:()=>{r(!s),T(""),O("")},className:"font-semibold text-orange-600 hover:text-orange-700 transition-colors",children:s?U.clickSignIn:U.clickSignUp})]})})]}),d.jsxs("p",{className:"text-center text-xs text-gray-500 mt-6",children:[" ",U.security]})]})}),d.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-orange-500 via-amber-500 to-yellow-500 p-12 items-center justify-center relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-white/10 rounded-full blur-3xl"}),d.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-white/10 rounded-full blur-3xl"}),d.jsxs("div",{className:"relative z-10 max-w-lg",children:[d.jsx("div",{className:"mb-12",children:d.jsx("h2",{className:"text-4xl font-bold text-white mb-4 drop-shadow-lg",children:U.features.title})}),d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"bg-white/20 backdrop-blur-lg rounded-2xl p-6 border border-white/30 shadow-2xl hover:bg-white/25 transition-all",children:d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center flex-shrink-0",children:d.jsx("span",{className:"text-2xl",children:""})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-white font-semibold text-lg mb-1",children:U.features.gps}),d.jsx("p",{className:"text-white/90 text-sm",children:U.features.gpsDesc})]})]})}),d.jsx("div",{className:"bg-white/20 backdrop-blur-lg rounded-2xl p-6 border border-white/30 shadow-2xl hover:bg-white/25 transition-all",children:d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center flex-shrink-0",children:d.jsx("span",{className:"text-2xl",children:""})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-white font-semibold text-lg mb-1",children:U.features.map}),d.jsx("p",{className:"text-white/90 text-sm",children:U.features.mapDesc})]})]})}),d.jsx("div",{className:"bg-white/20 backdrop-blur-lg rounded-2xl p-6 border border-white/30 shadow-2xl hover:bg-white/25 transition-all",children:d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center flex-shrink-0",children:d.jsx("span",{className:"text-2xl",children:""})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-white font-semibold text-lg mb-1",children:U.features.data}),d.jsx("p",{className:"text-white/90 text-sm",children:U.features.dataDesc})]})]})}),d.jsx("div",{className:"bg-white/20 backdrop-blur-lg rounded-2xl p-6 border border-white/30 shadow-2xl hover:bg-white/25 transition-all",children:d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center flex-shrink-0",children:d.jsx("span",{className:"text-2xl",children:""})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-white font-semibold text-lg mb-1",children:U.features.sync}),d.jsx("p",{className:"text-white/90 text-sm",children:U.features.syncDesc})]})]})})]})]})]})]})}function By(){const{user:s,loading:r}=eo(),[n,o]=L.useState("rice");return r?d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),d.jsx("p",{className:"text-gray-600",children:"..."})]})}):s?d.jsxs("div",{className:"h-screen flex flex-col bg-gray-50 overflow-hidden",children:[d.jsxs("div",{className:"flex-1 overflow-hidden",children:[n==="rice"&&d.jsx(Oy,{}),n==="sugarcane"&&d.jsx(Iy,{}),n==="history"&&d.jsx(Uy,{})]}),d.jsx(Fy,{currentScreen:n,onScreenChange:o})]}):d.jsx(zy,{})}function Vy(){return d.jsx(Ty,{children:d.jsx(Kg,{children:d.jsx(By,{})})})}Dp.createRoot(document.getElementById("root")).render(d.jsx(Vy,{}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").catch(()=>{})});export{Wr as _};
